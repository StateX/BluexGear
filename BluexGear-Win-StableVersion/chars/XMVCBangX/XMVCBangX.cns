; Constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
life = 1100			;Amount of life to start with
attack            = 80
defence           = 100
fall.defence_up = 50	;Percentage to increase defense everytime player is knocked down
liedown.time = 60		;Time which player lies down for, before getting up
airjuggle = 15		;Number of points for juggling
sparkno = 2			;Default hit spark number for HitDefs
guard.sparkno = 40	;Default guard spark number
KO.echo = 0			;1 to enable echo on KO
volume = 0			;Volume offset (negative for softer)
IntPersistIndex = 60	;Variables with this index and above will not have their values
FloatPersistIndex = 40  ;reset to 0 between rounds or matches. There are 60 int variables,
  				;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
  				;If omitted, then it defaults to 60 and 40 for integer and float
  				;variables repectively, meaning that none are persistent, i.e. all
  				;are reset. If you want your variables to persist between matches,
  				;you need to override state 5900 from common1.cns.


[Size]
xscale = 0.3			;Horizontal scaling factor.
yscale = 0.3			;Vertical scaling factor.
ground.back = 15		;Player width (back, ground)
ground.front = 16		;Player width (front, ground)
air.back = 12		;Player width (back, air)
air.front = 12		;Player width (front, air)
height = 60			;Height of player (for opponent to jump over)
attack.dist = 160		;Default attack distance
proj.attack.dist = 90	;Default attack distance for projectiles
proj.doscale = 0		;Set to 1 to scale projectiles too
head.pos = -5, -90	;Approximate position of head
mid.pos = -5, -60		;Approximate position of midsection
shadowoffset = 0		;Number of pixels to vertically offset the shadow
draw.offset = 0,0		;Player drawing offset in pixels (x, y)


;-------------------------------------------------------------------------------
[Velocity]
walk.fwd     = 3;.5
walk.back    = -3;.5
run.fwd      = 7, 0
run.back     = -5.8,-2.1
jump.neu     = 0,-10;-11.2
jump.back    = -4,.1
jump.fwd     = 4,.1
runjump.back = -4,7;-2.55,-8.1
runjump.fwd  = 5,7;4.2,-8.7
airjump.neu  = 0,-5
airjump.back = -2,.1
airjump.fwd  = 2,.1

;-------------------------------------------------------------------------------
[Movement]
airjump.num     = 0
airjump.height  = 45
yaccel          = .5
stand.friction  = .85
crouch.friction = .82

;Default language victory quotes (optional).  **MUGEN 1.0**
;If this section is included, the default language victory quotes must be in English.
[Quotes]
; Up to 100 victory quotes can be specified per language (victory0 - victory99)
victory1 = "You are unfit to survive."
victory2 = "You are nothing but a fool villain."
victory3 = "I am light and justice!!"
victory4 = "Do not mess with me if you're not ready to face me."
victory5 = "Trust me....you won't stand a chance against my 'Shun Goku Satsu'."
victory6 = "What is wrong with you messing with me ?"
victory7 = "If you ever show up again....I'll defeat you and send you to the far place like Mount Everest."
victory8 = "you won't win..if you hesitate"
;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...
;---------------------------------------------------------------------------
;-------------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State ガード不能]
Type = AssertSpecial
Trigger1 = 1
Flag = NoStandGuard
Flag2 = NoCrouchGuard
Flag3 = NoAirGuard

[State PlayS, 1]
type = PlaySnd
trigger1 = sysvar(1) = 0
trigger1 = time = 1
value = 40,0
channel = 0
persistent = 1

[State PlayS, 1]
type = PlaySnd
trigger1 = sysvar(1) = 1
trigger1 = time = 1
value = 40,1
channel = 0
persistent = 1

[State PlayS, 1]
type = PlaySnd
trigger1 = sysvar(1) = -1
trigger1 = time = 1
value = 40,2
channel = 0
persistent = 1

[State PlayS, 1]
type = PlaySnd
trigger1 = var(3) != 0
trigger1 = time = 0
value = 900, 0

[State 40, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
triggerall = var(3) = 0
trigger1 = animtime = 0
trigger1 = prevstateno = 100
x = ifelse(sysvar(1)=0, const(velocity.runjump.fwd.x), ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4]
type = VelSet
triggerall = var(3) = 0
trigger1 = animtime = 0
trigger1 = prevstateno = 101
x = ifelse(sysvar(1)=0, const(velocity.walk.fwd.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4]
type = VelSet
triggerall = var(3) = 0
trigger1 = animtime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
triggerall = var(3) = 0
trigger1 = animtime = 0
trigger1 = prevstateno = 100
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 45, 6]
type = VelSet
triggerall = time = 0
trigger1 = var(3) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -13.5

[State 45, 6]
type = VelSet
trigger1 = time = 0
trigger1 = var(3) = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y) -4.1


[State 40, 6]
type = ChangeState
trigger1 = var(3) = 0
trigger1 = animtime = 0
trigger2 = var(3) >= 1
trigger2 = time = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type    = A
physics = N
anim = 40
ctrl = 0

[State 40, 4]
type = VelSet
triggerall = var(3) = 0
trigger1 = animtime = 0
trigger1 = prevstateno = 100
x = ifelse(sysvar(1)=0, const(velocity.runjump.fwd.x), ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4]
type = VelSet
triggerall = var(3) = 0
trigger1 = animtime = 0
trigger1 = prevstateno = 101
x = ifelse(sysvar(1)=0, const(velocity.walk.fwd.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4]
type = VelSet
triggerall = var(3) = 0
trigger1 = animtime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
triggerall = var(3) = 0
trigger1 = animtime = 0
trigger1 = prevstateno = 100
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 45, 6]
type = VelSet
triggerall = time = 0
trigger1 = var(3) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -13.5

[State 45, 6]
type = VelSet
trigger1 = time = 0
trigger1 = var(3) = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y) -4.1

[State VarS, 1]
type = VarSet
triggerall = time >= 0
trigger1 = var(4) = 1
trigger2 = prevstateno = 610
trigger3 = prevstateno = 620
trigger4 = prevstateno = 621
trigger5 = prevstateno = 622
trigger6 = prevstateno = 623
trigger7 = prevstateno = 624
var(4) = 2


[State VarS, 1]
type = VarSet
trigger1 = time = 0
var(10) = 0

[State 45, 3]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = time = 0
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Jump Up
[Statedef 50]
anim = 40
type    = A
physics = A

[State Exp, 1]
type = Explod
triggerall = sysvar(1) = 0
Trigger1 = time = 0
trigger1 = var(4) = 0
anim = 6203
ID = 6201
pos = 0,10
postype = p1
sprpriority = -6
ownpal = 1
scale = .7,.7
pausemovetime = 99999
supermovetime = 99999
supermove = 1
ignorehitpause = 1
persistent = 0

[State Exp, 1]
type = Explod
triggerall = sysvar(1) = 1
Trigger1 = time = 0
trigger1 = var(4) = 0
anim = 6204
ID = 6201
pos = -10,10
postype = p1
sprpriority = -6
ownpal = 1
scale = .7,.7
pausemovetime = 99999
supermovetime = 99999
supermove = 1
ignorehitpause = 1
persistent = 0

[State Exp, 1]
type = Explod
triggerall = sysvar(1) = -1
Trigger1 = time = 0
trigger1 = var(4) = 0
anim = 6204
ID = 6201
pos = -10,10
postype = p1
facing = -1
sprpriority = -6
ownpal = 1
scale = .7,.7
pausemovetime = 99999
supermovetime = 99999
supermove = 1
ignorehitpause = 1
persistent = 0

[State VarS, 1]
type = VarSet
triggerall = var(4) = 0
trigger1 = command != "holdup"
var(4) = 1

[State ChangeS, 1]
type = ChangeState
trigger1 = command = "holdup"
trigger1 = var(4) = 1
trigger1 = ctrl = 1
value = 45
ctrl = 1

[State Turn, 1]
type = Turn
Triggerall = Time = 0
Triggerall = var(4) = 2
Trigger1 = P2bodydist X < -5
Trigger1 = FrontEdgeBodyDist > 5
Trigger2 = FrontEdgeBodyDist < 5
Trigger2 = P2bodydist X < -27

[State Turn, 1]
type = Turn
Triggerall = Time >= 0
Triggerall = P2bodydist X < -17
Triggerall = FrontEdgeBodyDist > 20
Trigger1 = var(4) = 2
Trigger2 = var(6) = 1
persistent = 0

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse((vel X)=0, 41, ifelse((vel X)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3


;-------------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A
anim = 51

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 304

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 303

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 302

[State VarS, 1]
type = VarSet
triggerall = var(4) = 0
trigger1 = command != "holdup"
var(4) = 1

[State ChangeS, 1]
type = ChangeState
trigger1 = command = "holdup"
trigger1 = var(4) = 1
trigger1 = var(5) = 0
trigger1 = ctrl = 1
value = 45
ctrl = 1

[State 50, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State ChangeS, 1]
type = ChangeState
trigger1 = time >= 0
trigger1 = pos Y > -1
value = 52
;-------------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State Exp, 1]
type = Explod
Trigger1 = time = 0
anim = 6201
ID = 6201
pos = 0,0
postype = p1
sprpriority = -6
ownpal = 1
scale = .4,.4
pausemovetime = 99999
supermovetime = 99999
supermove = 1
ignorehitpause = 1
persistent = 0

[State VarS, 1]
type = VarSet
triggerall = time >= 0
trigger1 = var(4) = 1
trigger2 = var(4) = 2
var(4) = 0

[State VarS, 1]
type = VarSet
trigger1 = time >= 0
trigger1 = var(5) != 0
var(5) = 0

[State VarS, 1]
type = VarSet
trigger1 = time >= 0
trigger1 = var(3) >= 1
var(3) = 0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2]
type = ChangeState
trigger1 = time = 0
trigger1 = prevstateno = [120,155]
value = 120



[State 52, 3]
type = CtrlSet
triggerall = prevstateno = [600,630]
trigger1 = time = 0
value = 1

[State 52, 3]
type = CtrlSet
triggerall = prevstateno != [600,630]
trigger1 = time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------------------------------------------------------------
[Statedef 7100]
type = S
physics = S
anim = 9999
sprpriority = 0

[State -3,Slow]
type = Pause
trigger1 = (GameTime%1) = 0
time = 2
movetime = 0
ignorehitpause = 1

[State 1260, snd]
type = playsnd
trigger1 = time = 0
value = S9,3
volume = 255
channel = -1

[State 1260, snd]
type = playsnd
trigger1 = time = 0
value = S9,3
volume = 255
channel = -1

[State 1260, snd]
type = playsnd
trigger1 = time = 0
value = S9,3
volume = 255
channel = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 20
value = 7101
;-------------------------------------------------------------------------
[Statedef 7101]
type = S
physics = S
anim = 9999
sprpriority = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokoslow




[State 901, 4]
type = DestroySelf
trigger1 = time = -1
;===========================================================================
;トリックアップ空中
[Statedef 3030]
type = S
movetype = A
physics = S
anim = 740
ctrl = 0

[State 0, Explod]
type = Explod
trigger1 = animelem =3
anim = 20002
ID = 20002
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 5
supermove = 9999999999999
pausemove = 9999999999999
scale = 1,1
sprpriority = 0
ontop = 1





[State 2030, ぶつかり]
type = playerpush
trigger1 = time >= 0
value = 0

[State 2030, 効果音]
type = PlaySnd
trigger1 = animelem = 1
value = 40, 0



[State 2030, 摩擦]
type = velmul
trigger1 = Vel X != 0
x = 0.75

[State 2030, 摩擦]
type = velmul
trigger1 = 1
y = 0.3

[State 2030, 変数]
type = VarSet
trigger1 = time = 0
var(5) = ifelse(P2BodyDist X >= 140, 1, 0)

[State 2030, 移動]
type = PosAdd
triggerall = var(5) = 1
trigger1 = animelem = 3
x = 100

[State 2030, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animelem = 3
Trigger1 = Facing = 1
x = enemynear,pos x-10

[State 2030, 移動]
type = posset
triggerall = var(5) = 0
trigger1 = animelem = 3
Trigger1 = Facing = -1
x = enemynear,pos x+10

[State 2030, 移動]
type = PosAdd
trigger1 = animelem = 3
y = -100

[State 2030, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2013
ctrl = 0



;===========================================================================
;ワープ後空中
[Statedef 2013]
type    = A
physics = A
ctrl = 0
anim = 40

[State 2013, コントロール]
type = CtrlSet
trigger1 = time = 4
value = 1

[State 2013, 速度]
type = Velset
trigger1 = time = 0
x = 2
y = -3

[State 2013, 変数]
type = VarSet
trigger1 = time = 0
var(16) = 1

[State 2013, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0
value = 52
ctrl = 1
;---------------------------------------------------------------------------
;Air Throw P (attempt)

[Statedef 840]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 840
sprpriority = 2

[State 820, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NT
hitflag = A-
priority = 1, Miss
sparkno = -1
sprpriority = 2
p1facing = 1
p2facing = -1
p1stateno = 841
p2stateno = 845
guard.dist = 0
yaccel = 0.55
fall.xvelocity = 0
fall.yvelocity = 1
fall = 1
fall.recover = 0
fall.damage = 0

[State 820, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 690

;Air trow p1----------------------------------------------------------------------------
[Statedef 841]
type = S
movetype = A
physics = N
anim = 841
ctrl = 0
sprpriority = 6

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 26
pos = 10,0
;ignorehitpause =
;persistent =

[State 821, PosFeeze]
type = PosFreeze
trigger1 = AnimElemTime(1) <= 26

[State 821, PosFeeze]
type = PosFreeze
trigger1 = AnimElem = 2

[State 821, VelSet X]
type = VelSet
trigger1 = AnimElem = 2
x = 0
y = 0


;falla
[State 0, ChangeState]
type = ChangeState
triggerall = time <= 10
trigger1 = enemy,command = "y"
trigger2 = enemy,command = "c"
value = 814
ctrl = 0
ignorehitpause = 1

;acierta
[State 0, ChangeState]
type = ChangeState
trigger1 = time = 10
value = 842
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;Air Throw P (throwing opponent)

[Statedef 842]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 842
poweradd = ifelse(Var(22) = 1,0,55)
sprpriority = 2

[State 821, TargetBind 1]
type = TargetBind
trigger1 = animelem = 1
pos = 10,0

[State 821, PosFeeze]
type = PosFreeze
trigger1 = AnimElemTime(1) <= 50


[State 821, VelSet X]
type = VelSet
trigger1 = AnimElem = 2
x = 0
y = 0


[State 821, VelSet X]
type = VelSet
trigger1 = AnimElem = 7
x = 0
y = 0

[State 821, VelSet Y]
type = VelSet
trigger1 = (Time = 0) && (Vel Y <= -0)
y = -0

[State 821, VelAdd]
type = VelAdd
trigger1 = AnimElem = 11
y = 3.5

[State 0, TargetState]
type = TargetState
trigger1 = animelem = 3
value = 846

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 3
value = -120
absolute = 0

[State 0, EnvColor]
type = EnvColor
trigger1 = animelem = 3
value = 255,255,255
time = 5



[State 821, PlaySnd];grab sound
type = PlaySnd
trigger1 = animelem = 3
value = 1000,2




[State 821, PlaySnd];grab sound
type = PlaySnd
trigger1 = Time = 0
value = 23,0


[State 821, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 843

;---------------------------------------------------------------------------
;Air Throw P (ground - slamming opponent)

[Statedef 843]
type    = S
physics = S
movetype = A
velset = 0,0
ctrl = 0
anim = 47
poweradd = 0
sprpriority = 2



[State 822, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Air Throw P (slammed state for opponent)

[Statedef 846]
type    = A
movetype= H
physics = N
velset = 0,9

[State 826, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 846


[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 827, SelfState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100
;---------------------
;---------------------
;AIR trow p2 --------------------------------------------------------------------------
[Statedef 845]
type = S
movetype = H
physics = N
anim = 132
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

;falla
[State 0, ChangeState]
type = ChangeState
trigger1 = time = 26
value = 850
ctrl = 0
ignorehitpause = 1

;Defiende
[State 0, ChangeState]
type = ChangeState
triggerall = time <= 10
trigger1 =command = "y"
trigger2 = command = "c"
value = 813
ctrl = 0
ignorehitpause = 1












;---------------------------------------------------------------------------

;Air throw defiende p2
[Statedef 813]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 7
y = 0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
trigger1 = SelfAnimExist(8208)= 0
value = 600
persistent = 0

[State VarR, 1]
type = VarRandom
trigger1 = animelem = 1
v = 1
range = 0,1

[State PlayS, 1]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(1) = 1
value = 801,0
channel = 0

[State 890, FX]
type = playsnd
trigger1 = !time
value = S100,81

[State 890, FX]
type = explod
trigger1 = !time
anim = 8009
ID = 8009
sprpriority = 5
postype = p1
pos = 0, -55
ownpal = 1
pausemovetime = -1
supermovetime = -1



[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 2



[State 890, FX]
type = playsnd
trigger1 = !time
value = S100,81

[State 890, FX]
type = explod
trigger1 = !time
anim = 8009
ID = 8009
sprpriority = 5
postype = p1
pos = 0, -55
ownpal = 1
pausemovetime = -1
supermovetime = -1

[State Alpha Counter Left]
trigger1 = TeamSide = 1
trigger1 = Time = 0
type = Explod
ownpal = 1
anim = 9913
scale = 0.6,0.7
postype = left
pos = 10, 83
ontop = 1
bindtime = -1

[State Alpha Counter Right]
trigger1 = TeamSide = 2
trigger1 = Time = 0
type = Explod
ownpal = 1
anim = 9913
ontop = 1
scale = 0.6,0.7
postype = right
pos = -130, 83
bindtime = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State ChangeS, 1]
type = selfstate
trigger1 = animtime = 0
trigger2 = time >= 0
value = 51
ctrl = 1

;Air throw falla p1
[Statedef 814]
type = A
movetype = H
physics = N
anim = 5254
ctrl = 0
sprpriority = 2



[State PlayS, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 800,0



[State PlayS, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 802,0
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -7

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 0
value = 51
ctrl = 1
ignorehitpause = 1
;---------------------------------------------------------------------------
; crossover Hyper Bg
[Statedef 33122]
physics = N
anim = 9999
sprpriority = -3



[State 33120]
type = VarSet
trigger1 = Time = 0
var(3) = Root,Stateno


[State 33120]
type = AssertSpecial
trigger1 = anim = 9900
flag = noBG
flag2 = noFG
;flag3 = nobardisplay
ignorehitpause = 1


[State 33120]
type  = Explod
triggerall = Time = 0
trigger1 = p2life > 0
anim = 8011
postype = left
ID = 8011
sprpriority = -4
removetime = -1
pos = 160,0
scale = 1,1.5
bindtime = -1
;facing=1
ignorehitpause=1
supermovetime=9999
pausemovetime=9999
supermove = 9999
pausemove = 9999



[State 33120]
type  = null;Explod
triggerall = Time = 0
trigger1 = p2life > 0
anim = 8011
postype = left
ID = 8011
sprpriority = -4
removetime = -1
pos = 0,0
scale = 1,1.5
bindtime = -1
;facing=1
ignorehitpause=1
supermovetime=9999
pausemovetime=9999
supermove = 9999
pausemove = 9999


[State 33120]
type  = null;Explod
triggerall = Time = 0
trigger1 = p2life > 0
anim = 8011
postype = right
ID = 8011
sprpriority = -4
removetime = 270
pos = -160,0
scale = 0.642,1
bindtime = -1
facing=-1
ignorehitpause=1
supermovetime=9999
pausemovetime=9999
supermove = 9999
pausemove = 9999



[State 33120]
type = RemoveExplod
triggerall = Numexplod(8011)
trigger1 = Root, stateno != var(3)
trigger2 = p2life = 0
trigger3 = Root,MoveType = H

[State 33120]
type = Destroyself
triggerall = Numexplod(8011)= 0
triggerall = Time > 7
trigger1 = Root, stateno != var(3)
trigger2 = Root,MoveType = H

[State 19000, Hyper Combo Finish]
type = ChangeState
trigger1 = Root, WinKO && RoundState = 3
value = 33123

;---------------------------------------------------------------------------
; Hyper KO Bg
[Statedef 33123]
physics = N
anim = 9999
sprpriority = -3




[State 33121]
type = AssertSpecial
trigger1 = anim = 9900
flag = noBG
flag2 = nobardisplay
flag3 = noFG
ignorehitpause = 1

[State 19001, HyperComboFinishBg]
type = Explod
trigger1 = !Time
anim = 20015
pos = -80, -290
id = 20015
sprpriority = -101
supermovetime = -1
postype = Left
bindtime = -1
removetime = 100
ownpal = 1
scale = 1,2

[State 33121]
type = PlaySnd
trigger1 = Time = 0
value = S33123,0
channel = 1

[State 33121]
type = PlaySnd
trigger1 = Time = 0
value = S33123,1
channel = 1

[State 33121]
type = Destroyself
trigger1 = roundstate = 4
trigger2 = Root,stateno = [180,189]
trigger3 = Time = 60
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; Hyper Bg
[Statedef 33120]
physics = N
anim = 9999
sprpriority = -3



[State 33120]
type = VarSet
trigger1 = Time = 0
var(3) = Root,Stateno


[State 33120]
type = AssertSpecial
trigger1 = anim = 9900
flag = noBG
flag2 = noFG
;flag3 = nobardisplay
ignorehitpause = 1


[State 33120]
type  = Explod
triggerall = Time = 0
trigger1 = p2life > 0
anim = 20014
postype = left
ID = 20014
sprpriority = -4
removetime = -1
pos = 0,0
scale = 1,1
bindtime = -1
;facing=1
ignorehitpause=1
supermovetime=9999
pausemovetime=9999
supermove = 9999
pausemove = 9999



[State 33120]
type  = null;Explod
triggerall = Time = 0
trigger1 = p2life > 0
anim = 20014
postype = left
ID = 20014
sprpriority = -4
removetime = -1
pos = 0,0
scale = 1,1
bindtime = -1
;facing=1
ignorehitpause=1
supermovetime=9999
pausemovetime=9999
supermove = 9999
pausemove = 9999


[State 33120]
type  = null;Explod
triggerall = Time = 0
trigger1 = p2life > 0
anim = 20014
postype = right
ID = 20014
sprpriority = -4
removetime = 270
pos = -160,0
scale = 0.642,1
bindtime = -1
facing=-1
ignorehitpause=1
supermovetime=9999
pausemovetime=9999
supermove = 9999
pausemove = 9999





[State 33120]
type = RemoveExplod
triggerall = Numexplod(20014)
trigger1 = Root, stateno != var(3)
trigger2 = p2life = 0
trigger3 = Root,MoveType = H

[State 33120]
type = Destroyself
triggerall = Numexplod(20014)= 0
triggerall = Time > 7
trigger1 = Root, stateno != var(3)
trigger2 = Root,MoveType = H

[State 19000, Hyper Combo Finish]
type = ChangeState
trigger1 = Root, WinKO && RoundState = 3
value = 19001

;---------------------------------------------------------------------------
; Hyper - Helper - Hyper Combo Finish
[Statedef 19001]
velset = 0, 0
ctrl = 0
sprpriority = 0

[State 19001, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 19001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = Invisible

[State 19001, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
id = 20014

[State 19001, HyperComboFinishBg]
type = Explod
trigger1 = !Time
anim = 20015
pos = -80, -290
id = 20015
sprpriority = -101
supermovetime = -1
postype = Left
bindtime = -1
removetime = 100
ownpal = 1
scale = 1,2
[State 19000, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 9, 0

[State 19000, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 9, 1
channel = 2

[State 19001, DestroySelf]
type = DestroySelf
trigger1 = !NumExplod(20015)
;--------------------------------------------
; Dizzy pt.1
[Statedef 970]
type    = A
movetype= H
physics = N
ctrl = 0
poweradd = 0
velset = -2,-15.5
sprpriority = 1

[State 971, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 7920
elem = 1

[State 970, 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

[State 970, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5000,2

[State 970, 2]
type = VelAdd
trigger1 = 1
y = 0.46

;This resets the dizzy counter back to zero
[State 970, 3]
type = VarSet
trigger1 = Time = 0
v = 35
value = 0

;This variable makes it so that you can't get re-dizzied
[State 970, 4]
type = VarSet
trigger1 = Time = 0
v = 37
value = 1

;This changes to the spiraling down anim once you start going down
[State 970, 5]
type = ChangeAnim
trigger1 = (Vel Y >= 0) && (Anim != 7921)
value = 7921

[State 970, 6]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 971
;---------------------------------------------------------------------------
; Dizzy pt.2
[Statedef 971]
type    = S
movetype= I
physics = S
ctrl = 0
poweradd = 0
velset = 0,0
sprpriority = 0

[State 971, 0]
type = Explod
trigger1 = Time = 0
anim = 9999
pos = 15,0
postype = p1
sprpriority = 2
ownpal = 1

[State 971, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 7921
elem = 1

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
value = F7, 2

[State 5110, 6]
type = PlaySnd
trigger1 = Animelem = 1
value = s5302, 0

[State 971, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 971, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 971, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 972
;---------------------------------------------------------------------------
; Dizzy pt.3
[Statedef 972]
type    = S
movetype= I
physics = S
ctrl = 0
poweradd = 0
anim = 5300
velset = 0,0
sprpriority = 0

[State 972, 0]
type = PlaySnd
trigger1 = Time = 14
value = S3366,0
volumescale = 100

[State 972, 0]
type = PlaySnd
trigger1 = Time = 34
value = S3366,1

[State 972, 1]
type = Explod
trigger1 = Time = 0
anim = 8196
id = 8196
postype = P1
pos = 18,8
ownpal = 1
sprpriority = 4
facing = -1
bindtime = -1
removetime = -1
removeongethit = 1
scale = .83,1

[State 972, 2]
type = RemoveExplod
trigger1 = Time = 150
id = 8196

[State 972, 3]
type = RemoveExplod
trigger1 = command = "undizzy"
id = 8196

[State 972, 4]
type = ChangeState
trigger1 = command = "undizzy"
value = 0
ctrl = 1

[State 972, 5]
type = ChangeState
trigger1 = Time = 155
value = 0
ctrl = 1
persistent = 0
;--------------------------------------------
;------------------------------------------
;------------------------------------------

;-----------------------------------------------------------------------------
[Statedef 3800]
type    = A
movetype= A
physics = N
juggle  = 1
;velset = 0,0
poweradd = 0
anim = 3800
ctrl = 0
sprpriority = 2

[State 3300, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3800

[State 3300, VelSet 1];Super Armor
type = VelSet
trigger1 = (Time = 0) && (PrevStateNo != 3950)
x = 0
y = 0


[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 3300, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(1) = 4
time = 58
pos = 8,-91
anim = S8201
sound = S100,14
poweradd = -2000
movetime = 58

[State 3300, Super Portrait Explod]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 9001
postype = Back
pos = -150,4
ownpal = 1
sprpriority = -2
supermovetime = 58
removeongethit = 1
bindtime = -1

[State 3300, AssertSpecial]
type = AssertSpecial
trigger1 = (AnimElemTime(2) >= 1) && (AnimElemTime(25) < 0)
flag = NoBarDisplay

[State 0, PosFreeze]
type = PosFreeze
trigger1 = (AnimElemTime(1) >= 0) && (AnimElemTime(4) < 0)




[State 3300, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(4) = 0
time = 50
length = 12
framegap = 5
palcolor = 0
palcontrast = 200,255,255
palpostbright = 100,100,200
palmul = 0.7,0.7,1
trans = add1


[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S276,4
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S276,4
volume = 255


[State 600, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 0, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8			;Time attacker pauses, time opponent shakes
sparkno = s8008
guard.sparkno=s910				;Spark anim no (Def: set above)
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = S100,38			;Sound to play on hit
guardsound = S100, 29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 12		;Time opponent is in hit state
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-7
p1stateno=3801
p2stateno=3805


[State 3300, RemoveExplod];remove Hadouken wave in fireball cancel
type = RemoveExplod
trigger1 = (Time = 0)

|| (PrevStateNo = 1020))
id = 8050

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 30
value = 40

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 11
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =



[State 3000, 7]
type = ChangeState
trigger1 = !AnimTime
value = 690
ctrl = 1
;-----------------------------------------------------------------------------
------
; Shining Gou Shock (Attacking)

[Statedef 3801]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3801
poweradd = 0
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = animelem = 5
x = -100

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = 35

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(5) = 100
value = S276,5
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(5) = 100
value = S276,5
volume = 255

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1





[State 3301, TargetBind]
type = TargetBind
trigger1 = Time = 0
pos = 42,0

[State 0, HitAdd]
type = HitAdd
trigger1 = animelem = 8
value = 1


[State 3301, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(8) = 0
value = -950

[State 3301, PlaySnd 1];Hyper Combo Finish FX
type = PlaySnd
trigger1 = (NumExplod(8220) != 0) && (RoundState = 3)
value = 46,1
persistent = 0
ignorehitpause = 1


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = (NumExplod(8220) != 0) && (RoundState = 3)
flag = nomusic

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1


[State 3301, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1

[State 0, TargetState]
type = TargetState
trigger1 = animelem = 8
value = 2030

[State 0, EnvColor]
type = EnvColor
trigger1 = animelem = 7
value = 255,255,255
time = 5

[State 0, EnvShake]
type = EnvShake
trigger1 = animelemtime (5) = 0
time = 50
freq = 160
phase = 190

[State 0, EnvShake]
type = EnvShake
trigger1 = animelemtime (5) = 100
time = 100
freq = 200
phase = 200

[State 0, EnvShake]
type = EnvShake
trigger1 = animelemtime (5) = 200
time = 200
freq = 300
phase = 400



[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 0
value = S100,47
volume = 255

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 100
value = S100,47
volume = 255

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 200
value = S100,47
volume = 255






[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S20,1
volume = 255

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S276,1
volume = 255

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S276,2
volume = 255



[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 10
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =




;---------------------------------------------------------------------
;-----------------
[Statedef 2030]
type = A
movetype = H
physics = N

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 2020

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 2031

[Statedef 2031]
type = A
movetype = H
physics = N
velset = 0,-14

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .4

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
------
; Shining Gou Shock (Custom GetHit Anim)

[Statedef 3805]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 3305, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 3805
persistent = 1

[State 3305, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = ifelse(Alive = 1,5120,5150)
ctrl = 0
;--------------------------------------------------------------------------

[Statedef 1550]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
sprpriority = -3
anim = 1234

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent =

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT       ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 1550
time = 1
forceair = 0
ignorehitpause = 1
;persistent =

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 10
;ignorehitpause =
;persistent =

[State 200, 1]
type = HitDef
trigger1 = Time = 0
attr = A, NP			;Attribute: Standing, Normal Attack
damage = 7, 3			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAFD			;Flags of conditions that move can hit
getpower = 0
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 20			;Time attacker pauses, time opponent shakes
sparkno = S8019			;Spark anim no (Def: set above)
guard.sparkno = s910
sparkxy = 0, -4		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s20,1	;Sound to play on hit
guardsound = s100,29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 14		;Time opponent is in hit state
guard.hittime  = 17
guard.ctrltime = 17
ground.velocity = -9		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 12
sprpriority = -3



[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 50



;------------------------------

[Statedef 1551]
type    = S
movetype= A
physics = S
ctrl = 0
sprpriority = -3
anim = 1231

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Random%5 = 0
value = 277,0
volume = 255
channel = 30

[State 0, StopSnd]
type = StopSnd
trigger1 = Time >= 7
channel = 30
ignorehitpause = 1
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent =

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT       ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 1550
time = 1
forceair = 0
ignorehitpause = 1
;persistent =

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 521, AngleSet]
type = AngleSet
trigger1 = Time = 0
value = -500

[State 521, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 521, AngleMul]
type = AngleAdd
trigger1 = Time > 0
value = -20

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .8

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = 19
y = -20
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 4
x = 6
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 20
;ignorehitpause =
;persistent =

;---------------------------------------------------------------------------
;-----------------------------------------------------------------------------
[Statedef 3600]
type    = A
movetype= A
physics = N
juggle  = 1
;velset = 0,0
poweradd = 0
anim = 3600
ctrl = 0
sprpriority = 2

[State 3300, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3600

[State 3300, VelSet 1];Super Armor
type = VelSet
trigger1 = (Time = 0) && (PrevStateNo != 3950)
x = 0
y = 0


[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 3300, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(1) = 4
time = 58
pos = 8,-91
anim = S8201
sound = S100,14
poweradd = -2000
movetime = 58

[State 3300, Super Portrait Explod]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 9001
postype = Back
pos = -150,4
ownpal = 1
sprpriority = -2
supermovetime = 58
removeongethit = 1
bindtime = -1

[State 3300, AssertSpecial]
type = AssertSpecial
trigger1 = (AnimElemTime(2) >= 1) && (AnimElemTime(25) < 0)
flag = NoBarDisplay

[State 0, PosFreeze]
type = PosFreeze
trigger1 = (AnimElemTime(1) >= 0) && (AnimElemTime(4) < 0)




[State 3300, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(4) = 0
time = 50
length = 12
framegap = 5
palcolor = 0
palcontrast = 200,255,255
palpostbright = 100,100,200
palmul = 0.7,0.7,1
trans = add1


[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S276,6
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S276,6
volume = 255



[State 3300, PlaySnd 2];warp sound
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 25,3
volume = 255

[State 3300, PlaySnd 3];warp sound
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 100,8
volume = 255


[State 3300, RemoveExplod];remove Hadouken wave in fireball cancel
type = RemoveExplod
trigger1 = (Time = 0)

|| (PrevStateNo = 1020))
id = 8050

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 30
value = 40


[State 3000, 7]
type = ChangeState
trigger1 = !AnimTime
value = 3610
ctrl = 0
;-----------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Soul Slash foward

[Statedef 3610]
type    = A
movetype= A
physics = N
velset = 100,-3
anim = 3610
ctrl = 0
sprpriority = 1

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 30
value = -1
ignorehitpause =1

[State 0, ChangeState]
type = ChangeState
trigger1 = !var(30)
value = 3620
ctrl = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = A, HA
animtype  = Medium
damage    = 42, 8
guardflag = MA
pausetime = 1,1
sparkno = s8008
sparkxy = 0,-70
hitsound   = S20,1
guardsound = S100,29
guard.sparkno = s910
ground.type = Hard
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -2.5,-6
air.velocity = 0,-5


[State 0, ChangeState]
type = ChangeState
trigger1 = FrontEdgeDist <=20
value = 3611
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;Soul Slash back

[Statedef 3611]
type    = A
movetype= A
physics = N
anim = 3610
ctrl = 0
sprpriority = 1

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 0, Turn]
type = Turn
trigger1 = !time

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 100
y = -3

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 30
value = -1
ignorehitpause =1


[State 0, ChangeState]
type = ChangeState
trigger1 = !var(30)
value = 3620
ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = IsHelper && !var(30)
;ignorehitpause =
;persistent =


[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1



[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = A, HA
animtype  = Medium
damage    = 42, 8
guardflag = MA
pausetime = 1,1
sparkno = s8008
sparkxy = 0,-70
hitsound   = S20,2
guardsound = S100,29
guard.sparkno = s910
ground.type = Hard
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = 0,-5




[State 0, ChangeState]
type = ChangeState
trigger1 = FrontEdgeDist <=20
value = 3610
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;Soul Slash Final

[Statedef 3620]
type    = A
movetype= A
physics = N
anim = 3610
ctrl = 0
sprpriority = 1

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 0, Turn]
type = null;Turn
trigger1 = !time

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 100
y = -3


[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1


[State 0, HitDef]
type = HitDef
trigger1 = !time
attr = A, HA
animtype  = Medium
damage    = 42, 8
guardflag = MA
pausetime = 10,10
sparkno = s8009
sparkxy = -15,-50
hitsound   = S20,2
guardsound = S100,29
guard.sparkno = s910
ground.type = Hard
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -3,12
air.fall = 1
fall.recovery = 0


[State 0, ChangeState]
type = ChangeState
trigger1 = MoveHit
trigger2 = time > 20
value = 50
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;-----------------------------------------------------------------------------
[Statedef 3400]
type    = S
movetype= A
physics = N
juggle  = 1
;velset = 0,0
poweradd = 0
anim = 3300
ctrl = 0
sprpriority = 2

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 7
helpertype = normal ;player
name = "umb"
ID = 1231
stateno = 1231
pos = 0,-200
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .3
size.yscale =.3



[State 3300, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3300

[State 3300, VelSet 1];Super Armor
type = VelSet
trigger1 = (Time = 0) && (PrevStateNo != 3950)
x = 0
y = 0


[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 3300, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(1) = 4
time = 58
pos = 8,-91
anim = S8201
sound = S100,14
poweradd = -1000
movetime = 58

[State 3300, Super Portrait Explod]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 9001
postype = Back
pos = -150,4
ownpal = 1
sprpriority = -2
supermovetime = 58
removeongethit = 1
bindtime = -1

[State 3300, AssertSpecial]
type = AssertSpecial
trigger1 = (AnimElemTime(2) >= 1) && (AnimElemTime(25) < 0)
flag = NoBarDisplay

[State 3300, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(4) = 0
time = 50
length = 12
framegap = 5
palcolor = 0
palcontrast = 200,255,255
palpostbright = 100,100,200
palmul = 0.7,0.7,1
trans = add1


[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S100,78
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S100,78
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = S276,0
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = S276,0
volume = 255



[State 3300, PlaySnd 2];warp sound
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 25,3
volume = 255

[State 3300, PlaySnd 3];warp sound
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 100,8
volume = 255


[State 3300, RemoveExplod];remove Hadouken wave in fireball cancel
type = RemoveExplod
trigger1 = (Time = 0)

|| (PrevStateNo = 1020))
id = 8050

[State 3300, ChangeState]
type = ChangeState
trigger1 = (AnimTime = 0) || (FrontEdgeBodyDist <= 0)
value = 0
ctrl = 1
;-----------------------------------------------------------------------------
;--------------------------------------------------------------------------
[Statedef 1231]
type = A
movetype= A
physics = N
ctrl = 0
velset = 17, -9
anim = 1231

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =



[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 521, AngleSet]
type = AngleSet
trigger1 = Time = 0
value = -500

[State 521, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 521, AngleMul]
type = AngleAdd
trigger1 = Time > 0
value = -13.5

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .7

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
value2 = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause =
;persistent =


[State 0, ChangeState]
type = ChangeState
trigger1 = (p2bodydist x) <= 1
value = 1502
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y > 0
value = 1504
ctrl = 0
;anim =
;ignorehitpause =
;persistent =


;--------------------------------------------------------------------------
;--------------------------------------------------------------------------

[Statedef 1502]
type = A
movetype= A
physics = A
ctrl = 0
anim = 1232
sprpriority = -2


[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 1
value = 0

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 1
range = -50,50


[State 0, Helper]
type = Helper
trigger1 = time = [9,140]
trigger1 = timemod = 2,0
helpertype = normal ;player
name = "nail"
ID = 1550
stateno = 1550
pos = var(1),50
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 99999
pausemovetime = 99999
size.xscale = .3
size.yscale = .3

[State 0, Helper]
type = Helper
trigger1 = time = [9,140]
trigger1 = timemod = 8,0
helpertype = normal ;player
name = "nail"
ID = 1550
stateno = 1550
pos = var(1),50
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 99999
pausemovetime = 99999
size.xscale = .3
size.yscale = .3

[State 0, Helper]
type = Helper
trigger1 = time = [9,140]
trigger1 = timemod = 4,0
helpertype = normal ;player
name = "nail"
ID = 1550
stateno = 1550
pos = var(1),50
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 99999
pausemovetime = 99999
size.xscale = .3
size.yscale = .3




[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
value2 = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = Time%2 = 0
x = 0
y = 1
;ignorehitpause =
;persistent =


[State 0, PosFreeze]
type = PosFreeze
trigger1 = Time <= 250
value = 1
;ignorehitpause =
;persistent =

[State 0, DestroySelf]
type = DestroySelf
trigger1 = pos y > 100
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = destroyself
trigger1 = Time = 100

;--------------------------------------------------------------------------
[Statedef 1233]
type = A
movetype= I
physics = A
ctrl = 0
anim = 1233


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
value2 = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y > 0
value = 1243
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

;--------------------------------------------------------------------------
;--------------------------------------------------------------------------

[Statedef 1243]
type = S
movetype= I
physics = S
velset = 10,-25
ctrl = 0
anim = 1231

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 521, AngleSet]
type = AngleSet
trigger1 = Time = 0
value = -500

[State 521, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 521, AngleMul]
type = AngleAdd
trigger1 = Time > 0
value = 2

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .8

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
value2 = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 0, DestroySelf]
type = DestroySelf
trigger1 = pos y > 100

;--------------------------------------------------------------------------
;--------------------------------------------------------------------------
;-----------------------------------------------------------------------------
[Statedef 3000]
type    = S
movetype= A
physics = N
juggle  = 1
;velset = 0,0
poweradd = 0
anim = 3000
ctrl = 0
sprpriority = 2

[State 3300, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3000

[State 3300, VelSet 1];Super Armor
type = VelSet
trigger1 = (Time = 0) && (PrevStateNo != 3950)
x = 0
y = 0


[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 3300, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(1) = 4
time = 58
pos = 8,-91
anim = S8201
sound = S100,14
poweradd = -1000
movetime = 58

[State 3300, Super Portrait Explod]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 9001
postype = Back
pos = -150,4
ownpal = 1
sprpriority = -2
supermovetime = 58
removeongethit = 1
bindtime = -1

[State 3300, AssertSpecial]
type = AssertSpecial
trigger1 = (AnimElemTime(2) >= 1) && (AnimElemTime(25) < 0)
flag = NoBarDisplay

[State 3300, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(4) = 0
time = 50
length = 12
framegap = 5
palcolor = 0
palcontrast = 200,255,255
palpostbright = 100,100,200
palmul = 0.7,0.7,1
trans = add1

[State 3300, HitDef]
type = HitDef
trigger1 = AnimElemTime(4)

!= 40)
getpower = 0
attr = S, HT
animtype = Medium
hitflag = M-
ground.type = High
priority = 2, Miss
sparkno = -1
sprpriority = 2
p1facing = 1
p2facing = 1
p1stateno = 3001
p2stateno = 3005
fall = 1
fall.recover = 0
numhits = 0

[State 3300, VelSet 1]
type = VelSet
trigger1 = AnimElemTime(9) = 0
x = 20

[State 3300, VelSet 2]
type = VelSet
trigger1 = (AnimTime = 0) || (FrontEdgeBodyDist <= 0)
x = 0

[State 3300, Width]
type = Width
trigger1 = FrontEdgeBodyDist <= 8
edge = 8,0

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S6000,40
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S6000,40
volume = 255



[State 3300, PlaySnd 2];warp sound
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 25,3
volume = 255

[State 3300, PlaySnd 3];warp sound
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 100,8
volume = 255


[State 3300, RemoveExplod];remove Hadouken wave in fireball cancel
type = RemoveExplod
trigger1 = (Time = 0)

|| (PrevStateNo = 1020))
id = 8050

[State 3300, ChangeState]
type = ChangeState
trigger1 = (AnimTime = 0) || (FrontEdgeBodyDist <= 0)
value = 0
ctrl = 1

;---------------------------------------------------------------------

------
; Shining Gou Shock (Attacking)

[Statedef 3001]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3001
poweradd = 0
sprpriority = 2

[State 0, HitAdd]
type = HitAdd
trigger1 =  animelem = 1
value = 1



[State 0, PlaySnd]
type = PlaySnd
trigger1 =animelem = 1
value = S20,9
volume = 255
channel = -1



[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S6000,44
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S6000,44
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S6000,44
volume = 255

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 8008
ID = 8008
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 1,1
ontop = 1

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1



[State 3301, TargetBind]
type = TargetBind
trigger1 = Time = 0
pos = 42,0

[State 3301, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(1) = 0
value = -50
kill = 0


[State 3301, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3002
ctrl = 0
;---------------------------------------------------------------------

------
; Shining Gou Shock (Attacking)

[Statedef 3002]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3002
poweradd = 0
sprpriority = 2

[State 0, HitAdd]
type = HitAdd
trigger1 =  animelem = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =animelem = 1
value = S20,9
volume = 255
channel = -1



[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 8008
ID = 8008
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 1,1
ontop = 1

[State 3301, TargetBind]
type = TargetBind
trigger1 = Time = 0
pos = 42,0

[State 3301, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(1) = 0
value = -50
kill = 0

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1


[State 3301, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3003
ctrl = 0

;---------------------------------------------------------------------

------
; Shining Gou Shock (Attacking)

[Statedef 3003]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3003
poweradd = 0
sprpriority = 2

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S6000,42
volume = 255

[State 3300, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S6000,42
volume = 255

[State 0, HitAdd]
type = HitAdd
trigger1 =  animelem = 2
value = 1

[State 0, HitAdd]
type = HitAdd
trigger1 =  animelem = 6
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =animelem = 2
value = S20,9
volume = 255
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =animelem = 6
value = S20,9
volume = 255
channel = -1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 8008
ID = 8008
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 1,1
ontop = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 8008
ID = 8008
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 1,1
ontop = 1

[State 3301, TargetBind]
type = TargetBind
trigger1 = Time = 0
pos = 42,0

[State 3301, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(2) = 0
value = -50
kill = 0

[State 3301, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(6) = 0
value = -50
kill = 0

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1


[State 3301, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3004
ctrl = 1



;---------------------------------------------------------------------

------
; Shining Gou Shock (Custom GetHit Anim)

[Statedef 3005]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 3305, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 3005
persistent = 1

[State 3305, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = ifelse(Alive = 1,5120,5150)
ctrl = 0
;----------------------------------------------------------------------------
;---------------------------------
;Shin Wall Press P2 STATE 2
[Statedef 3704]
type = A
movetype= H
physics = N
ctrl = 0
poweradd = 80
sprpriority = 2

[State 3704]
type=Turn
trigger1=Time=15

[State 3704]
type = ChangeAnim2
trigger1 = time = 0
value = 3704

[State 3704]
type = AfterImage
trigger1 = Time <= 0
Trans=Add1
PalContrast=128,128,128
PalMul=0.9,0.9,0.9
framegap=4
length=10
time=3

[State 3704]
type = AfterImageTime
trigger1 = 1
ignorehitpause = 1
time = 2

[State 3704]
type = ScreenBound
trigger1 = Alive
value = 0

;---------------------------------
;Shin Wall Press P2 Hit Wall
[Statedef 3705]
type = A
movetype = H
physics = N
velset = 0,0
SprPriority = 3



[State 3705]
type = ChangeAnim2
trigger1 = Time = 0
value = 3705

[State 3705]
type=PosAdd
trigger1=Time=0
x=-40

[State 3705]
type = PosFreeze
trigger1 = 1

[State 3705]
type = ChangeState
trigger1 = AnimTime = 0
value = 3706
;---------------------------------
;Shin Wall Press P2 goes up from wall hit
[Statedef 3706]
type = A
movetype = H
physics = N
sprpriority = 2

[State 3706]
type = PlaySnd
trigger1 = Time = 0
value = F7,2

[State 3706]
type = ChangeAnim2
trigger1 = time = 0
value = 3706

[State 3706]
type = ScreenBound
trigger1 = time >=0
value = 0

[State 3706]
type = PosAdd
trigger1 = time = 0
y=50

[State 3706]
type = Velset
trigger1 = time = 0
x = .5
y = -4

[State 3706]
type = Gravity
trigger1 = 1

[State 3706]
type=selfstate
triggerall=vel y>0&&alive&&canrecover
trigger1=command="recovery"
value=ifelse((pos y>=-20),5200,5210)

[State 3706]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
;----------------------------------------------------------------------------------------------
;Wall Press
[Statedef 3004]
type=S
movetype=A
physics=S
anim=3700
poweradd=50
ctrl=0
velset=0,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 1400]
type=PosAdd
triggerall=time=0
trigger1=prevstateno=[200,455]
trigger1=p2movetype=H
x=15

[State 1400]
type=PlaySnd
trigger1=time=8
value=S100,34

[State 1400]
type=nothitby
trigger1=Time=0
time=4
value=SCA,NA,SA,HA

[State 1400]
type=VelSet
trigger1=Time>=0
x=7
y=0

[State 1400]
type=playerpush
trigger1=1
value=0
ignorehitpause=1

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 1400]
type=HitDef
trigger1=time=0
attr=S,HT
hitflag=MAFD
guardflag=MA
damage=0
getpower=0
givepower=40
priority=7,Hit
pausetime=0,10
snap = -30, -60, 0
sparkno=S7014
guard.sparkno=S7018
sparkxy=-10,-65
hitsound=S2,10
guardsound=s0,17
p1facing=1
p2facing=1
p1stateno=1401
p2stateno=1402
fall=1
fall.damage=0
kill=0
fall.kill=1

[State 1400]
type=ChangeState
triggerall=time>=30
trigger1=p2bodydist x<=-100
trigger2=Frontedgebodydist<=0
value=1404
ctrl=0

;---------------------------------
;Wall Press P1 state
[Statedef 1401]
type=S
movetype=A
physics=N
anim=3701
ctrl=0
velset=0,0
juggle=0

[State 1401]
type=PlaySnd
triggerall=anim=3701
trigger1 = Frontedgebodydist <= 10
value=S20,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = TIME = 0
value = S23,0
volume = 0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = TIME = 0
value = S6000,43
volume = 0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = TIME = 0
value = S6000,43
volume = 0
channel = -1

[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1



[State 1401]
type=VelSet
trigger1=Time=3
x=31
y=0

[State 1401]
type = TargetBind
trigger1 = AnimElem = 1
pos = -30, -60

[State 1401]
type = SprPriority
trigger1 = AnimElem = 1
value = 0

[State 1401]
type = TargetBind
trigger1 = AnimElem = 2
pos = -30, -60

[State 1401]
type = SprPriority
trigger1 = AnimElem = 2
value = 0

[State 1401]
type = TargetBind
trigger1 = AnimElem = 3
pos = -25, -70

[State 1401]
type = TargetBind
trigger1 = AnimElem = 4
pos = -25, -70

[State 1401]
type = TargetState
trigger1 = Frontedgebodydist <= 0
value = 3705



[State 1401]
type = TargetLifeAdd
triggerall=anim=3701
trigger1=Frontedgebodydist<=0
value=-140
kill=1
persistent=0

[State 1401]
type=ChangeState
triggerall=time>=10
trigger1=Frontedgebodydist<=0
value=1403
ctrl=0

;---------------------------------
;Wall Press P2 STATE
[Statedef 1402]
type = A
movetype= H
physics = N
ctrl = 0
poweradd = 80
sprpriority = 2


[State 1402]
type = ChangeAnim2
trigger1 = time = 0
value = 3702

[State 1402]
type = ScreenBound
trigger1 = Alive
value = 0

;---------------------------------
;Wall Press End
[Statedef 1403]
type=S
movetype=A
physics=N
anim=1403
ctrl=0
juggle=10
sprpriority=3


[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 1403]
type = TargetBind
trigger1 = AnimElem = 1
pos = 30, -75

[State 1403]
type=Playsnd
;triggerall=prevstateno=3703
trigger1=Time=0
value=2,23

[State 1403]
type=PosAdd
trigger1=time=0
x=-70

[State 1403]
type=Velset
trigger1=animelem=1
trigger2=animelem=10
x=0
y=0

[State 1403]
type=Velset
trigger1=animelem=5
x=-5
y=0

[State 1403]
type=Velset
trigger1=animelem=9
x=-.83
y=0

[State 1403]
type=HitAdd
triggerall=prevstateno=3703
trigger1=Time=0
value=1

[State 1403]
type=EnvShake
trigger1=time=0
time=25
ampl=-8
freq=150
phase=1

[State 1403]
type=null;Explod
Anim=7016
trigger1=time=0
postype=P1
pos=85,0
removetime=15
removeongethit=1
bindTime=15
sprpriority=4
scale=.8,.8
ownpal = 1

[State 1403]
type=Explod
Anim=7076
trigger1=time=0
postype=P1
pos=58,-80
removeongethit=1
bindTime=10
sprpriority=4
scale=1.2,1.2
ownpal = 1

[State 1403]
type=ChangeState
triggerall=var(20)=20
triggerall=p2movetype=A
triggerall=P2life!=0
trigger1=time>=10
value=ifelse(random>=500,1601,67)
ctrl=0

[State 1403]
type=ChangeState
trigger1=AnimTime=0
value=0
ctrl=1



;---------------------------------
;Wall Press Miss
[Statedef 1404]
type=S
movetype=I
physics=N
anim=1404
ctrl=0

[State 1404]
type=Velset
trigger1=time<=6
x=.83
y=0

[State 1404]
type=Velset
trigger1=time>6
x=0
y=0

[State 1404]
type=null;PosAdd
trigger1=time=0
x=-70

[State 1404]
type=ChangeState
trigger1=AnimTime=0
value=0
ctrl=1

;-----------------------------------------------------------------------------
[Statedef 3500]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
poweradd = 0
;anim = 3500
ctrl = 0
sprpriority = 2

[State 30055, Wave Explod 1]
type = Explod
trigger1 = AnimElemTime(30) = 2
anim = 3240
id = 3240
pos = (42 + Var(11)),(-48 + Var(12))
sprpriority = ifelse(Var(13) >= 500,3,1)
ownpal = 1
supermovetime = 17


[State 30055, VarRandom]
type =  VarRandom
trigger1 = 1
v = 19
range = 0,4

[State 30055, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3500

[State 30055, Super Charge Explod]
type = Explod
trigger1 = AnimElemTime(4) = 0
anim = 8200
postype = Front
facing = ifelse(Facing = 1,1,-1)
pos = ifelse(Facing = 1,-126,126),222
ownpal = 1
sprpriority = 5
supermovetime = 58

[State 1100, Electricity Explod]
type = Explod
trigger1 = (ProjHit(3241) = 1) && (NumExplod(8110) < 2)
anim = 8110 + Var(19)
ID = 8110
postype = P2
pos = 0,-50
random = 50,50
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = ifelse(Random > 600, 2,-1)


[State 30055, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(5) = 0
attr = a,HA
time = 80
length = 12
framegap = 5
palcolor = 0
palcontrast = 200,255,255
palpostbright = 100,100,200
palmul = 0.7,0.7,1
trans = add1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,14
volume = 255
channel = -1

[State 30055, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(2) = 0
time = 58
pos = 16,-46
anim = S8201
sound = S10,4
poweradd = -1000
movetime = 58

[State 30055, Super Portrait Explod]
type = Explod
trigger1 = AnimElemTime(4) = 0
anim = 9001
postype = Back
pos = -150,4
ownpal = 1
sprpriority = -2
supermovetime = 58
removeongethit = 1
bindtime = -1

[State 30055, AssertSpecial]
type = AssertSpecial
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(26) < 0)
flag = NoBarDisplay

[State 30055, Super Background Top]
type = Explod
trigger1 = (RoundState = 3) && (NumExplod(8210) < 1) && (P2Life <= 0) && (Alive = 1) && (MoveHit = 1)
ID = 8210
anim = 8210
postype = Back
pos = 160,120
sprpriority = -5
ownpal = 1
ignorehitpause = 1
bindtime = -1
removetime = -1

[State 30055, Super Background Bottom]
type = Explod
trigger1 = (RoundState = 3) && (NumExplod(8211) < 1) && (P2Life <= 0) && (Alive = 1) && (MoveHit = 1)
ID = 8211
anim = 8210
postype = Back
pos = 160,119
vfacing = -1
sprpriority = -5
ownpal = 1
ignorehitpause = 1
bindtime = -1
removetime = -1

[State 30055, Helper];moves the camera
type = Helper
trigger1 = (ProjHit1100 = 1) && (Var(16) = 1) && (NumHelper(640) = 0)
name = "Camera Move"
id = 640
postype = p2
pos = 0,0
stateno = 640

[State 30055, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 30055, VelMul 1]
type = VelMul
trigger1 = Time = 0
x = 0.13

[State 30055, VelMul 2]
type = VelMul
trigger1 = (Time = 0) && (PrevStateNo = 690) && (Vel Y != [0.001,0.25])
trigger2 = (Time = 0) && (PrevStateNo != 690)
y = 0.12

[State 30055, VelSet 1]
type = VelSet
trigger1 = (PrevStateNo = 690) && (Vel Y = [0.001,0.25])
y = 0.25

[State 30055sssss, VelSet 2]
type = VelSet
trigger1 = Pos Y >= 0
y = 0

[State 3200, Projectile 1]
type = Projectile
trigger1 = AnimElem = 7
guard.sparkno=s910
projid = 1101
projanim = 1101
projhitanim = 8008
projhits = 2
velocity = 8,10
projsprpriority = ifelse(Var(13) >= 500,3,1)
projheightbound = -240,40
postype = P1
offset = 40,-50
attr = A,HP
damage = 50,10
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 2,8
sparkno = S8008
sparkxy = 0,0
hitsound = S20,4
guardsound = S100, 29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,11
guard.velocity = -9
airguard.velocity = -5,0
air.type = Low
air.velocity = -8,11
yaccel = 0.5
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = 0.1
supermovetime = 4
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10


[State 3200, Projectile 1]
type = Projectile
trigger1 = AnimElem = 7
guard.sparkno=s910
projid = 1101
projanim = 1101
projhitanim = 8008
projhits = 2
velocity = 8,5
projsprpriority = ifelse(Var(13) >= 500,3,1)
projheightbound = -240,40
postype = P1
offset = 40,-50
attr = A,HP
damage = 50,10
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 2,8
sparkno = S8008
sparkxy = 0,0
hitsound = S20,4
guardsound = S100, 29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,11
guard.velocity = -9
airguard.velocity = -5,0
air.type = Low
air.velocity = -8,11
yaccel = 0.5
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = 0.1
supermovetime = 4
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10

[State 3200, Projectile 1]
type = Projectile
trigger1 = AnimElem = 7
guard.sparkno=s910
projid = 1101
projanim = 1101
projhitanim = 8008
projhits = 2
velocity = 8,17
projsprpriority = ifelse(Var(13) >= 500,3,1)
projheightbound = -240,40
postype = P1
offset = 40,-50
attr = A,HP
damage = 50,10
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 2,8
sparkno = S8008
sparkxy = 0,0
hitsound = S20,4
guardsound = S100, 29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,11
guard.velocity = -9
airguard.velocity = -5,0
air.type = Low
air.velocity = -8,11
yaccel = 0.5
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = 0.1
supermovetime = 4
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10

[State 3200, Projectile 1]
type = Projectile
trigger1 = AnimElem = 15
guard.sparkno=s910
projid = 1101
projanim = 1101
projhitanim = 8008
projhits = 2
velocity = 8,5
projsprpriority = ifelse(Var(13) >= 500,3,1)
projheightbound = -240,40
postype = P1
offset = 40,-50
attr = A,HP
damage = 20,10
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 2,8
sparkno = S8008
sparkxy = 0,0
hitsound = S20,4
guardsound = S100, 29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,11
guard.velocity = -9
airguard.velocity = -5,0
air.type = Low
air.velocity = -8,11
yaccel = 0.5
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = 0.1
supermovetime = 4
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10

[State 3200, Projectile 1]
type = Projectile
trigger1 = AnimElem = 15
guard.sparkno=s910
projid = 1101
projanim = 1101
projhitanim = 8008
projhits = 2
velocity = 8,17
projsprpriority = ifelse(Var(13) >= 500,3,1)
projheightbound = -240,40
postype = P1
offset = 40,-50
attr = A,HP
damage = 20,10
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 2,8
sparkno = S8008
sparkxy = 0,0
hitsound = S20,4
guardsound = S100, 29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,11
guard.velocity = -9
airguard.velocity = -5,0
air.type = Low
air.velocity = -8,11
yaccel = 0.5
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = 0.1
supermovetime = 4
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10

[State 3200, Projectile 1]
type = Projectile
trigger1 = AnimElem = 15
guard.sparkno=s910
projid = 1101
projanim = 1101
projhitanim = 8008
projhits = 2
velocity = 8,10
projsprpriority = ifelse(Var(13) >= 500,3,1)
projheightbound = -240,40
postype = P1
offset = 40,-50
attr = A,HP
damage = 20,10
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 2,8
sparkno = S8008
sparkxy = 0,0
hitsound = S20,4
guardsound = S100, 29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,11
guard.velocity = -9
airguard.velocity = -5,0
air.type = Low
air.velocity = -8,11
yaccel = 0.5
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = 0.1
supermovetime = 4
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10

[State 3200, Projectile 1]
type = Projectile
trigger1 = AnimElem = 23
guard.sparkno=s910
projid = 1101
projanim = 1101
projhitanim = 8008
projhits = 2
velocity = 8,5
projsprpriority = ifelse(Var(13) >= 500,3,1)
projheightbound = -240,40
postype = P1
offset = 40,-50
attr = A,HP
damage = 20,10
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 2,8
sparkno = S8008
sparkxy = 0,0
hitsound = S20,4
guardsound = S100, 29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,11
guard.velocity = -9
airguard.velocity = -5,0
air.type = Low
air.velocity = -8,11
yaccel = 0.5
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = 0.1
supermovetime = 4
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10

[State 3200, Projectile 1]
type = Projectile
trigger1 = AnimElem = 23
guard.sparkno=s910
projid = 1101
projanim = 1101
projhitanim = 8008
projhits = 2
velocity = 8,10
projsprpriority = ifelse(Var(13) >= 500,3,1)
projheightbound = -240,40
postype = P1
offset = 40,-50
attr = A,HP
damage = 20,10
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 2,8
sparkno = S8008
sparkxy = 0,0
hitsound = S20,4
guardsound = S100, 29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,11
guard.velocity = -9
airguard.velocity = -5,0
air.type = Low
air.velocity = -8,11
yaccel = 0.5
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = 0.1
supermovetime = 4
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10

[State 3200, Projectile 1]
type = Projectile
trigger1 = AnimElem = 23
guard.sparkno=s910
projid = 1101
projanim = 1101
projhitanim = 8008
projhits = 2
velocity = 8,17
projsprpriority = ifelse(Var(13) >= 500,3,1)
projheightbound = -240,40
postype = P1
offset = 40,-50
attr = A,HP
damage = 20,10
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 2,8
sparkno = S8008
sparkxy = 0,0
hitsound = S20,4
guardsound = S100, 29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,11
guard.velocity = -9
airguard.velocity = -5,0
air.type = Low
air.velocity = -8,11
yaccel = 0.5
fall = 1
fall.recover = 0
fall.xvelocity = 0
fall.yvelocity = 0.1
supermovetime = 4
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10




[State 30055, VelSet]
type = VelSet
trigger1 = AnimElem = 25||animelem =26
x = -0.2
y = -0.2

[State 30055, PlaySnd]
type = PlaySnd
trigger1 = animelem =6
value = S100,77
volume = 255
channel = -1

[State 30055, PlaySnd]
type = PlaySnd
trigger1 = animelem= 2
value = S100,78
volume = 255
channel = -1

[State 30055, PlaySnd]
type = PlaySnd
trigger1 = animelem= 2
value = S100,78
volume = 255
channel = -1


[State 30055, PlaySnd 1];Hyper Combo Finish FX
type = PlaySnd
trigger1 = (NumExplod(8210) != 0) && (RoundState = 3)
value = 46,1
persistent = 0
ignorehitpause = 1

[State 30055, PlaySnd 2];"Hyper Combo Finish"
type = PlaySnd
trigger1 = (NumExplod(8210) != 0) && (RoundState = 3)
value = 46,0
persistent = 0
ignorehitpause = 1


[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1

[State 1100, CtrlSet]
type = CtrlSet
trigger1 = animelem = 32
value = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 32
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N



[State 30055, end]
type = ChangeState
trigger1 = animtime = 0
value = 690
ctrl = 1

;----------------------------------------------------------------------------
;===============================================================================================
;                                         PARRY STATES
;===============================================================================================
;This block of code is edited from Mr. Fong so give him credit for his work
;Standing Parry
[Statedef 4000]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
anim = 4000
facep2 = 1
sprpriority = 2

[State 4000, Effect]
type =null; BGpalfx
trigger1 = time = 0
add = 256, 256, 256
sinadd = 256 ,256, 256, -28
color = 256
time = 7
ignorehitpause = 1

[State 4000, 1]
type = posset
trigger1 = 1
y = 0

[State 4000, 1]
type = PowerAdd
trigger1 = time = 0
value = 100

[State 4000, 2]
type=pause
trigger1=!time
time=15
movetime=15

[State 4000, 3]
type = HitBy
trigger1=time=[0,10]
time=1
value=SCA,AT

[State 4000, 3a]
type=posfreeze
trigger1=time=[0,10]
value=1

[State 4000, 4]
type = PalFX
trigger1 = time = 0
add = 80, 80, 255
sinadd= -80 ,-80, -255, 60
time = 10

[State 4000, 5]
type = Playsnd
trigger1 = Time = 0
value = 2,13

[State 4000, 6]
type = Playsnd
trigger1 = Time = 1
value = 0,20

[State 4000]
type=explod
triggerall=var(18)=1
trigger1=Time=1
anim=4000
ID=4000
sprpriority=5
postype=p1
pos=60,-82
pausemovetime=60
ownpal=1
scale=.5,.5

[State 4000, 7]
type=explod
triggerall=!var(18)=1
trigger1=Time=1
anim = 7030
pos = 60,-82
postype = p1
facing = 1
sprpriority = 4
bindtime = -1
pausemovetime = 60
ignorehitpause = 1
ownpal = 1

[State 4000, debug]
type = assertspecial
trigger1 = time <= 11
flag = nowalk
flag2 = nostandguard
flag3 = nocrouchguard

[State 4000, CtrlSet]
type = CtrlSet
trigger1 = animelem = 4,=0
value = 1

[State 4000, 4]
type = ChangeState
triggerall = command = "holdback"
triggerall = inguarddist
trigger1 = animelem = 4,=0
value = 120

[State 4000, 4]
type = ChangeState
triggerall=var(20)=20
triggerall=p2bodydist X=[-20,20]
triggerall=P2life!=0
trigger1=animelem=4,=0
value = 120

[State 4000, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1










































;---------------------------------------------------------------------------
;Crouching Parry
[Statedef 701]
type    = C
movetype = I
physics = C
ctrl = 0
velset = 0,0
anim = 701
facep2 = 1
sprpriority = 2

[State 4010, Effect]
type =null; BGpalfx
trigger1 = time = 0
add = 256, 256, 256
sinadd = 256 ,256, 256, -28
color = 256
time = 7
ignorehitpause = 1

[State 4010, 1]
type = posset
trigger1 = 1
y = 0

[State 4010, 1]
type = PowerAdd
trigger1 = time = 0
value = 100

[State 4010, 2]
type=pause
trigger1=!time
time=15
movetime=15

[State 4010, 3]
type = HitBy
trigger1=time=[0,10]
time=1
value=SCA,AT

[State 4010, 3]
type=posfreeze
trigger1=time<=10
value=1

[State 4010, 4]
type = PalFX
trigger1 = time = 0
add = 80, 80, 255
sinadd= -80 ,-80, -255, 60
time = 15

[State 4010, 5]
type = Playsnd
trigger1 = Time = 0
value = 2,13

[State 4010, 6]
type = Playsnd
trigger1 = Time = 1
value = 0,20

[State 4010]
type=explod
triggerall=var(18)=1
trigger1=Time=1
anim=4000
ID=4000
sprpriority=4
postype=p1
pos=60,-52
pausemovetime=60
ownpal=1
scale=.5,.5

[State 4010, 7]
type = explod
triggerall=!var(18)=1
trigger1=Time=1
anim = 7030
pos = 60,-52
postype = p1
facing = 1
sprpriority = 4
bindtime = -1
pausemovetime = 60
ignorehitpause = 1
ownpal = 1

[State 4010, debug]
type = assertspecial
trigger1 = time <= 11
flag = nowalk
flag2 = nostandguard
flag3 = nocrouchguard

[State 4010, 4]
type=ChangeState
triggerall=var(20)=20
triggerall=p2bodydist X=[-20,50]
triggerall=time=[8,11]
trigger1=P2life!=0
value= 131

[State 4010, 4]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1





































;---------------------------------------------------------------------------
;Aerial Parry
[Statedef 4200]
type    = A
movetype = I
physics = A
ctrl = 0
anim = 4200
facep2 = 1
sprpriority = 2

[State 4020, Effect]
type =null; BGpalfx
trigger1 = time = 0
add = 256, 256, 256
sinadd = 256 ,256, 256, -28
color = 256
time = 7
ignorehitpause = 1

[State 4020, Debug]
type =null; Turn
trigger1 = time = 0
trigger1 = p2bodydist x < 0

[State 4020]
type=statetypeset
trigger1=time<=10
physics=N

[State 4020, 3]
type = HitBy
trigger1=time=[0,10]
time=1
value=SCA,AT

[State 4020, 3]
type=posfreeze
trigger1=time<=10
value=1

[State 4020]
type=statetypeset
trigger1=time>10
physics=A

[State 4020, 1]
type = PowerAdd
trigger1 = time = 0
value = 100

[State 4020, 2]
type=pause
trigger1=!time
time=15
movetime=15

[State 4020, 4]
type = PalFX
trigger1 = time = 0
add = 80, 80, 255
sinadd= -80 ,-80, -255, 60
time = 15

[State 4020, 5]
type = Playsnd
trigger1 = Time = 0
value = 2,13

[State 4020, 6]
type = Playsnd
trigger1 = Time = 1
value = 0,20

[State 4020]
type=explod
triggerall=var(18)=1
trigger1=Time=1
anim=4000
ID=4000
sprpriority=5
postype=p1
pos=55,-57
pausemovetime=60
ownpal=1
scale=.5,.5

[State 4020, 7]
type = explod
triggerall=!var(18)=1
trigger1=Time=1
anim = 7030
pos = 55,-57
postype = p1
facing = 1
sprpriority = 4
bindtime = -1
pausemovetime = 60
ignorehitpause = 1
ownpal = 1

[State 4020, debug]
type = assertspecial
trigger1 = time <= 11
flag = noairguard

[State 4020, 4]
type=ChangeState
triggerall=var(20)=20
triggerall=p2bodydist X =[-20,20]
triggerall=P2life!=0
trigger1=time>=8
value=132
ctrl=0

[State 4020, 4]
type = CtrlSet
trigger1 = animelem = 3,=0
value = 1

[State 4020, 4]
type = ChangeState
triggerall = command = "holdback"
triggerall = inguarddist
trigger1 = animelem = 3,=0
value = 120

[State 4020, 4]
type = ChangeState
trigger1 = animtime = 0
value = 4030

;---------------------------------------------------------------------------
;Aerial Parry Debug
[Statedef 4030]
type    = A
physics = N
ctrl = 1

[State 4030, 1]
type = VelSet
trigger1 = Time = 0
y = -.5

[State 4030, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 41

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
persistent = 0
value = Anim + 3

[State 4030, 4]
type = VelAdd
trigger1 = Time >= 0
y = .4

[State 4030, ChangeState]
type = ChangeState
trigger1 = Pos Y > 0
value = 52

;---------------------------------------------------------------------------
[Statedef 1203]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 1				;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 1203				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 200, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 23, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 5, 8			;Time attacker pauses, time opponent shakes
sparkno = s8008
guard.sparkno=s910		;Spark anim no (Def: set above)
sparkxy = -10, -76		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = S100,38			;Sound to play on hit
guardsound = S100, 29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 12		;Time opponent is in hit state
ground.velocity = 18		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 12			;Time before opponent regains control in air
p2stateno = 5000

[State 200, 5]
type = ChangeState
trigger1 = movehit
value = 1206
ctrl = 0


[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S12,8
volume = 255
channel = -1
;----------------------------------------------------
[Statedef 1206]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 1				;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 1206				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 1
pos = 20,0
;ignorehitpause =
;persistent =


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 9
time = 1
pos = 40,0
;ignorehitpause =
;persistent =






[State 0, PosSet]
type = PosSet
trigger1 = animelem = 8
y = -200
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = PosSet
trigger1 = animelem = 15
y = -300
;ignorehitpause =
;persistent =


[State 200, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 23, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8			;Time attacker pauses, time opponent shakes
sparkno = s8008
guard.sparkno=s910		;Spark anim no (Def: set above)
sparkxy = -10, -76		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = S100,38			;Sound to play on hit
guardsound = S100, 29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 12		;Time opponent is in hit state
ground.velocity = 0, -15		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0, -15		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 12			;Time before opponent regains control in air
fall = 1
fall.recover = 0
air.fall = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 12
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 40, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8			;Time attacker pauses, time opponent shakes
sparkno = s8008
guard.sparkno=s910		;Spark anim no (Def: set above)
sparkxy = -10, -76		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = S100,40			;Sound to play on hit
guardsound = S100, 29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 12		;Time opponent is in hit state
ground.velocity = 0, -11		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0, -11		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 12			;Time before opponent regains control in air
fall = 1
fall.recover = 0
air.fall = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 22
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 70, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8			;Time attacker pauses, time opponent shakes
sparkno = s8008
guard.sparkno=s910		;Spark anim no (Def: set above)
sparkxy = -10, -76		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = S100,42			;Sound to play on hit
guardsound = S100, 29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 12		;Time opponent is in hit state
ground.velocity = 0, 40		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0, 40		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 12			;Time before opponent regains control in air
fall = 1
fall.recover = 0
air.fall = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 26
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =



[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6000,60
volume = 255
channel = -1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6000,60
volume = 255
channel = -1
;---------------------------------------------------------------------------
;Guard Push (Stand)
[Statedef 160]
type    = S
movetype= I
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
anim = 160
sprpriority = 2

[State 6300, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6300, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6300, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6300, a4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 20

[State 6300, a5]
type = Helper
trigger1 = animelem = 2;Time = 0
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 7020
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6300, a6]
type = Explod
trigger1 = animelem = 2
anim = 7020
postype = p1
pos = 45,-70
ownpal = 1
vel = 0,0
scale = 0.5,0.5
ignorehitpause = 1
sprpriority = 7

[State 6300, a7]
type = PlaySnd
trigger1 = Time = 0
value = 0,5
volume = 255
channel = 1

[State 6300, a8]
type = PlaySnd
trigger1 = Time = 0
value = 3,0
channel = 0

[State 6300, a9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 161];--------------crouch
type    = C
movetype= I
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
anim = 161
sprpriority = 2

[State 6310, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6310, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6310, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6310, a4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 6310, a5]
type = Helper
trigger1 = animelem = 2;Time = 0
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 7020
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6310, a6]
type = Explod
trigger1 = animelem = 2
anim = 7020
postype = p1
pos = 33,-30
ownpal = 1
vel = 0,0
scale = 0.5,0.5
ignorehitpause = 1
sprpriority = 7

[State 6300, a7]
type = PlaySnd
trigger1 = Time = 0
value = 0,5
volume = 255
channel = 1

[State 6300, a8]
type = PlaySnd
trigger1 = Time = 0
value = 3,0
channel = 0
[State 6310, a9]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


[Statedef 162];------------air
type    = A
movetype= I
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
anim = 162
sprpriority = 2

[State 6320, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6320, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6320, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6320, a4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 6320, a5]
type = Helper
trigger1 = animelem = 2;Time = 0
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 7020
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6320, a6]
type = Explod
trigger1 = animelem = 2
anim = 7020
postype = p1
pos = 33,-57
ownpal = 1
scale = 0.5,0.5
vel = 0,0
ignorehitpause = 1
sprpriority = 7

[State 6300, a7]
type = PlaySnd
trigger1 = Time = 0
value = 0,5
volume = 255
channel = 1

[State 6300, a8]
type = PlaySnd
trigger1 = Time = 0
value = 3,0
channel = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 6320, a9]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1

;----------------------------------------------------------------
;guard push helper
[Statedef 7020]
type    = S
movetype= I
physics = N
poweradd= 0
ctrl = 0
anim = 7025
sprpriority = -4

[State 6350, a1]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 6350, a2]
type = VelSet
trigger1 = Time = [0,10]
x = 30

[State 6350, a3]
type = VelSet
trigger1 = Time = [11,13]
x = 20

[State 6350, a4]
type = VelSet
trigger1 = Time >= 14
x = 10

[State 6350, a5]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 6350, a6]
type = DestroySelf
trigger1 = Time >= 18
;--------------------------------------------
;---------------------------------------------------------------------------
; air dash
[Statedef 107]
type    = A
physics = A
movetype = I
anim = 107
sprpriority = 1
ctrl=0

[State 3000, carga]
type=helper
trigger1=time = 0
helpertype=normal
stateno=7093
ID=7093
name="fx"
postype=p1
pos = -18,-70
ownpal=1
persistent=0
supermovetime=9999
size.xscale = 0.35
size.yscale = 0.33

[State 100, 1]
type = VelSet
trigger1 = time <=20
x = const(velocity.run.fwd.x)
y=0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 17
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =



;==========airdash fx-----------------------------------
[Statedef 7093]
type=A
physics=N
movetype=I
anim=7092
ctrl=0
velset=0,0
poweradd=0
sprpriority=0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1100,2
volume = 0
channel = -1
freqmul = 2

[State 0, Explod]
type = Explod
trigger1 = ((GameTime%3) = 1) && time <=15;ifelse(var(10)=2,(GameTime%1),(GameTime%7)) = 1
anim = 3793
ID = 3793
pos = 50,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 6,0;(ifelse(parent,var(10) = 2,5,ifelse(parent,var(10) = 1,5.8,4)))-2,0
accel = 0,0
random = 0,60
removetime = 12
supermove = 99999
pausemovetime = 99999
scale = .5,.3
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 0-(time*20),0-(time*20),0-(time*20)
;mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause =
;persistent =

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >=30
trigger2 = parent,movetype = H
;ignorehitpause =
;persistent =
;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70000]
type    = A
physics = S
anim = 1025
sprpriority = 1

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =


[State 101, Explod]
type = Explod
trigger1 = Time = 0
anim = 15000
ID = 15000
pos = 40,-310
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = -19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent =

[State 101, Explod]
type = Explod
trigger1 = Time = 0
anim = 15000
ID = 15000
pos = 40,-390
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = -19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent =

[State 101, Explod]
type = Explod
trigger1 = Time = 0
anim = 15000
ID = 15000
pos = 40,-230
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = -19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent =


[State 101, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 15
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 15
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 15
y = 0
;ignorehitpause =
;persistent =

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 10
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = Time >= 25
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =


;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70001]
type    = A
physics = A
anim = 1026
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =



;---------------------------------------------------------------------------
; Jump Up
[Statedef 70010]
type    = A
physics = A
anim = 1036

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [900,915]
x = 0
y = 0
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = -10
;ignorehitpause =
;persistent =

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 4
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = Time >= 25
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =



;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70015]
type    = A
physics = S
anim = 1027
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 17     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [900,915]
x = 0
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = Time = 0
x = 7 ;50
y = -10 ;-38
;ignorehitpause =
;persistent =

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 4
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 15
x = 0
y = 0
;ignorehitpause =
;persistent =



[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = Time >= 25
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =



;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70016]
type    = A
physics = A
anim = 1028
velset = 3,0
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =



;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70020]
type    = A
physics = A
anim = 1029
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 19     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [900,915]
x = 0
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = Time = 0
x = 7 ;50
y = 10
;ignorehitpause =
;persistent =

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 8
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1
;anim =
;ignorehitpause =
;persistent =

;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70021]
type    = A
physics = A
anim = 1030
velset = 3,0
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =



;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70025]
type    = A
physics = A
anim = 1031
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 21     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [900,915]
x = 0
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 10
;ignorehitpause =
;persistent =

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 8
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn


;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70026]
type    = A
physics = A
anim = 1032
velset = 3,0
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =



;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70030]
type    = A
physics = S
anim = 1033
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 23     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =


[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 15001
ID = 15001
pos = -40,-230
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent

[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 15001
ID = 15001
pos = -40,-310
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent =

[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 15001
ID = 15001
pos = -40,-390
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [900,915]
x = 0
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = animelem = 1
x = -15
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -15
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = animelem = 3
x = -15
y = 0
;ignorehitpause =
;persistent =

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 10
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = Time >= 25
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =


;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70031]
type    = A
physics = A
anim = 1026
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =


;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70035]
type    = A
physics = S
anim = 1034
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 17     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 23     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 27     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [900,915]
x = 0
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = Time = 0
x = -7
y = -10
;ignorehitpause =
;persistent =

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 4
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 15
x = 0
y = 0
;ignorehitpause =
;persistent =



[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = Time >= 25
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =


;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70036]
type    = A
physics = A
anim = 1028
velset = -3,0
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =


;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70040]
type    = A
physics = A
anim = 1035
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 19     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 27     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [900,915]
x = 0
y = 0
;ignorehitpause =
;persistent =

[State 101, VelSet]
type = VelSet
trigger1 = Time = 0
x = -7
y = 10
;ignorehitpause =
;persistent =

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 8
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 101, 4]
type = ChangeState
trigger1 = time = 20
value = 70041


value = 1035
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70041]
type    = A
physics = A
anim = 1030
velset = -3,0
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;anim =
;ignorehitpause =
;persistent =

[

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70045]
type    = S
physics = S
anim = 1037
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 23     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =


[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 15001
ID = 15001
pos = -40,-130
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent

[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 15001
ID = 15001
pos = -40,-210
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent =

[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 15001
ID = 15001
pos = -40,-290
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [900,915]
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 101, VelSet]
type = VelSet
trigger1 = Time = 0
x = 7
y = 0
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 4
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 101, 4]
type = ChangeState
trigger1 = time = 20
value = 70046

;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70046]
type    = S
physics = S
anim = 1038
sprpriority = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;anim =
;ignorehitpause =
;persistent =

;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70050]
type    = S
physics = S
anim = 1039
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 275,0 + (random%4)
volume = 255
channel = 3
persistent = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
;ignorehitpause =
;persistent =

[State 100, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1
palcolor = 256
palbright = 90,90,90
palcontrast = 256,256,256

[State 100, 3]
type = Afterimagetime
trigger1 = 1
time = 2


;[State 101, 3]
type = Afterimagetime
trigger1 = 1
time = 4

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4999,0
volume = 255
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 13     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 14     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 15     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 16     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 18     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 20     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 22     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 23     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 24     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 26     ;fv =
value = -1
;ignorehitpause =
;persistent =


[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 15001
ID = 15001
pos = -40,-130
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent

[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 15001
ID = 15001
pos = -40,-210
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent =

[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 15001
ID = 15001
pos = -40,-290
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
vel = 19,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 2.75,2.75
sprpriority = -2
removeongethit = 1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [900,915]
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 101, VelSet]
type = VelSet
trigger1 = Time = 0
x = -7
y = 0
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Time <= 4
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 101, 4]
type = ChangeState
trigger1 = time = 20
value = 70051

;---------------------------------------------------------------------------

; air RUN_FWD
[Statedef 70051]
type    = S
physics = S
anim = 1040
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;anim =
;ignorehitpause =
;persistent =

;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;==========<ZERO COUNTER>==========
[Statedef 750]
type=S
physics=S
movetype=I
anim=750
ctrl=0
velset=0,0
poweradd=-1000
sprpriority=2

[State Alpha Counter Left]
trigger1 = TeamSide = 1
trigger1 = Time = 1
type = Explod
ownpal = 1
anim = 9912
postype = left
scale = 0.7,0.7
pos = 10, 83
ontop = 1
bindtime = -1

[State Alpha Counter Right]
trigger1 = TeamSide = 2
trigger1 = Time = 1
type = Explod
ownpal = 1
anim = 9912
ontop = 1
scale = 0.7,0.7
postype = right
pos = -130, 83
bindtime = -1

[State 750, strengthvar]
type=varset
trigger1=!time&&var(59)<=0
var(10)= command="bdx"
ignorehitpause=1

[State 750, snd]
type=playsnd
trigger1=time = 0
value= S40,9
channel=0

[State 750, superpause]
type=superpause
trigger1=!time
time=20
movetime=20
anim=-1
sound=s40,10
p2defmul=1
darken=0

[State 750, end]
type=changestate
trigger1=time>=20
value=1000
;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[state 250, 1]
type = explod
trigger1 = time = 0
pos = 30, -60
postype = p1
bindtime = -1
sprpriority = 3
anim = 910
removetime = -2
removeongethit = 1

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[state 250, 1]
type = explod
trigger1 = time = 0
pos = -10, -40
postype = p1
bindtime = -1
sprpriority = 3
anim = 910
removetime = -2
removeongethit = 1

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[state 250, 1]
type = explod
trigger1 = time = 0
pos = -10, -40
postype = p1
bindtime = -1
sprpriority = 3
anim = 910
removetime = -2
removeongethit = 1

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52
;---------------------------------------------------------------------------
[Statedef 3794]
type = S
movetype = I
physics = N
anim = 7033
velset = 0,0
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1||animelem = 2
value = S25,2
volume = 255
channel = -1



[State 0, PowerAdd]
type = PowerAdd
trigger1 = time >= 0
trigger1 = time <=7500
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic


[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 7500



;-----------------------------------------------------------------------------
[Statedef 1201]
type    = S
movetype= A
physics = S
juggle  = 1
;velset = 0,0
poweradd = 0
anim = 1201
ctrl = 0
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State -2, PlaySnd]
type = PlaySnd
triggerall = animelem = 1
trigger1 = !win
trigger2 = !lose
value = S1200,7
volume = 255
channel = 13
loop = 999
persistent = 0

[State -2, PlaySnd]
type = PlaySnd
triggerall = animelem = 1
trigger1 = !win
trigger2 = !lose
value = S1200,7
volume = 255
channel = 13
loop = 999
persistent = 0
[State -2, PlaySnd]
type = PlaySnd
triggerall = animelem = 1
trigger1 = !win
trigger2 = !lose
value = S1200,7
volume = 255
channel = 13
loop = 999
persistent = 0
[State -2, PlaySnd]
type = PlaySnd
triggerall = animelem = 1
trigger1 = !win
trigger2 = !lose
value = S1200,7
volume = 255
channel = 13
loop = 999
persistent = 0
[State -2, PlaySnd]
type = PlaySnd
triggerall = animelem = 1
trigger1 = !win
trigger2 = !lose
value = S1200,7
volume = 255
channel = 13
loop = 999
persistent = 0


[State 0, VarSet]
type = VarSet
trigger1 = Time = 0
v = 28    ;fv = 10
value = 9999999999 ;1800
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = animelem = 22
anim = 3794
ID = 3794
pos = 0,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 7500
supermove
pausemove
scale = 1.5,1.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 23
helpertype = normal ;player
name = "aura"
ID = 3794
stateno = 3794
pos = 0,-50
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 7500
pausemovetime = 0
size.xscale = .7
size.yscale = .7


[State 3300, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 1201

[State 3300, VelSet 1];Super Armor
type = VelSet
trigger1 = (Time = 0) && (PrevStateNo != 3950)
x = 0
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = 0
flag = nomusic

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 3001]
type = Helper
trigger1 = Time = 0
stateno = 33120
ownpal = 1


[State 3300, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(1) = 4
time = 300
pos = 8,-91
anim = S8201
sound = S100,14
poweradd = -3000
movetime = 70

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1240,0+ (random%1)
volume = 255
channel = -1

[State 3300, Super Portrait Explod]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 9001
postype = Back
pos = -150,4
ownpal = 1
sprpriority = -2
supermovetime = 58
removeongethit = 1
bindtime = -1

[State 3300, AssertSpecial]
type = AssertSpecial
trigger1 = (AnimElemTime(2) >= 1) && (AnimElemTime(25) < 0)
flag = NoBarDisplay

[State 3300, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(4) = 0
time = 50
length = 12
framegap = 5
palcolor = 0
palcontrast = 200,255,255
palpostbright = 100,100,200
palmul = 0.7,0.7,1
trans = add1


[State 3300, Width]
type = Width
trigger1 = FrontEdgeBodyDist <= 8
edge = 8,0






[State 3300, RemoveExplod];remove Hadouken wave in fireball cancel
type = RemoveExplod
trigger1 = (Time = 0)

|| (PrevStateNo = 1020))
id = 8050

[State 3300, ChangeState]
type = ChangeState
trigger1 = (AnimTime = 0) || (FrontEdgeBodyDist <= 0)
value = 690
ctrl = 1

;---------------------------------------------------------------------





;----------------------------------------------------------------------------
;---Crouchingparry---
[Statedef 701]
type=C
physics=C
movetype=I
anim=701
velset=0,0
ctrl=0
sprpriority=2
poweradd=1000

[State 701, pause]
type=pause
trigger1=!time
time=10
movetime=10
[State 701, nhb]
type=nothitby
trigger1=time<=10
time=1
value=SCA
[State 701, stop]
type=posfreeze
trigger1=time<=10
value=1

[State 701, blueflash]
type=palfx
trigger1=!time&&var(21)>=0
add=0,50,255
sinadd=0,-50,-255,60
time=15
[State 701, redflash]
type=palfx
trigger1=!time&&var(21)<0
add=255,0,0
sinadd=-255,0,0,60
time=15

[State 701, snd]
type=playsnd
trigger1=!time
value=3,(random<500)
channel=0
[State 701, snd]
type=playsnd
trigger1=!time
value=7,3

[State 18100, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,80
volume = 255
channel = -1

[State 18100, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,81
volume = 255
channel = -1

[State 700, spark]
type=explod
trigger1=animelem=2
anim=7200
ID=7200
sprpriority=5
postype=p1
pos=19,-98
pausemovetime=60
ownpal=1

[State 701, asserts]
type=assertspecial
trigger1=1
flag=nowalk
flag2=nostandguard
flag3=nocrouchguard
[State 701, ctrl]
type=ctrlset
trigger1=time>10
value=1
[State 701, end]
type=changestate
trigger1=!animtime
value=11
ctrl=1
;----------------------------------------------------------------------------
; ブロッキング
[Statedef 18000]
type = S　
movetype= I
physics = S
juggle = 0
ctrl = 0

[State 20, 3]
type = ChangeAnim
Triggerall = var(28) = 0
trigger1 = Time = 0
value = 18000

[State 20, 3]
type = ChangeAnim
Triggerall = var(28) = 1
trigger1 = Time = 0
value = 20020

[State 1700, 1]
type = VelSet
Triggerall = var(28) = 0
trigger1 = AnimElem = 1
x = 2.6

[state 9500,1]
type = ReversalDef
trigger1 = Time = 0
attr = S,NT
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 0,15
sparkno = -1
sprpriority = 2
p1stateno = 18100


[State 1030, 4]
type = ChangeState
trigger1 = animTime = 0
value = 20
ctrl = 1

[Statedef 20022]
type = S　
movetype= I
physics = S
juggle = 0
ctrl = 0

[State 20, 3]
type = ChangeAnim
Triggerall = var(28) = 1
trigger1 = Time = 0
value = 20023

[State 1030, 4]
type = ChangeState
trigger1 = animTime = 0
value = 20
ctrl = 1
;----------------------------------------------------------------------------
;ブロッキング2
[Statedef 18100]
type = S
movetype= I
physics = N
anim = 18100
velset = -0.05,0

[State 1031, 1]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 1031, 2]
type = PowerAdd
trigger1 = Time = 0
value = 150

[State 9550, 50]
type = PalFX
trigger1 = Time = 0
time = 6
add = 80,80,255

[State 18100, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,80
volume = 255
channel = -1

[State 18100, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,81
volume = 255
channel = -1


[State 1031, 2]
type = Playsnd
trigger1 = Time = 0
value = 4,46
volume = 255

[State 1031, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------------------------------------------
 ; 下段ブロッキング
[Statedef 18200]
type = C
movetype= I
physics = S
juggle = 0
ctrl = 0
velset = 0,0

[State 11, 1]
type = ChangeAnim
Triggerall = var(28) = 0
trigger1 = Time = 0
value = 18200

[State 11, 1]
type = ChangeAnim
Triggerall = var(28) = 1
trigger1 = Time = 0
value = 20010

[state 9500,1]
type = ReversalDef
trigger1 = Time = 0
attr = C,NT
reversal.attr = SCA, NA, SA, HA, SP, HP, NP
pausetime = 0,15
sparkno = -1
sprpriority = 2
p1stateno = 18300

[State 1030, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;----------------------------------------------------------------------------
;下段ブロッキング２
[Statedef 18300]
type = C
movetype= I
physics = N
anim = 18300
velset = 0,0

[State 18300, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,80
volume = 255
channel = -1

[State 18300, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,81
volume = 255
channel = -1

[State 1031, 1]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 9550, 50]
type = PalFX
trigger1 = Time = 0
time = 6
add = 80,80,255

[State 1031, 2]
type = PowerAdd
trigger1 = Time = 0
value = 150

[State 1031, 2]
type = Playsnd
trigger1 = Time = 0
value = 4,46
volume = 255

[State 180, 2]
type = Explod
trigger1 = time = 0
id = 10000
anim = 10000
pos = 27,-22
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 180, 2]
type = Explod
trigger1 = time = 0
id = 10001
anim = 10001
pos = 28,-20
ontop = 1
ownpal = 1
removeongethit = 1

[State 1031, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------
;空中ブロッキング
[Statedef 18400]
type    = A
physics = N
movetype = I
sprpriority = 0
anim = 18500


[State 586,init]
type = VarSet
trigger1 = 1
v = 26
value = 0

[State 586,Go]
type = ChangeState
trigger1 = 1
value = 18500

[Statedef 18500]
type    = A
movetype= I
physics = A
juggle  = 0
velset = -2.5,-2.9
anim = 18500
ctrl = 0
sprpriority = 2

[state 587, ctrlset]
type = ctrlset
trigger1 = time = 1
value = 1

[State 587, init]
type = VarSet
trigger1 = time = 0
v = 7
value = 0

[State 587, 1]
type = Pause
trigger1 = time = 0
time = 7

[State 587, 1]
type = PosFreeze
trigger1 = Time <= 7
time = 2

[State 1031, 2]
type = PowerAdd
trigger1 = Time = 0
value = 150

[State 1031, 2]
type = Playsnd
trigger1 = Time = 0
value = 4,46
volume = 255

[State 180, 2]
type = Explod
trigger1 = time = 0
id = 10000
anim = 10000
pos = 27,-22
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 180, 2]
type = Explod
trigger1 = time = 0
id = 10001
anim = 10001
pos = 28,-20
ontop = 1
ownpal = 1
removeongethit = 1

[State 587, 1]
type = NotHitBy
trigger1 = Time <= 7
value = SCA
time = 2

[State 9550, 50]
type = PalFX
trigger1 = Time = 0
time = 6
add = 80,80,255

[State 587, 5]
type = PlayerPush
trigger1 = time >= 0
value = 0


[State 587, 2]
type = ChangeState
trigger1 = Animtime = 0
value = 50
ctrl = 1
;----------------------------------------------------------------------------
;===============parry section========================================
;☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆
;PARRY HIGH

[Statedef 4000]
type = S
movetype = I
physics = S
anim = 4000
velset = 0,0
sprpriority = 3
facep2 = 1
ctrl = 0

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S100,80
volume = 255
channel = -1

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S100,81
volume = 255
channel = -1



[State -2, ブロッキング]
type = VarSet
trigger1 = time = 0
var(29) = var(29)+1

[State 4000, posadd]
type = posadd
trigger1 = time = 0
trigger1 = enemynear,hitdefattr = SA, HA
x = -10*const(size.xscale)

[State 4000, playsnd]
type = playsnd
trigger1 = Time = 0
value = 0,2
channel = 0

[State 4000, playsnd]
type = playsnd
trigger1 = Time = 0
value = 4000,0

[State 4000, EnvShake]
type = EnvShake
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
time = 10
ampl = 2
freq = 180
phase = 40


[State 4000, nothitby]
type = NotHitBy
trigger1 = (Time < Floor(Var(17)*1.5)+3)
value = SCA
time = 2

[State 4000, PalFX]
type = PalFX
trigger1 = !var(32) || var(29)!=1
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 50,50,250

[State 4000, PalFX]
type = PalFX
trigger1 = var(29)=1 && var(32)
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 250,0,0

[State 4000, explod]
type = explod
trigger1 = Time = 1
anim = 7000
pos = 42,-82
postype = p1
facing = 1
sprpriority = 3
bindtime = -1
pausemovetime = 60
ignorehitpause = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 4000, Pause]
type = Pause
trigger1 = (AnimElem = 2);trigger1 = time = 0
time = 20-ifelse((GetHitVar(animtype)=[3,5]),4,GetHitVar(animtype))-ifelse(GetHitVar(hitshaketime)>16,16,GetHitVar(hitshaketime))
movetime = 20-ifelse((GetHitVar(animtype)=[3,5]),4,GetHitVar(animtype))-ifelse(GetHitVar(hitshaketime)>16,16,GetHitVar(hitshaketime))

[State 4000, asserts]
type = assertspecial
trigger1 = animelemtime(4) < 0
flag = nowalk
flag2 = nostandguard
flag3 = nocrouchguard

[State -2, ChangeState]
type = ChangeState
triggerall = var(50) = 0 ;&& command = "holdback"
triggerall = inguarddist
trigger1 = animelemtime(4) = 0
value = 120

[State 4000, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(4) = 0
value = 1

[State 4000, sprpriority]
type = sprpriority
trigger1 = animelemtime(4) >= 0
value = 0

[State 4000, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;PARRY AIR

[Statedef 4200]
type = A
movetype = I
physics = N
anim = 4200
;velset = 0,0
sprpriority = 0
;facep2 = 1
ctrl = 0

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S100,80
volume = 255
channel = -1

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S100,81
volume = 255
channel = -1

[State -2, ブロッキング]
type = VarSet
trigger1 = time = 0
var(29) = var(29)+1

[State 4200, velset]
type = velset
trigger1 = time = 0
x = (vel X)*ifelse(p2dist X < 0,-1,1)
y = ifelse(vel Y<-1.0,vel Y,-1.0)

[State 4200, turn]
type = turn
trigger1 = time = 0
trigger1 = p2dist X < 0

[State 4200, turn]
type = posfreeze
trigger1 = 1

[State 4200, playsnd]
type = playsnd
trigger1 = Time = 0
value = 0,2
channel = 0

[State 4200, playsnd]
type = playsnd
trigger1 = Time = 0
value = 4000,0

[State 4200, EnvShake]
type = EnvShake
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
time = 12
ampl = 2
freq = 180
phase = 40

[State 4200, nothitby]
type = nothitby
trigger1 = var(0) = 0
trigger1 = Time = 0
value = SCA
time = 16

[State 4000, PalFX]
type = PalFX
trigger1 = !var(32) || var(29)!=1
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 50,50,250

[State 4000, PalFX]
type = PalFX
trigger1 = var(29)=1 && var(32)
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 250,0,0

[State 4200, explod]
type = explod
trigger1 = Time = 1
anim = 7000
pos = 14,-75
postype = p1
facing = 1
sprpriority = 3
bindtime = -1
pausemovetime = 60
ignorehitpause = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 7005, Pause]
type = Pause
trigger1 = (AnimElem = 2)
time = Floor(Var(17)*1.5)+5
movetime = Floor(Var(17)*1.5)+2

[State 4200, asserts]
type = assertspecial
trigger1 = 1
flag = noairguard

[State 4200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 4250
;--------------------------------------------------------------------------------
;空中ブロ(続き)
[Statedef 4250]
type = A
movetype = I
physics = N
anim = 4250
;velset = fvar(37)*var(6),ifelse(fvar(31)<-1.0,fvar(31),-1.0)
sprpriority = 0
ctrl = 1

[State 4250, VelAdd]
type = VelAdd
trigger1 = 1
y = .50

[State 4200, CtrlSet]
type = CtrlSet
trigger1 = animelem = 4||animelem = 5
value = 1

[State 4250, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
trigger1 = Anim != 52
value = 52
;△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△
;空中ブロ
[Statedef 4205]
type = A
movetype = I
physics = N
anim = 4200
;velset = 0,0
sprpriority = 0
;facep2 = 1
ctrl = 0

[State -2, ブロッキング]
type = VarSet
trigger1 = time = 0
var(29) = var(29)+1

[State 4200, velset]
type = velset
trigger1 = time = 0
x = (vel X)*ifelse(p2dist X < 0,-1,1)
y = ifelse(vel Y<-1.0,vel Y,-1.0)

[State 4200, turn]
type = turn
trigger1 = time = 0
trigger1 = p2dist X < 0

[State 4200, turn]
type = posfreeze
trigger1 = 1

[State 4200, playsnd]
type = playsnd
trigger1 = Time = 0
value = 0,1
channel = 0

[State 4200, playsnd]
type = playsnd
trigger1 = Time = 0
value = 4000,0

[State 4200, EnvShake]
type = EnvShake
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
time = 12
ampl = 2
freq = 180
phase = 40

[State 4200, nothitby]
type = nothitby
trigger1 = var(0) = 0
trigger1 = Time = 0
value = SCA
time = 16

[State 4000, PalFX]
type = PalFX
trigger1 = !var(32) || var(29)!=1
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 50,50,250

[State 4000, PalFX]
type = PalFX
trigger1 = var(29)=1 && var(32)
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 250,0,0

[State 4200, explod]
type = explod
trigger1 = Time = 1
anim = 7000
pos = 14,-75
postype = p1
facing = 1
sprpriority = 3
bindtime = -1
pausemovetime = 60
ignorehitpause = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 4200, Pause]
type = Pause
trigger1 = var(0) = 0
trigger1 = time = 0
time = 20-ifelse((GetHitVar(animtype)=[3,5]),4,GetHitVar(animtype))-ifelse(GetHitVar(hitshaketime)>16,16,GetHitVar(hitshaketime))
movetime = 20-ifelse((GetHitVar(animtype)=[3,5]),4,GetHitVar(animtype))-ifelse(GetHitVar(hitshaketime)>16,16,GetHitVar(hitshaketime))

[State 4200, asserts]
type = assertspecial
trigger1 = 1
flag = noairguard

[State 4200, CtrlSet]
type = CtrlSet
trigger1 = animelem = 1||animelem = 2||animelem = 3||animelem = 4
value = 1

[State 4200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;Guard Push (Stand)
[Statedef 160]
type    = S
movetype= I
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
anim = 160
sprpriority = 2

[State 6300, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6300, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6300, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6300, a4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 20

[State 6300, a5]
type = Helper
trigger1 = animelem = 2;Time = 0
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 7020
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6300, a6]
type = Explod
trigger1 = animelem = 2
anim = 7020
postype = p1
pos = 45,-50
ownpal = 1
vel = 0,0
scale = 0.5,0.5
ignorehitpause = 1
sprpriority = 7

[State 6300, a7]
type = PlaySnd
trigger1 = Time = 0
value = 0,5
volume = 255
channel = 1

[State 6300, a8]
type = PlaySnd
trigger1 = Time = 0
value = 3,0
channel = 0

[State 6300, a9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 161];--------------crouch
type    = C
movetype= I
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
anim = 161
sprpriority = 2

[State 6310, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6310, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6310, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6310, a4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 6310, a5]
type = Helper
trigger1 = animelem = 2;Time = 0
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 7020
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6310, a6]
type = Explod
trigger1 = animelem = 2
anim = 7020
postype = p1
pos = 33,-30
ownpal = 1
vel = 0,0
scale = 0.5,0.5
ignorehitpause = 1
sprpriority = 7

[State 6300, a7]
type = PlaySnd
trigger1 = Time = 0
value = 0,5
volume = 255
channel = 1

[State 6300, a8]
type = PlaySnd
trigger1 = Time = 0
value = 3,0
channel = 0
[State 6310, a9]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


[Statedef 162];------------air
type    = A
movetype= I
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
anim = 162
sprpriority = 2

[State 6320, a1]
type = VelMul
trigger1 = 1
x = 0.75

[State 6320, a2]
type = VelSet
trigger1 = Time = 10
x = 0

[State 6320, a3]
type = Width
trigger1 = 1
value = 10,0

[State 6320, a4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 6320, a5]
type = Helper
trigger1 = animelem = 2;Time = 0
helpertype = Normal
name = "GuardPush"
postype = P1
pos = -50,0
stateno = 7020
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 6320, a6]
type = Explod
trigger1 = animelem = 2
anim = 7020
postype = p1
pos = 33,-57
ownpal = 1
scale = 0.5,0.5
vel = 0,0
ignorehitpause = 1
sprpriority = 7

[State 6300, a7]
type = PlaySnd
trigger1 = Time = 0
value = 0,5
volume = 255
channel = 1

[State 6300, a8]
type = PlaySnd
trigger1 = Time = 0
value = 3,0
channel = 0

[State 6320, a9]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1

;----------------------------------------------------------------
;guard push helper
[Statedef 7020]
type    = S
movetype= I
physics = N
poweradd= 0
ctrl = 0
anim = 7025
sprpriority = -4

[State 6350, a1]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 6350, a2]
type = VelSet
trigger1 = Time = [0,10]
x = 30

[State 6350, a3]
type = VelSet
trigger1 = Time = [11,13]
x = 20

[State 6350, a4]
type = VelSet
trigger1 = Time >= 14
x = 10

[State 6350, a5]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 6350, a6]
type = DestroySelf
trigger1 = Time >= 18
;--------------------------------------------

;---------------------------------------------------------------------------
; Reversi
[Statedef 1350]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1350
sprpriority = 2

[State 0, ]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,AA,AT
p1stateno = 1351
priority = 7, hit
pausetime = 0,0

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Slap
[Statedef 1351]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 1200                       ;Change animation (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)

[State with voice]
type = PlaySnd
trigger1 = time = 1
value = S6000,24
volume = 255
ignorehitpause = 1

[State with voice]
type = PlaySnd
trigger1 = time = 1
value = S6000,25
volume = 255
ignorehitpause = 1

[State with voice]
type = PlaySnd
trigger1 = time = 1
value = S6000,25
volume = 255
ignorehitpause = 1



[State 0, ]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, ]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 10

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, SA                     ;Attribute: Standing, Normal Attack
damage = 35, 25                   ;Damage that move inflicts, guard damage
animtype = Hard                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = M                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
pausetime = 0, 0                 ;Time attacker pauses, time opponent shakes
sparkno = S8008
guard.sparkno=s910                     ;Spark anim no (Def: set above)
sparkxy = -10, -50               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S20,9                 ;Sound to play on hit
guardsound = S100,29               ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 12             ;Time opponent is in hit state
ground.velocity = 0,-7             ;Velocity at which opponent is pushed
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,-20           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 12                 ;Time before opponent regains control in air
fall = 1
fall.recover = 0
fall.damage = 100
p2stateno = 225


[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------
;-----------------
[Statedef 2030]
type = A
movetype = H
physics = N

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 2020

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 2031

[Statedef 2031]
type = A
movetype = H
physics = N
velset = -6.4,-8

[State 1281, 1]
type = VelAdd
trigger1 = Time > 0
y = .4

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State with voice]
type = PlaySnd
trigger1 = animelem = 1
value = S6000,41
volume = 255
ignorehitpause = 1

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 1]
type = ChangeAnim
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 14]
type = ChangeState
triggerall = Var(22) = 1
trigger1 = Time >= 2
value = 900

[State 5100, 14]
type = ChangeState
triggerall = Var(22) = 2
trigger1 = Time >= 2
value = 901 ;Recovery Roll.

[State 5100, 7]
type = ChangeState
triggerall = Var(22) = 0
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5100, 14]
type = ChangeState
triggerall = Var(22) = 1
trigger1 = Time >= 2
value = 900

[State 5100, 14]
type = ChangeState
triggerall = Var(22) = 2
trigger1 = Time >= 2
value = 901 ;Recovery Roll.

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N



[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State with voice]
type = PlaySnd
trigger1 = animelemtime (1) = 0
value = S6000,41
volume = 255
ignorehitpause = 1

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = A
movetype= H
physics = A
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -.15
y = -3.5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1]
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1]
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; Continue?
[Statedef 5500]
type = S
ctrl = 0
anim = 5300
velset = 0,0

[State 5500, 1] ;Use continue animation if available
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5500)
value = 5500

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S
anim = 0

[State 5900: Start with 1000 Power]
type = PowerAdd
trigger1 = RoundNo = 1 && TeamMode = Single
value = 1000

[State 5900: Start with 1000 Power]
type = PowerAdd
trigger1 = RoundNo = 1 && TeamMode = Simul
value = 500

[State 5900: Start with 1000 Power]
type = PowerAdd
trigger1 = RoundNo = 1 && TeamMode = Turns
value = 1000

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = !roundsexisted
value = 190

[State 5900, 4] ;Intro for round 1
type = ChangeState
trigger1 = roundno > 1
value = 22
;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl=0

[State 100, 6]
type = Explod
trigger1 = time < 15
trigger1 = (time % 4) = 1
ID = 7026
anim = 7026
postype = p1
pos = -20, -70
bindtime = 1
removetime = -2
vel = -1, 0
ownpal = 1
random = 20, 60
sprpriority = 2

[State 100, 7]
type = Explod
trigger1 = time < 15
trigger1 = (time % 4) = 0
ID = 7026
anim = 7026
postype = p1
pos = -20, -40
bindtime = 1
removetime = -2
vel = -.8, 0
ownpal = 1
random = 20, 60
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S100,34
volume = 0
channel = -1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(3)>=2
value = 1
;ignorehitpause =
;persistent =

[State 100, 1]
type = VelSet
trigger1 = time >=5
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0;command != "holdfwd"
value = 101
;---------------------------------------------------------------------------
; RUN_FWD land
[Statedef 101]
type    = S
physics = S
anim = 101
sprpriority = 1

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0
;x = 0

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = A
physics = N
ctrl = 0
anim = 105
sprpriority = 1
ctrl=0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S100,34
volume = 0
channel = -1

[State 105, Flash]
type = Explod
trigger1 = time > 4 && (time%4) = 1
ID = 7026
anim = 7026
postype = P1
pos = 10,-71
bindtime = 1
vel = -2.2
ownpal = 1
random = 18,40
removetime = -2
sprpriority = 2

[State 105, Flash]
type = Explod
trigger1 = time > 4 && (time % 4) = 0
ID = 7026
anim = 7026
postype = p1
pos = 10,-40
bindtime = 1
vel = -2
ownpal = 1
random = 18,40
removetime = -2
sprpriority = 2

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)

[State 105, 2]
type = CtrlSet
trigger1 = Time = 0
value = 1

[State 105, 3]
type = ChangeState
trigger1 = animTime = 0
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
value = 106
ctrl=0
;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 106

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0
;x = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 4]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_UP
[Statedef 110]
type    = S
physics = N

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 110, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 110, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = -7

[State 110, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 110, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 110, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; RUN_DOWN
[Statedef 115]
type    = S
physics = N

[State 115, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 115, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 115, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 115, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = 7

[State 115, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 115, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 115, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 115, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; ASURA SENKUU FORWARD XYZ (START)
[Statedef 1600]
Type    = S
Movetype= I
Physics = S
Juggle  = 0
Poweradd= 70
Ctrl = 0
Anim = 1600
Velset = 0,0,0

[State 1000, 3]
type = Explod
trigger1 = Time = 0
anim = 8001
id=8470
pos = -75,10
postype = p1
ontop = 1
scale = 0.5,0.5
removeongethit=1
removetime=-2
ownpal = 1

[State 182, 2]
Type = Playsnd
Trigger1 = Time = 0
Value = 1,0

[State 182, 2]
Type = nothitby
Trigger1 = Time >= 0
Value = SCA
Time = 1

[State 4110, 6]
Type = afterimage
Trigger1 = time = 0
Time = 999
Timegap  = 1
Framegap = 4
Length = 15
Palbright   = 0,0,0
Palcontrast = 255,255,255
Palmul      = 1,1,1

[State 4110, 6]
Type = Velset
Trigger1 = time = 0
X = 3

[State 4110, 6]
Type = Velset
Trigger1 = animelem = 5
X = -3

[State 210, 3]
Type = changestate
Trigger1 = animtime = 0
Value = 1601

;---------------------------------------------------------------------------
; ASURA SENKUU FORWARD XYZ (MOVE)
[Statedef 1601]
Type    = S
Movetype= I
Physics = N
Juggle  = 0
Poweradd= 0
Ctrl = 0
Anim = 1601
Velset = 9,0,0

[State 1254, Power!]
Type = varrandom
Trigger1 = 1
V = 45
Range = 2350,2999

[State 1354, (AI) E.Ken like! ._.]
Type = changestate
Trigger1 = Var(20)= 1 && Power >= Var(45)
Trigger1 = p2bodydist X = [-10,50]
Trigger1 = p2bodydist Y = [-30,0]
Value = 3100
Ctrl = 0

[State 182, 2]
Type = Width
Trigger1 = Time >= 0
Value = 10,0

[State 182, 2]
Type = Playsnd
Trigger1 = Time = 0
Value = 25,3

[State 182, 2]
Type = Changeanim
Trigger1 = p2bodydist x < -30
Value = 1602

[State 4110, 6]
Type = Sprpriority
Trigger1 = time >= 0
Value = 1

[State 182, 2]
Type = playerpush
Trigger1 = Time >= 0
Value = 0

[State 182, 2]
Type = Velmul
Trigger1 = Time >= 25
Trigger1 = Vel X > 0
X = .92

[State 182, 2]
Type = nothitby
Trigger1 = Time >= 0
Value = SCA
Time = 1

[State 210, 3]
Type = Velset
Trigger1 = Time = 45
Trigger2 = frontedgedist = 10
X = 0

[State 210, 3]
Type = Turn
Trigger1 = Time = 45
Trigger1 = anim = 1602

[State 210, 1]
Type = afterimagetime
Trigger1 = time = 33
Trigger2 = frontedgedist = 10
Trigger3 = backedgedist = 0
Trigger3 = time > 4
Time = 0

[State 4110, 6]
Type = Sprpriority
Trigger1 = time = 33
Trigger2 = frontedgedist = 10
Trigger3 = backedgedist = 0
Trigger3 = time > 4
Value = 0

[State 210, 3]
Type = changestate
Trigger1 = Time = 45
Trigger2 = frontedgedist = 10
Value = 0
Ctrl = 1

[State 210, 3]
Type = Turn
Trigger1 = frontedgedist = 10
Trigger1 = anim = 1602

[State 210, 3]
Type = changestate
Trigger1 = backedgedist = 0
Trigger1 = time > 4
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; ASURA SENKUU FORWARD ABC (START)
[Statedef 1610]
Type    = S
Movetype= I
Physics = S
Juggle  = 0
Poweradd= 70
Ctrl = 0
Anim = 1600
Velset = 0,0,0

[State 1000, 3]
type = Explod
trigger1 = Time = 0
anim = 8001
id=8470
pos = -75,10
postype = p1
ontop = 1
scale = 0.5,0.5
removeongethit=1
removetime=-2
ownpal = 1

[State 182, 2]
Type = Playsnd
Trigger1 = Time = 0
Value = 1,0

[State 182, 2]
Type = nothitby
Trigger1 = Time >= 0
Value = SCA
Time = 1

[State 4110, 6]
Type = afterimage
Trigger1 = time = 0
Time = 999
Timegap  = 1
Framegap = 4
Length = 15
Palbright   = 0,0,0
Palcontrast = 255,255,255
Palmul      = 1,1,1

[State 4110, 6]
Type = Velset
Trigger1 = time = 0
X = 3

[State 4110, 6]
Type = Velset
Trigger1 = animelem = 5
X = -3

[State 210, 3]
Type = changestate
Trigger1 = animtime = 0
Value = 1611

;---------------------------------------------------------------------------
; ASURA SENKUU FORWARD ABC (MOVE)
[Statedef 1611]
Type    = S
Movetype= I
Physics = N
Juggle  = 0
Poweradd= 0
Ctrl = 0
Anim = 1601
Velset = 6.5,0,0

[State 1254, Power!]
Type = varrandom
Trigger1 = 1
V = 45
Range = 2350,2999

[State 1354, (AI) E.Ken like! ._.]
Type = changestate
Trigger1 = Var(20)= 1 && Power >= Var(45)
Trigger1 = p2bodydist X = [-10,50]
Trigger1 = p2bodydist Y = [-30,0]
Value = 3100
Ctrl = 0

[State 182, 2]
Type = Width
Trigger1 = Time >= 0
Value = 10,0

[State 182, 2]
Type = Playsnd
Trigger1 = Time = 0
Value = 25,3

[State 182, 2]
Type = Changeanim
Trigger1 = p2bodydist x < -30
Value = 1602

[State 4110, 6]
Type = Sprpriority
Trigger1 = time >= 0
Value = 1

[State 182, 2]
Type = playerpush
Trigger1 = Time >= 0
Value = 0

[State 182, 2]
Type = Velmul
Trigger1 = Time >= 15
Trigger1 = Vel X > 0
X = .92

[State 182, 2]
Type = nothitby
Trigger1 = Time >= 0
Value = SCA
Time = 1

[State 210, 3]
Type = Velset
Trigger1 = Time = 25
Trigger2 = frontedgedist = 10
X = 0

[State 210, 3]
Type = Turn
Trigger1 = Time = 25
Trigger1 = anim = 1602

[State 210, 1]
Type = afterimagetime
Trigger1 = time = 13
Trigger2 = frontedgedist = 10
Trigger3 = backedgedist = 0
Trigger3 = time > 4
Time = 0

[State 4110, 6]
Type = Sprpriority
Trigger1 = time = 13
Trigger2 = frontedgedist = 10
Trigger3 = backedgedist = 0
Trigger3 = time > 4
Value = 0

[State 210, 3]
Type = changestate
Trigger1 = Time = 25
Trigger2 = frontedgedist = 10
Value = 0
Ctrl = 1

[State 210, 3]
Type = Turn
Trigger1 = frontedgedist = 10
Trigger1 = anim = 1602

[State 210, 3]
Type = changestate
Trigger1 = backedgedist = 0
Trigger1 = time > 4
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; ASURA SENKUU BACKWARD XYZ (START)
[Statedef 1620]
Type    = S
Movetype= I
Physics = S
Juggle  = 0
Poweradd= 70
Ctrl = 0
Anim = 1600
Velset = 0,0,0

[State 1000, 3]
type = Explod
trigger1 = Time = 0
anim = 8001
id=8470
pos = -75,10
postype = p1
ontop = 1
scale = 0.5,0.5
removeongethit=1
removetime=-2
ownpal = 1

[State 182, 2]
Type = Playsnd
Trigger1 = Time = 0
Value = 1,0

[State 182, 2]
Type = nothitby
Trigger1 = Time >= 0
Value = SCA
Time = 1

[State 4110, 6]
Type = afterimage
Trigger1 = time = 0
Time = 999
Timegap  = 1
Framegap = 4
Length = 15
Palbright   = 0,0,0
Palcontrast = 255,255,255
Palmul      = 1,1,1

[State 4110, 6]
Type = Velset
Trigger1 = time = 0
X = -3

[State 4110, 6]
Type = Velset
Trigger1 = animelem = 5
X = 3

[State 210, 3]
Type = changestate
Trigger1 = animtime = 0
Value = 1621

;---------------------------------------------------------------------------
; ASURA SENKUU BACKWARD XYZ (MOVE)
[Statedef 1621]
Type    = S
Movetype= I
Physics = N
Juggle  = 0
Poweradd= 0
Ctrl = 0
Anim = 1601
Velset = -9,0,0

[State 1254, Power!]
Type = varrandom
Trigger1 = 1
V = 45
Range = 2350,2999

[State 1354, (AI) E.Ken like! ._.]
Type = changestate
Trigger1 = Var(20)= 1 && Power >= Var(45)
Trigger1 = p2bodydist X = [-10,50]
Trigger1 = p2bodydist Y = [-30,0]
Value = 3100
Ctrl = 0

[State 182, 2]
Type = Width
Trigger1 = Time >= 0
Value = 10,0

[State 182, 2]
Type = Playsnd
Trigger1 = Time = 0
Value = 25,3

[State 182, 2]
Type = Changeanim
Trigger1 = p2bodydist x < -30
Value = 1602

[State 4110, 6]
Type = Sprpriority
Trigger1 = time >= 0
Value = 1

[State 182, 2]
Type = playerpush
Trigger1 = Time >= 0
Value = 0

[State 182, 2]
Type = Velmul
Trigger1 = Time >= 25
Trigger1 = Vel X < 0
X = .92

[State 182, 2]
Type = nothitby
Trigger1 = Time >= 0
Value = SCA
Time = 1

[State 210, 3]
Type = Velset
Trigger1 = Time = 45
Trigger2 = frontedgedist = 10
X = 0

[State 210, 3]
Type = Turn
Trigger1 = Time = 45
Trigger1 = anim = 1602

[State 210, 1]
Type = afterimagetime
Trigger1 = time = 33
Trigger2 = frontedgedist = 10
Trigger3 = backedgedist = 0
Time = 0

[State 4110, 6]
Type = Sprpriority
Trigger1 = time = 33
Trigger2 = frontedgedist = 10
Trigger3 = backedgedist = 0
Trigger3 = time > 4
Value = 0

[State 210, 3]
Type = changestate
Trigger1 = Time = 45
Trigger2 = frontedgedist = 10
Value = 0
Ctrl = 1

[State 210, 3]
Type = Turn
Trigger1 = frontedgedist = 10
Trigger1 = anim = 1602

[State 210, 3]
Type = changestate
Trigger1 = backedgedist = 0
Trigger1 = time > 4
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; ASURA SENKUU BACKWARD ABC (START)
[Statedef 1630]
Type    = S
Movetype= I
Physics = S
Juggle  = 0
Poweradd= 70
Ctrl = 0
Anim = 1600
Velset = 0,0,0

[State 1000, 3]
type = Explod
trigger1 = Time = 0
anim = 8001
id=8470
pos = -75,10
postype = p1
ontop = 1
scale = 0.5,0.5
removeongethit=1
removetime=-2
ownpal = 1

[State 182, 2]
Type = Playsnd
Trigger1 = Time = 0
Value = 1,0

[State 182, 2]
Type = nothitby
Trigger1 = Time >= 0
Value = SCA
Time = 1

[State 4110, 6]
Type = afterimage
Trigger1 = time = 0
Time = 999
Timegap  = 1
Framegap = 4
Length = 15
Palbright   = 0,0,0
Palcontrast = 255,255,255
Palmul      = 1,1,1

[State 4110, 6]
Type = Velset
Trigger1 = time = 0
X = -3

[State 4110, 6]
Type = Velset
Trigger1 = animelem = 5
X = 3

[State 210, 3]
Type = changestate
Trigger1 = animtime = 0
Value = 1631

;---------------------------------------------------------------------------
; ASURA SENKUU BACKWARD ABC (MOVE)
[Statedef 1631]
Type    = S
Movetype= I
Physics = N
Juggle  = 0
Poweradd= 0
Ctrl = 0
Anim = 1601
Velset = -6.5,0,0

[State 1254, Power!]
Type = varrandom
Trigger1 = 1
V = 45
Range = 2350,2999

[State 1354, (AI) E.Ken like! ._.]
Type = changestate
Trigger1 = Var(20)= 1 && Power >= Var(45)
Trigger1 = p2bodydist X = [-10,50]
Trigger1 = p2bodydist Y = [-30,0]
Value = 3100
Ctrl = 0

[State 182, 2]
Type = Width
Trigger1 = Time >= 0
Value = 10,0

[State 182, 2]
Type = Playsnd
Trigger1 = Time = 0
Value = 25,3

[State 182, 2]
Type = Changeanim
Trigger1 = p2bodydist x < -30
Value = 1602

[State 4110, 6]
Type = Sprpriority
Trigger1 = time >= 0
Value = 1

[State 182, 2]
Type = playerpush
Trigger1 = Time >= 0
Value = 0

[State 182, 2]
Type = Velmul
Trigger1 = Time >= 15
Trigger1 = Vel X < 0
X = .92

[State 182, 2]
Type = nothitby
Trigger1 = Time >= 0
Value = SCA
Time = 1

[State 210, 3]
Type = Velset
Trigger1 = Time = 25
Trigger2 = frontedgedist = 10
X = 0

[State 210, 3]
Type = Turn
Trigger1 = Time = 25
Trigger1 = anim = 1602

[State 210, 1]
Type = afterimagetime
Trigger1 = time = 13
Trigger2 = frontedgedist = 10
Trigger3 = backedgedist = 0
Time = 0

[State 4110, 6]
Type = Sprpriority
Trigger1 = time = 13
Trigger2 = frontedgedist = 10
Trigger3 = backedgedist = 0
Trigger3 = time > 4
Value = 0

[State 210, 3]
Type = changestate
Trigger1 = Time = 25
Trigger2 = frontedgedist = 10
Value = 0
Ctrl = 1

[State 210, 3]
Type = Turn
Trigger1 = frontedgedist = 10
Trigger1 = anim = 1602

[State 210, 3]
Type = changestate
Trigger1 = backedgedist = 0
Trigger1 = time > 4
Value = 0
Ctrl = 1
;---------------------------------------------------------------------------
;Beginning of the super jump
[Statedef 7000]
type = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 0, Explod]
type = Explod
trigger1 = AnimTime = 0
anim = 7022
ID = 7022
pos = 0,20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove =999
pausemove =999
scale = 0.4,0.4
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 7000, VarSet]
type = VarSet
trigger1 = Time = 0
v = 11
value = 0

[State 7000, VarSet]
type = VarSet
trigger1 = command = "holdfwd"
trigger2 = var(59)>0
v = 11
value = 1

[State 7000, VarSet]
type = VarSet
trigger1 = command = "holdback"
v = 11
value = -1


[State 7000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 7001
ctrl = 1
;---------------------------------------------------------------------------------------------
;Super Jump
[Statedef 7001]
type = A
physics = A
ctrl = 1
anim = 48
velset = 0,-15

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S10,10
volume = 255
channel = 1

[State 7001, VelAdd]
type = VelAdd
triggerall = Vel X >= -2
trigger1 = command = "holdback"
trigger1 = Anim != 43
x = -0.1

[State 7001, VelAdd]
type = VelAdd
triggerall = Vel X <= 2.5
trigger1 = command = "holdfwd"
trigger1 = Anim != 42
trigger2 = var(59)>0;--------------AI
trigger2 = Anim != 42
x = 0.25

[State 7001, VelSet]
type = VelSet
trigger1 = Anim = 42
trigger1 = Time = [0,5]
x = 4

[State 7001, VelSet]
type = VelSet
trigger1 = Anim = 43
trigger1 = Time = [0,5]
x = -3.5

[State 7001, ChangeAnim]
type = ChangeAnim
trigger1 = Var(11) = 0
trigger1 = Time = [0,4]
value = 48

[State 7001, ChangeAnim]
type = ChangeAnim
trigger1 = Var(11) = 1
trigger1 = Time = [0,4]
value = 48

[State 7001, ChangeAnim]
type = ChangeAnim
trigger1 = Var(11) = -1
trigger1 = Time = [0,4]
value = 48

[State 7001, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 9999,5
volume = 255

[State 7001, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------

; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,10
volume = 255
channel = -1



[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181


[State 182, 1]
type = ChangeState
trigger1 = Time = 0
value = 183

;---------------------------------------------------------------------------
; Win pose 1
; CNS difficulty: basic
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 170, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S276,7
volume = 255
channel = -1

[State 181, a]
type = AssertSpecial
trigger1 = time >= 0
trigger1 = time <=550
flag = RoundNotOver


[State 181, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6000,37
volume = 255
channel = -1

[State 181, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S6000,37
volume = 255
channel = -1
;---------------------------------------------------------------------------
; Win Pose 2

[Statedef 182]
type = S
movetype = I
physics = S
ctrl = 0
anim = 183
velset = 0,0

[State 182, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; Introduction
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0


[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeState
trigger1 = RoundState = 0
value = 191

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nomusic

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 22
;-------------------------------------------------------------------------------
;----------------------------------------------------------------------------
[Statedef 11040]
type = S
movetype = I
velset = 5,0
anim = 999
[State 11040, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 999
[State 11040, 2]
type = AssertSpecial
trigger1 = AnimTime < 1000
flag = Intro
[State 11040, 2]
type = PlayerPush
trigger1 = Time >= 0
value = 0
[State 11040, 6]
type = AfterImage
trigger1 = time = 50
time = 110
length = 17
PalBright   =   0,  0,  0
PalContrast = 148,148,148
PalAdd      =   0,  0,  0
PalMul      =  0.9,0.9,0.9
FrameGap = 4
Trans = Add1
[State 11040, 2]
type = Changeanim
trigger1 = Time = 50
value = 3891
[State 11040, 2]
type = posadd
trigger1 = Time = 50
x = 240
[State 11040, 2]
type = turn
trigger1 = Time = 50
[State 11040, 2]
type = velset
trigger1 = Time = 50
x = 10
[State 11040, 2]
type = VelAdd
trigger1 = Time > 50
trigger1 = Time < 80
x = -.2
[State 11040, 3]
type = AssertSpecial
trigger1 = Time >=0
trigger1 = Time <=1050
flag = NoMusic
[State 11040, 8]
type = PlaySnd
trigger1 = time = 50
value = 25,3
[State 210, 3]
type = Turn
trigger1 = time = 70
[State 11040, 3]
type = Velset
trigger1 = Time = 70
x = -4
[State 11040, 2]
type = VelAdd
trigger1 = Time > 70
trigger1 = time < 103
x = .3
[State 11040, 4]
type = Velset
trigger1 = Time = 103
x = 0
[State 11040, 2]
type = Changeanim
trigger1 = Time = 103
value = 3893
[State 7800, 3]
type = BGPalfx
trigger1 = time = 53
invertall = 1
supermove = 1
time = 76
add = 0,-255,-255
sinadd = 400,400,400,245
[State 1531, 5]
type = EnvColor
trigger1 = time = 127
value = 255,255,255
time = 70
[State 1531, 5]
type = Explod
trigger1 = time >= 127
trigger1 = TimeMod = 4, 3
trigger1 = time <= 180
trigger1 = random <= 500
Anim = 8008
scale = 1.3,1.3
pos = 30, -50
random = 100,50
ontop = 1
[State 1531, 5]
type = PlaySnd
trigger1 = time >= 127
trigger1 = TimeMod = 4, 3
trigger1 = time <= 180
trigger1 = random <= 500
value = 20,4
[State 1531, 5]
type = Explod
trigger1 = time >= 127
trigger1 = TimeMod = 4, 3
trigger1 = time <= 180
trigger1 = random <= 500
Anim = 8009
scale = 1.2,1.2
pos = 30, -50
random = 100,50
ontop = 1
[State 1531, 5]
type = PlaySnd
trigger1 = time >= 127
trigger1 = TimeMod = 4, 3
trigger1 = time <= 180
trigger1 = random <= 500
value = S100,29

[State 11040, 2]
type = Changeanim
trigger1 = Time = 180
value = 3892
[State 1531, 5]
type = Explod
trigger1 = time = 180
Anim = 9420
scale = 2,2
pos = 75, -60
ontop = 1
[State 1531, 5]
type = Explod
trigger1 = time = 180
Anim = 9300
scale = 2,2
pos = 75, -60
ontop = 1
[State 1531, 5]
type = PlaySnd
trigger1 = time = 178
value = S20,2
[State 1531, 5]
type = PlaySnd
trigger1 = time = 178
value = S20,2
[State 11040, 2]
type = posadd
trigger1 = Time = 180
x = -30

[State 11040, 5]
type = ChangeState
trigger1 = time = 300
value = 0
;-------------------------------------------------------------------------------

; Walk Before Match
[Statedef 22]
type    = S
physics = S
sprpriority = 0

[State 0]
type = varset
trigger1 = time = 1
var(50) = 0

[State 0]
type = posset
trigger1 = 1
y = 0

[State 0]
type = VelSet
trigger1 = Time = 0
y = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)/1.5

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)/1.5

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 22 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 22

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 23 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 23

[State 2, Ken]
type = ChangeAnim
trigger1 = command != "holdback"
trigger1 = command != "holdfwd"
trigger1 = Anim != 0
value = 0

[State 20, 2]
type = VelSet
trigger1 = command != "holdback"
trigger1 = command != "holdfwd"
x = 0

[State var]
type = VarSet
trigger1 = roundstate != 2
fvar(9) = floor(pos x)

[State F]
type = posset
trigger1 = roundstate = 2
trigger1 = fvar(9) != 0
x = fvar(9)

[State F]
type = varset
trigger1 = roundstate = 2
fvar(9) = 0

[State F]
type = changestate
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command ="holdback"),22,0)

; Introduction
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeState
trigger1 = RoundState = 0
value = 191

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nomusic

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 22

; Introduction
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro


[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem=9
value = S100,89
volume = 255
channel = 5

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 22

;----------------------------------------------------------------------------
[Statedef 11040]
type = S
movetype = I
velset = 5,0
anim = 999
[State 11040, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 999
[State 11040, 2]
type = AssertSpecial
trigger1 = AnimTime < 1000
flag = Intro
[State 11040, 2]
type = PlayerPush
trigger1 = Time >= 0
value = 0
[State 11040, 6]
type = AfterImage
trigger1 = time = 50
time = 110
length = 17
PalBright   =   0,  0,  0
PalContrast = 148,148,148
PalAdd      =   0,  0,  0
PalMul      =  0.9,0.9,0.9
FrameGap = 4
Trans = Add1
[State 11040, 2]
type = Changeanim
trigger1 = Time = 50
value = 3891
[State 11040, 2]
type = posadd
trigger1 = Time = 50
x = 240
[State 11040, 2]
type = turn
trigger1 = Time = 50
[State 11040, 2]
type = velset
trigger1 = Time = 50
x = 10
[State 11040, 2]
type = VelAdd
trigger1 = Time > 50
trigger1 = Time < 80
x = -.2
[State 11040, 3]
type = AssertSpecial
trigger1 = Time >=0
trigger1 = Time <=1050
flag = NoMusic
[State 11040, 8]
type = PlaySnd
trigger1 = time = 50
value = 25,3
[State 210, 3]
type = Turn
trigger1 = time = 70
[State 11040, 3]
type = Velset
trigger1 = Time = 70
x = -4
[State 11040, 2]
type = VelAdd
trigger1 = Time > 70
trigger1 = time < 103
x = .3
[State 11040, 4]
type = Velset
trigger1 = Time = 103
x = 0
[State 11040, 2]
type = Changeanim
trigger1 = Time = 103
value = 3893
[State 7800, 3]
type = BGPalfx
trigger1 = time = 53
invertall = 1
supermove = 1
time = 76
add = 0,-255,-255
sinadd = 400,400,400,245
[State 1531, 5]
type = EnvColor
trigger1 = time = 127
value = 255,255,255
time = 70
[State 1531, 5]
type = Explod
trigger1 = time >= 127
trigger1 = TimeMod = 4, 3
trigger1 = time <= 180
trigger1 = random <= 500
Anim = 8008
scale = 1.3,1.3
pos = 30, -50
random = 100,50
ontop = 1
[State 1531, 5]
type = PlaySnd
trigger1 = time >= 127
trigger1 = TimeMod = 4, 3
trigger1 = time <= 180
trigger1 = random <= 500
value = 20,4
[State 1531, 5]
type = Explod
trigger1 = time >= 127
trigger1 = TimeMod = 4, 3
trigger1 = time <= 180
trigger1 = random <= 500
Anim = 8009
scale = 1.2,1.2
pos = 30, -50
random = 100,50
ontop = 1
[State 1531, 5]
type = PlaySnd
trigger1 = time >= 127
trigger1 = TimeMod = 4, 3
trigger1 = time <= 180
trigger1 = random <= 500
value = 100,0+(random%6)

[State 11040, 2]
type = Changeanim
trigger1 = Time = 180
value = 3892
[State 1531, 5]
type = Explod
trigger1 = time = 180
Anim = 9420
scale = 2,2
pos = 75, -60
ontop = 1
[State 1531, 5]
type = Explod
trigger1 = time = 180
Anim = 9300
scale = 2,2
pos = 75, -60
ontop = 1
[State 1531, 5]
type = PlaySnd
trigger1 = time = 178
value = S20,4
[State 1531, 5]
type = PlaySnd
trigger1 = time = 178
value = S20,2
[State 11040, 2]
type = posadd
trigger1 = Time = 180
x = -30

[State 11040, 5]
type = ChangeState
trigger1 = time = 300
value = 0
;---------------------------------------------------------------------------
; Introduction
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S8,8
volume = 255
persistent = 0


[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 22
;---------------------------------------------------------------------------
; Introduction
[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S8,8
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S8,8
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S8,8
volume = 0

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 22
;---------------------------------------------------------------------------
; Introduction
[Statedef 193]
type = S
ctrl = 0
anim = 193
velset = 0,0

[State 193, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 22
;---------------------------------------------------------------------------
;Intro 4
[Statedef 194]
type = S
ctrl = 0
anim = 9741
velset = 0,0
sprpriority = 3

[State 194, Helper]
type = Helper
trigger1 =  time = 0
helpertype = normal ;player
name =  "camera"
ID =  1944
stateno = 1944
pos = 152,0
postype = back    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermove =9999
pausemove =9999
size.xscale =0.7
size.yscale =0.7

[State 194, Changestate]
type = Changestate
trigger1 = time >= 206;numhelper(1944)=0 ;&& animelemtime(1)>=1
value = 0
;elem = 2
ignorehitpause = 1
persistent =1

;Introduction helper
[Statedef 1944]
type = S
Physics = N
ctrl = 0
anim =194
velset = 0,0
sprpriority =3

[State 1944, PlaySnd]
type = PlaySnd
trigger1 = animelem = 19
value = S0,6
volume = 255
channel=1

[State 1944, Landing Sound]
type = PlaySnd
trigger1 = animelem = 39
value = s1100,1

[State 1944, Landing Sound]
type = PlaySnd
trigger1 = anim = 106
value = s8100,0
persistent = 0

[State 1944, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1944, VelSet]
type = VelSet
trigger1 = animelem = 39
x = -8
y = 0

[State 1944, Landing Sound]
type = PlaySnd
trigger1 = animelem = 39
value = s100,6

[State 1944, Landing Sound]
type = PlaySnd
trigger1 = anim = 106
value = s100,0
persistent = 0

[State 1944, Landing Anim]
type = Explod
trigger1 = animelemtime(39) >= 0 && parentdist x >=0
anim = 8510
ID = 8030
pos = 15,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove = 9999
pausemove = 9999
scale = 0.7,0.7
sprpriority = -1
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
persistent =0

[State 1944, VelSet]
type = VelSet
trigger1 = animelemtime(39) >= 0 && parentdist x >=0
x = 0
y = 0

[State 1944, ChangeAnim]
type = Changeanim
trigger1 = animelemtime(39) >= 0 && parentdist x >=0
value = 105
;elem = 3
;ignorehitpause =
persistent =0

[State 1944, 4] ;Change to stand state
type = Destroyself
trigger1 = parent,stateno !=194
trigger2 = parent,movetype = H
trigger3 = (anim = 105) && (animtime = 0)
;trigger3 = animelemtime(33) >= 7

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------



;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 6
time = 30
freq = 100

[State 195, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S100,9
volume = 255
channel = -1

[State 195, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S100,100
volume = 255
channel = -1
persistent = 1

[State 195, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S100,100
volume = 255
channel = -1
persistent = 1


[State 195, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6000,36
volume = 255
channel = -1

[State 195, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6000,36
volume = 255
channel = -1
;---------------------------------------------------------------------------
;-----------------------------------------------------------------------------
;Hadouken
[StateDef 1202]
type = A
movetype= A
physics = A
juggle  = 0
;velset = 0,0
ctrl = 0
anim = 1202
poweradd = 20
sprpriority = 2

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(3) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 200, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 50, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8			;Time attacker pauses, time opponent shakes
sparkno = s8008
guard.sparkno=s910		;Spark anim no (Def: set above)
sparkxy = -10, -76		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = S100,38			;Sound to play on hit
guardsound = S100, 29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 12		;Time opponent is in hit state
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 12			;Time before opponent regains control in air
p2stateno = 225

[State 1100, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 11
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N

[State 1100, CtrlSet]
type = CtrlSet
trigger1 = animelem = 11
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 7
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 7
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 7
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = 7
y = 0



[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6000,50
volume = 255
channel = -1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6000,50
volume = 255
channel = -1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S12,8
volume = 255
channel = -1
;---------------------------------------------------------------------------
[Statedef 1200]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 1				;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 1200				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(4) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =





[State 200, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 23, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8			;Time attacker pauses, time opponent shakes
sparkno = s8008
guard.sparkno=s910		;Spark anim no (Def: set above)
sparkxy = -10, -76		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = S100,38			;Sound to play on hit
guardsound = S100, 29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 12		;Time opponent is in hit state
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 12			;Time before opponent regains control in air
p2stateno = 225




[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S100,101
volume = 255
channel = -1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S12,8
volume = 255
channel = -1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------
;------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
; See State 1020 for details
[Statedef 225]
type = A
movetype = H
physics = N
velset = 0,0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[State 1025, Anim] ;Custom animation
type = ChangeAnim
trigger1 = 1
value = 5017

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 226

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 226]
type    = A
movetype= H
physics = N

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[State 0, ]
type = AfterImageTime
trigger1 = 1
time = 15

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = Time = 0
value = 225

[State 0, ]
type = VelSet
trigger1 = 1
x = -15
ignorehitpause = 1

[State 1026, No scroll]
type = null;ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 10
trigger2 = time >= 300
value = 227

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 227]
type    = A
movetype= H
physics = N

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 10 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0
[State 1027, Anim]
type = ChangeAnim
trigger1 = 1
value = 5017

[State 1027, State]
type = ChangeState
trigger1 = time >= 0
value = 228

;------------------
; Hit by Fast Kung Fu Palm - bounce off wall
; (a custom gethit state)
[Statedef 228]
type = A
movetype = H
physics = N

[State 0, ]
type = ChangeAnim
trigger1 = Time = 0
value = 5070

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -8

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 0, HitBy]
type = HitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
value2 = S,NA
time = 9999

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Standing Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 200				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 200, 1]
type = HitDef
trigger1 = time=  0
attr = S, NA
damage    = 20
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 8,8
sparkno = s8008
guard.sparkno = s910
sparkxy = -10,-70
hitsound = S100,38
guardsound = S100,29
ground.type = High
ground.slidetime = 5
ground.hittime  = 11
ground.Velocity = -3
air.Velocity = -1,-3


[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S12,8
volume = 255
channel = -1



;---------------------------------------------------------------------------
; Standing Medium Punch
; CNS difficulty: easy
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 65
ctrl = 0
velset = 0,0
anim = 210

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 201, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage    = 40
animtype = Medium
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 9,9
sparkno = s8008
guard.sparkno = s910
sparkxy = -10,-70
hitsound = S100,40
guardsound = S100,29
ground.type = High
ground.slidetime = 10
ground.hittime  = 15
ground.Velocity = -4
air.Velocity = -2,-3

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 210, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,19
volume = 255
channel = -1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S12,9
volume = 255
channel = -1
;--------------------------------;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[StateDef 215]
type = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3101
poweradd = 20
sprpriority = 3

[State 0, CtrlSet]
type = CtrlSet
trigger1 = 1
value = 0
;ignorehitpause =
;persistent =


[State 3300, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 20
length = 10
framegap = 3
palcolor = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 10
y = 0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 9
value = S5,8
volume = 255
channel = -1


[State 229,3]
type = HitDef
trigger1 = time = 0
trigger2 = animelem = 7
attr = S, NA
damage    = 40
animtype = Medium
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 9,15
sparkno = s8008
guard.sparkno = s910
sparkxy = -10,-70
hitsound = S100,41
guardsound = S100,29
ground.type = High
ground.slidetime = 10
ground.hittime  = 15
ground.Velocity = -4
air.Velocity = -2,-3


[State 20010, end]
type = ChangeState
trigger1 = Time = 32
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
; Standing Strong Punch
; CNS difficulty: easy
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 65
ctrl = 0
velset = 0,0
anim = 220

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 202, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage    = 60
animtype = Heavy
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 10,10
sparkno = s8008
guard.sparkno = s910
sparkxy = -10,-62
hitsound = S100,42
guardsound = S100,29
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.Velocity = -5
air.Velocity = -4,-3

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,20
volume = 255
channel = -1


[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; Standing Light Kick
; CNS difficulty: easy
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 22
ctrl = 0
velset = 0,0
anim = 230

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(1) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage    = 20
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 8,8
sparkno = s8009
guard.sparkno = s910
sparkxy = -25,-45
hitsound = S100,41
guardsound = S100,29
ground.type = Low
ground.slidetime = 5
ground.hittime  = 11
ground.Velocity = -3
air.Velocity = -1,-3

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S12,8
volume = 255
channel = -1

;---------------------------------------------------------------------------
; Standing Medium Kick
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 65
ctrl = 0
velset = 4,0
anim = 240

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0



[State 201, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage    = 40
animtype = Medium
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 9,9
sparkno = s8009
guard.sparkno = s910
sparkxy = -10,-20
hitsound = S100,40
guardsound = S100,29
ground.type = low
ground.slidetime = 10
ground.hittime  = 15
ground.Velocity = -4
air.Velocity = -2,-3

[State 240, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,19
volume = 255
channel = -1



[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S12,9
volume = 255
channel = -1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S12,9
volume = 255
channel = -1

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Standing Medium Kick
; CNS difficulty: easy
[Statedef 245]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 65
ctrl = 0
velset = 0,0
anim = 245

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 5.5
y = 0
;ignorehitpause =
;persistent =

[State 225, hit]
type=hitdef
trigger1=time=0
trigger2=animelem = 5
attr = S, NA
damage    = 40
animtype = Medium
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 9,9
sparkno = s8008
guard.sparkno = s910
sparkxy = -10,-20
hitsound = S100,41
guardsound = S100,29
ground.type = low
ground.slidetime = 10
ground.hittime  = 15
ground.Velocity = -4
air.Velocity = -2,-3


[State 240, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,19
volume = 255
channel = -1



[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S12,9
volume = 255
channel = -1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S12,9
volume = 255
channel = -1

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Strong Kick
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd=60
ctrl = 0
velset = 9,0
anim = 250

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(3) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0

[State 202, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage    = 70
animtype = Heavy
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12,12
sparkno = s8009
guard.sparkno = s910
sparkxy = -10,-80
hitsound = S100,41
guardsound = S100,29
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.Velocity = -6
air.Velocity = -4,-5

;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

[state a]
type = targetstate
triggerall = movehit=1
triggerall = numtarget
triggerall = target,movetype = H
triggerall = target,stateno != 550
triggerall = !Target,Ishelper
trigger1 = target,statetype = A
trigger2 = numtarget(200)
value = 550
ignorehitpause = 1
persistent = 3

[State 250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;(ENEMY)蜷ｹ縺埼｣帙ｰ縺玲判謦繝ｻ繝偵ャ繝医せ繝医ャ繝
[Statedef 550]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[state a]
type = turn
triggerall = time = 0
trigger1 = facing=1
trigger1 = GetHitVar(xvel) >0
trigger2 = facing=-1
trigger2 = GetHitVar(xvel) <0

[state a]
type = playerpush
trigger1 = 1
value = 0

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
trigger1 = selfanimexist(5030)
value = 5030

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1


[state a]
type = changestate
trigger1 = HitShakeOver
value = 551

[State 1000, 0]
type = null;HitOverride
trigger1 = enemy,stateno != 291
attr = SCA,NA,SA,HA
slot = 0
stateno = 550
time = 1


;---------------------------------------------------------------------------
;(ENEMY)蜷ｹ縺埼｣帙ｰ縺玲判謦繝ｻ蜷ｹ縺埼｣帙ｳ
[Statedef 551]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

;---------------------[騾溷ｺｦ]
[state a]
type = velset
trigger1 = time = 0
x = -5.5
y = -2.9


[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[state a]
type = velset
trigger1 = time = 1
trigger1 = GetHitVar(chainid) = 1000
x = -2
y = -2.1

[state a]
type = veladd
trigger1 = 1
y = .3
;---------------------[繧｢繝九Γ繝ｼ繧ｷ繝ｧ繝ｳ]
[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050


[state a]
type = playerpush
trigger1 = 1
value = 0

;---------------------[繧ｹ繝繝ｼ繝育ｧｻ陦珪
[state a]
type = changestate
trigger1 = BackEdgeDist <= 15
trigger2 = time = 200
trigger3 = frontEdgeDist <= 15
value = 552

[state a]
type = selfstate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100


;---------------------------------------------------------------------------
;(ENEMY)蜷ｹ縺埼｣帙ｰ縺玲判謦繝ｻ螢√ヲ繝繝
[Statedef 552]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

;---------------------[繧｢繝九Γ繝ｼ繧ｷ繝ｧ繝ｳ]
[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5030

;---------------------[貍泌ｺ]
[State 1];繧ｫ繝｡繝ｩ蝗ｺ螳
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -4
freq = 95
phase = 95

[state ]
type=angledraw
trigger1=1
value=-90*(anim=551)
[state ]
type=offset
trigger1=anim=551
trigger1 = time<5
y=const(size.mid.pos.y)

;---------------------[繧ｹ繝繝ｼ繝育ｧｻ陦珪
[state ]
type=angledraw
trigger1 = time>=5
value=0
[state a]
type = changestate
trigger1 = time>=5
value = 553


;---------------------------------------------------------------------------
;(ENEMY)蜷ｹ縺埼｣帙ｰ縺玲判謦繝ｻ關ｽ荳
[Statedef 553]
type    = A
movetype= H
physics = N
;velset = 0,0
sprpriority = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;---------------------[繧｢繝九Γ繝ｼ繧ｷ繝ｧ繝ｳ]
[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 820, 1]
type = null;ChangeAnim
Trigger1 = Time = 0
trigger1 = selfanimexist(5070)
value = 5070

;---------------------[騾溷ｺｦ]

[state a]
type = velset
trigger1 = time = 0
x = 2
y = -4.7

[state a]
type = velset
trigger1 = time = 0
trigger1 = GetHitVar(fall.envshake.phase)=3010
x = 4
y = -3.7

[state a]
type = veladd
trigger1 = 1
y = .4

;---------------------[貍泌ｺ]
[State 1];繧ｫ繝｡繝ｩ蝗ｺ螳
type = screenbound
trigger1 = 1
value = 1
movecamera = 1


[State 821, 3]
type = SelfState
triggerall = Pos Y >= 0
trigger1 = Vel Y > 0
trigger2 = time>6
value = 5100

;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 5052]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5052, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5052

[State 5052, VelSet]
type = VelSet
trigger1 = AnimElem = 2
y = ifelse(pos y <=-50,-30,-50)

[State 5052, PlaySnd]
type = VelAdd
trigger1 = AnimElem = 2,>= 0
y = .44

[State 5052, ChangeState]
type = SelfState
trigger1 = Time > 27
trigger1 = Vel Y >= 0
value = 5040
ctrl = 1
p2stateno = 5052

; Opponent Launched
[Statedef 5051]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5051

[State 5051, VelSet]
type = VelSet
trigger1 = AnimElem = 2
y = ifelse(pos y <=-30,-11,-15)

[State 5051, PlaySnd]
type = VelAdd
trigger1 = AnimElem = 2,>= 0
y = .44

[State 5051, ChangeState]
type = SelfState
trigger1 = Time > 27
trigger1 = Vel Y >= 0
value = 5040
ctrl = 1
;---------------------------------------------------------------------------
; Crouching Light Punch
; CNS difficulty: easy
; Description: Simple crouching attack. The HitDef's guardflag parameter
;     is set to "L", meaning that the move can only be guarded low
;     (crouching), and not by standing or jumping opponents.
;     Like for all light attacks, it's a good idea to keep the slidetime
;     and hittime parameters at a smaller number, so the opponent isn't
;     stunned for too long. For all crouching attacks you have to
;     remember to set the attr parameter to indicate that it is crouching
;     attack. In this case, "C, NA" stands for "crouching, normal attack".
;     The HitDef's priority is set at 3, instead of the default of 4,
;     so this attack has a lower priority than most others, meaning the
;     player will get hit instead of trading hits with the opponent if
;     their attack collision boxes (Clsn1) intersect each other's Clsn2
;     boxes at the same time.
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 15
ctrl = 0
anim = 400

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = C, NA
damage    = 20
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 8,8
sparkno = s8008
guard.sparkno = s910
sparkxy = -20,-45
hitsound = S100,38
guardsound = S100,29
ground.type = Low
ground.slidetime = 5
ground.hittime  = 11
ground.Velocity = -3
air.Velocity = -1,-3

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S12,8
volume = 255
channel = -1

;---------------------------------------------------------------------------
; Crouching Medium Punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 50
ctrl = 0
anim = 410

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 410, 1]
type = HitDef
trigger1 = time = 0
attr = C, NA
damage    = 40
animtype = Medium
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 9,9
sparkno = s8008
guard.sparkno = s910
sparkxy = -20,-45
hitsound = S100,41
guardsound = S100,29
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.Velocity = -4
air.Velocity = -2,-3

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 410, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,19
volume = 255
channel = -1

[State 410, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S12,9
volume = 255
channel = -1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S12,9
volume = 255
channel = -1
;---------------------------------------------------------------------------
; Crouching Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 60
ctrl = 0
anim = 420

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(3) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 0, VelAdd]
type = Velset
triggerall = prevstateno != 100
trigger1 = time = 0
x = 7

[State 430, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 60, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8			;Time attacker pauses, time opponent shakes
sparkno = S8009
guard.sparkno=s910			;Spark anim no (Def: set above)
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = S100,41		;Sound to play on hit
guardsound = S100, 29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 12		;Time opponent is in hit state
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3
p2stateno = 5051
envshake = 60
envshake.time = 15

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,20
volume = 255
channel = -1


[State 420, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 22
ctrl = 0
anim = 430

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = C, NA
damage    = 20
animtype = Light
hitflag = MALFD
guardflag = LA
priority = 3, Hit
pausetime = 8,8
sparkno = s8009
guard.sparkno = s910
sparkxy = -15,0
hitsound = S100,42
guardsound = S100,29
ground.type = Low
ground.slidetime = 5
ground.hittime  = 11
ground.Velocity = -2,-1.2
air.Velocity = -1,-4



[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S12,8
volume = 255
channel = -1

;---------------------------------------------------------------------------
; Crouching Medium Kick
; CNS difficulty: easy
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 22
ctrl = 0
anim = 440

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0



[State 201, 1]
type = HitDef
trigger1 = time = 0
attr = C, NA
damage    = 40
animtype = Medium
guardflag = L
hitflag = MAF
priority = 4, Hit
pausetime = 9,9
sparkno = s8009
guard.sparkno = s910
sparkxy = -15,0
hitsound = S100,40
guardsound = S100,29
ground.type = low
ground.slidetime = 10
ground.hittime  = 15
ground.Velocity = -4
air.Velocity = -2,-3
down.Velocity = 0,0

[State 440, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,19
volume = 255
channel = -1

[State 440, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S12,9
volume = 255
channel = -1

;---------------------------------------------------------------------------
; Crouch Strong Kick
; CNS difficulty: easy
; Description: This move uses "Trip" for the "ground.type" parameter in
;     its HitDef. It's a special type that puts the opponent in a tripped
;     animation as he falls. Also, the hitflag parameter in the HitDef
;     is set to "MAFD". The "D" indicates that a downed opponent can be
;     hit by the attack.
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 70
ctrl = 0
anim = 450

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 0, VelSet]
type = VelSet
trigger1 = prevstateno  = 1200 && time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, PosSet]
type = PosSet
trigger1 = prevstateno  = 1200 && time = 1
y = 0
ignorehitpause = 1
persistent = 0


[State 450, VelMul, corrida]
type = Velset
trigger1 = animelem = 2
x = ifelse(var(25)= 1,5,ifelse(var(25)=2,10,15))

[State 450, VelMul, corrida]
type = Velset
trigger1 = animelem = 3
x = 1

[State 450, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
trigger2 =  AnimElem = 6
value = 8400,2

[State 202, 1]
type = HitDef
trigger1 = time = 0
attr = C, NA
damage    = 50
animtype = Heavy
guardflag = L
hitflag = MAF
priority = 4, Hit
pausetime = 10,10
sparkno = s8009
guard.sparkno = s910
sparkxy = -15,0
hitsound = S100,41
guardsound = S100,29
ground.type = trip
ground.slidetime = 15
ground.hittime  = 20
ground.Velocity = -1,-4.5
air.Velocity = -1,-4
air.type = trip
fall.yvelocity = -5
fall.xvelocity = -5
down.bounce = 1
fall.animtype = back
fall = 1
air.fall = 1


[State 450, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,21
volume = 255
channel = -1

[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S12,10
volume = 255
channel = -1
;---------------------------------------------------------------------------
; Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 11
ctrl = 0
anim = 600

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 20
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8,8
sparkno = s8008
guard.sparkno = s910
sparkxy = -10,-70
hitsound = S100,38
guardsound = S100,29
ground.type = High
ground.slidetime = 5
ground.hittime  = 11
ground.Velocity = -3
air.Velocity = -1,-3

[State 600, 5]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S12,8
volume = 255
channel = -1

;---------------------------------------------------------------------------
; Jump Medium Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 65
ctrl = 0
anim = 610

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 201, 1]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 40
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 9,9
sparkno = s8008
guard.sparkno = s910
sparkxy = -10,-60
hitsound = S100,40
guardsound = S100,29
ground.type = High
air.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.Velocity = -4
air.Velocity = -2,-3

[State 610, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,19
volume = 255
channel = -1

[State 610, 5]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S12,9
volume = 255
channel = -1

;---------------------------------------------------------------------------
; Jump Strong Punch
; CNS difficulty: easy
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 70
ctrl = 0
anim = 620

[State 650, 1]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 60
animtype = Heavy
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 12,12
sparkno = s8009
guard.sparkno = s910
sparkxy = -10,-55
hitsound = S100,44
guardsound = S100,29
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.Velocity = -5
air.type = Low
air.Velocity = -30,3.5
air.fall = 1


[State 620, ScreenBound]
type = ScreenBound
trigger1 = animelem = 2
value = 1
movecamera = 30,-8

[State 3407, 5]
type = ScreenBound
trigger1 = MoveHit
value = 0


[State 620, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 620, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,20
volume = 255
channel = -1

[State 620, 5]
type = CtrlSet
trigger1 = animelem = 8
value = 1

;---------------------------------------------------------------------------
; Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 20
ctrl = 0
anim = 630

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(2) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 20
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 8,8
sparkno = s8009
guard.sparkno = s910
sparkxy = -10,-55
hitsound = S100,42
guardsound = S100,29
ground.type = Low
air.type = High
ground.slidetime = 5
ground.hittime  = 11
ground.Velocity = -3
air.Velocity = -1,-3



[State 630, 5]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S12,8
volume = 255
channel = -1

;---------------------------------------------------------------------------
; Jump Medium Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 65
ctrl = 0
anim = 640

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = animelemtime(1) >= 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 201, 1]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 40
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 9,9
sparkno = s8009
guard.sparkno = s910
sparkxy = -10,-55
hitsound = S100,40
guardsound = S100,29
ground.type = High
ground.slidetime = 10
ground.hittime  = 15
ground.Velocity = -4
air.Velocity = -3,-3

[State 640, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,19
volume = 255
channel = -1


[State 640, 5]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S12,9
volume = 255
channel = -1
;---------------------------------------------------------------------------
; Jump Strong Kick
; CNS difficulty: easy
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 90
ctrl = 0
anim = 650

[State 20000];相殺
type = ReversalDef
trigger1 = !movecontact
trigger1 = p2movetype = A
trigger1 = 1
attr = S,NA
reversal.attr = SCA,SA,NA
pausetime = 20,20
sparkno = -1
hitsound = S19090,0
NumHits = 0
ID = 20000

[State 20000];相殺エフェクト
type = Explod
trigger1 = numtarget(20000) = 1
anim = 6260
postype = p1
pos = 62, -58
ownpal = 1
scale = 1,1
sprpriority = 10
pausemovetime = 100
supermovetime = 100
ignorehitpause=1
persistent=0

[State 20000];相殺時揺らす
type = EnvShake
trigger1 = numtarget(20000) = 1
time = 20
freq = 160
ampl = -4
ignorehitpause=1
persistent=0

[State 20000];相殺判定消す
type = TargetDrop
trigger1 = numtarget(20000) = 1
ID = 20000
ignorehitpause=1
persistent=0


[State 650, 1]
type = HitDef
trigger1 = Time = 0
trigger2 = animelem = 2
attr = A, NA
damage    = 65
animtype = Heavy
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 12,12
sparkno = s8009
guard.sparkno = s910
sparkxy = -10,-55
hitsound = S100,42
guardsound = S100,29
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.Velocity = -5
air.type = Low
air.Velocity = -30,3.5
air.fall = 1
id = 4+64



[State 650, ScreenBound]
type = ScreenBound
trigger1 = animelem = 2
value = 1
movecamera = 30,-8

[State 650, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,21
volume = 255
channel = -1


[State 3407, 5]
type = ScreenBound
trigger1 = MoveHit
value = 0


[State 650, 5]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S12,10
volume = 255
channel = -1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S12,10
volume = 255
channel = -1
;---------------------------------------------------------------------------
; Launch Hard Kick
[Statedef 229]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 229
poweradd = 50
sprpriority = 2

[state 229,1]
type = posset
trigger1 = time = 0
y = 0

[state 229,2]
type = velset
trigger1 = time = 0 && prevstateno = 100
x = 4
y = 0

[State 229,3]
type = HitDef
trigger1 = time = 8
attr = S, NA
animtype = up
guard.sparkno=s910
damage   = 134
hitflag = MAFD
guardflag = MA
pausetime = 6,9
sparkno = S8009
sparkxy =  -5,-80
hitsound = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 0
yaccel = 0.40
ground.hittime  = 75
ground.cornerpush.veloff = 0
air.hittime = 15
ground.velocity = 0, -14.2
guard.velocity = -9
air.velocity = 0,-13.5
airguard.velocity = -5,-1
p2stateno = 230
down.velocity = -3, -5

[state 229,4]
type = varset
trigger1 = command != "hold_z"
v = 1
value = 0

[state 229,5]
type = playsnd
trigger1 = animelem = 3
value = 0,1

[state 229,6]
type = playsnd
trigger1 = time = 10
value = 10,0

[state 229,7]
type = changestate
triggerall = MoveContact && MoveHit && command = "holdup" && time > 0
trigger1 = animelem = 6 || animelem = 7 || animelem = 8
ignorehitpause = 1
value = 90

[State 229,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Launched by Hard Kick
[Statedef 230]
type    = S
movetype= H
physics = N
velset = 0,0

[State 230,1]
type = ChangeAnim
trigger1 = Time = 0
value = 5012

[State 230,2]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 230,3]
type = StateTypeSet
trigger1 = Time = 0 && GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = A

[State 230,4]
type = ChangeState
trigger1 = HitShakeOver
value = 231
;---------------------------------------------------------------------------
; Launched (cont)
[Statedef 231]
type    = A
movetype= H
physics = N
ctrl = 0

[State 231,1]
type = ChangeAnim
trigger1 = Time = 0 && (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)

[State 231,2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 231,3]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 231,4]
type = ChangeState
trigger1 = (Time = 15)
value = 232
;---------------------------------------------------------------------------
;Launched (cont)
[Statedef 232]
type    = A
movetype= H
physics = N

[State 232,1]
type = ChangeAnim
trigger1 = Time = 0 && SelfAnimExist(5035) && (Anim != [5051,5059]) && Anim != 5090
value = 5035

[State 232,2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 232,3]
type = ChangeState
trigger1 = HitOver || AnimTime = 0
trigger2 = Vel Y > 0 && Pos Y >= 10
trigger3 = Time = 0 && Anim != 5035
value = 233
;---------------------------------------------------------------------------
; Launched (end)
[Statedef 233]
type    = A
movetype= H
physics = N

[State 233,1]
type = ChangeAnim
trigger1 = AnimTime = 0 && Anim = 5035
trigger2 = Time = 0 && Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069]) && Anim != 5090
value = 5050

[State 233,2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 233,3]
type = SelfState
triggerall = Alive = 1
trigger1 = (Time = 15) || (Vel Y >= 0)
value = 5040
ctrl = 1

[State 233,4]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 233,5]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Standing Light Kick
; CNS difficulty: easy
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 30
ctrl = 0
velset = 0,0
anim = 1000

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 6
v = 46     ;fv =
value = 100
;ignorehitpause =
;persistent =


[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 6
v = 12     ;fv =
value = -100
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 274,0
volume = 255
channel = 2
persistent = 0



[State 0, Helper]
type = Helper
triggerall = facing = 1
;triggerall = numhelper(1050) < 1
trigger1 = AnimElem = 6
helpertype = normal ;player
name = "nail1"
ID = 1050
stateno = 1050
pos = 760,-420
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .4
size.yscale = .4

[State 0, Helper]
type = Helper
triggerall = facing = -1
;triggerall = numhelper(1050) < 1
trigger1 = AnimElem = 6
helpertype = normal ;player
name = "nail1"
ID = 1050
stateno = 1050
pos = 0,-50
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .4
size.yscale = .4


[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =




[State 20010, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,102
volume = 255
channel = -1

[State 20010, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,102
volume = 255
channel = -1

[State 20010, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S100,32
volume = 255
channel = -1

[State 20010, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
[Statedef 1050]
type = S
movetype = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1051
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

[State 0, DestroySelf]
type = DestroySelf
trigger1 = enemy,Hitdefattr = SCA,HA,HT
ignorehitpause = 1
;persistent =
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Standing Light Kick
; CNS difficulty: easy
[Statedef 1051]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 9999
sprpriority = 3

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
value2 = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
;ignorehitpause =
;persistent =

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal ;player
name = "circle"
ID = 1053
stateno = 1053
pos = -10,-98
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .7
size.yscale = .7
;size.ground.back =
;size.ground.front =
;size.air.back =
;size.air.front =
;size.height =
;size.proj.doscale =
;size.head.pos = ,
;size.mid.pos = ,
;size.shadowoffset =
;ignorehitpause =
;persistent =

[State 0, Helper]
type = Helper
triggerall = Rootdist X = [-215,215]
triggerall = Rootdist Y = [-90,205]
triggerall = numhelper(1054) < 1
trigger1 = root,stateno = [70000,70040]
helpertype = normal ;player
name = "circle2"
ID = 1054
stateno = 1054
pos = -10,-98
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .7
size.yscale = .7



[State 0, Explod]
type = Explod
trigger1 = Time = 0
anim = 51502
ID = 51502
pos = -10,-100
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 9999999
pausemovetime = 0
scale = 1.5,1.5
sprpriority = -3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
;ignorehitpause =
;trans =
;persistent =
;supermove = 0
;pausemove = 0

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 150
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Rootdist Y = [150,165] ;155
v = 13    ;fv =
value = 1
persistent = 99

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Rootdist Y = [150,165]
v = 14    ;fv =
value = 1
persistent = 99

;air jumpup
[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Root,pos Y >= -281  ; [-150,150]
v = 15    ;fv =
value = 1
persistent = 99

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Rootdist Y = [150,165]
v = 16    ;fv =
value = 1
persistent = 99

;air jumpup
[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Root,pos Y >= -281
v = 17    ;fv =
value = 1
persistent = 99

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Rootdist Y = [150,165]
v = 18   ;fv =
value = 1
persistent = 99

;air jumpup
[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Root,pos Y >= -261
v = 19    ;fv =
value = 1
persistent = 99

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Rootdist Y = [150,165]
v = 20   ;fv =
value = 1
persistent = 99

;air jumpup
[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Root,pos Y >= -281
v = 21    ;fv =
value = 1
persistent = 99

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Rootdist Y = [150,165] ;155
v = 22    ;fv =
value = 1
persistent = 99

;air jumpup
[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Root,pos Y >= -281
v = 23    ;fv =
value = 1
persistent = 99

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Rootdist Y = [150,165]
v = 24    ;fv =
value = 1
persistent = 99

;air jumpup
[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Root,pos Y >= -281
v = 25    ;fv =
value = 1
persistent = 99

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Rootdist Y = [150,165]
v = 26    ;fv =
value = 1
persistent = 99

;air jumpup
[State 0, ParentVarSet]
type = ParentVarSet
triggerall = p2movetype != A && root,movetype != H
triggerall = root,statetype = A
;triggerall = !rootdist Y < 155
trigger1 = Rootdist X = [-150,150] ;Rootdist X >= -70 && Rootdist X <= 70
trigger1 = Root,pos Y >= -281
v = 27    ;fv =
value = 1
persistent = 99

[State 0, ChangeState]
type = ChangeState
triggerall = !win
triggerall = !lose
triggerall = enemy,Hitdefattr != SCA,HA,HT
trigger1 = root,stateno = 1400 && root,anim = 1400
trigger2 = root,stateno = 1300 && root,anim = 1300
trigger3 = root,stateno = 1496 && root,anim = 1496
trigger4 = root,stateno = 1498 && root,anim = 1498
trigger5 = root,stateno = 1500 && root,anim = 1500
trigger6 = root,stateno = 1600 && root,anim = 1600
value = 71015
ctrl = 0
;anim =
;ignorehitpause =
;persistent =


[State 0, ChangeState]
type = ChangeState
triggerall = !win
triggerall = !lose
triggerall = enemy,movetype != H
triggerall = root,stateno != 1100
triggerall = root,stateno != 1200
triggerall = root,stateno != 1400
triggerall = root,stateno != 1300
triggerall = root,stateno != 1496
triggerall = root,stateno != 1498
triggerall = root,stateno != 1500
triggerall = root,stateno != 1600
trigger1 = enemy,Hitdefattr = SCA,HA,HT
value = 71000
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

;---------------------------------------------------------------------------
[Statedef 9300]
type=S
physics=S
movetype=I
anim=740
ctrl=0
velset=0,0

[State 9300, power]
type=poweradd
triggerall=anim=740&&power<powermax
trigger1=var(59)<=0&&(command="hold_b"&&command="hold_y")
trigger2=var(59)>=1
value=ifelse(time>=220,28,ceil(time/8))

[State 9300, anim]
type=changeanim
triggerall=anim=740&&animelemtime(2)>=0
trigger1=var(59)<=0&&(command!="hold_b"||command!="hold_y")
trigger2=power>=powermax||roundstate!=2
trigger3=var(59)>=1&&(inguarddist||p2movetype=A||p2dist x<160)
value=741

[State 9300, PlaySnd]
type = PlaySnd
trigger1 =animelem = 3
value = S100,48
volume = 255
channel = -1

[State 9300, PlaySnd]
type = PlaySnd
trigger1 =anim = 741
value = S100,45
volume = 255
channel = -1

[State 9300, shake1]
type=envshake
trigger1=anim=740&&!(time%4)
time=4
freq=80
ampl=12

[State 9300, shake2]
type = envshake
trigger1=anim=741
trigger2 = animelem = 1
time = 15
freq=80
ampl=-15

[State 9300, PlaySnd]
type = PlaySnd
trigger1 =animelem = 2
value = S100,37
volume = 255
channel = -1


[State 9300, Explod]
type = Explod
trigger1 = animelem = 1
anim = 30047
ID = 30047
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1


[State 9300, end]
type=changestate
trigger1=anim=741&&!animtime
value=0
ctrl=1
;---------------------------------------------------------------------------

;----------------------------------------------------------------------------
;---------------------------------------------------------------------------
;----------------------------------------------------------------------------
[Statedef 1500]
type    = A
movetype= A
physics = N
juggle = 2
ctrl = 0
;anim = 1502
velset = 0,0
poweradd = ifelse(Var(22) = 1,0,138)
sprpriority = 2

[State 1500, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 1502


[State 1500, PlaySnd 1];grunt
type = PlaySnd
trigger1 = AnimTime = 0
value = 30,0
channel = 0

[State 1500, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1503

;---------------------------------------------------------------------------
; Diving Rocket Kuujin Kyaku (diving)

[Statedef 1503]
type    = A
movetype= A
physics = N
juggle = 2
ctrl = 0
anim = 1503
velset = 10,10
sprpriority = 2

[State 1503, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 1503

[State 1503, HitDef 1]
type = HitDef
triggerall = P2StateType != L
trigger1 = (Time%2 = 0) && (Pos Y < -5) && (EnemyNear, StateType != A)
trigger2 = (Time%2 = 0) && (Pos Y < -5) && (EnemyNear, StateType = A) && (HitCount < 5)
attr = A, SA
damage = ifelse(Var(22) = 1,14,28),3
getpower = ifelse(Var(22) = 1,0,(ceil(28*.7))),ifelse(Var(22) = 1,0,(ceil((28*.7)/2)))
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 10,10
sparkno = S8009
guard.sparkno=s910
sparkxy = 10,-20
hitsound = S20,1
guardsound = S100,29
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -9.3
guard.velocity = -10
airguard.velocity = -5,0
air.type = Low
air.velocity = 0,-7
down.velocity = -4,-4
ground.cornerpush.veloff = 0
yaccel = 0.5
palfx.time = 25
palfx.color = 0
palfx.add = 40,-180,100
palfx.sinadd = 20,20,40,10
p2facing = 1

[State 1503, HitDef 2]
type = HitDef
triggerall = P2StateType = L
trigger1 = (Time%2 = 0) && (Pos Y < -5) && (HitCount < 2)
attr = A, SA
damage = ifelse(Var(22) = 1,20,40),0
getpower = ifelse(Var(22) = 1,0,(ceil(40*.7))),ifelse(Var(22) = 1,0,(ceil((40*.7)/2)))
animtype = Medium
guardflag = MA
hitflag = FD
priority = 5, Hit
pausetime = 10,10
sparkno = S8008
guard.sparkno=s910
sparkxy = 10,-20
hitsound = S20,4
guardsound = S100, 29
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -9.3
guard.velocity = -10
airguard.velocity = -5,0
air.type = Low
air.velocity = -4,-4
down.velocity = -4,-4
ground.cornerpush.veloff = 0
yaccel = 0.5
palfx.time = 25
palfx.color = 0
palfx.add = 40,-180,100
palfx.sinadd = 20,20,40,10
p2facing = 1

[State 1503, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > -5)
value = 1505

;---------------------------------------------------------------------------
; Diving Rocket Kuujin Kyaku A (landing)

[Statedef 1505]
type    = S
movetype= I
physics = S
ctrl = 0
;anim = 1505
velset = 0,0
sprpriority = 2

[State 1505, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 1505


[State 1505, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0



[State 1501, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------------------------------------------
;---Crouchingparry---
[Statedef 701]
type=C
physics=C
movetype=I
anim=701
velset=0,0
ctrl=0
sprpriority=2
poweradd=1000

[State 701, pause]
type=pause
trigger1=!time
time=10
movetime=10
[State 701, nhb]
type=nothitby
trigger1=time<=10
time=1
value=SCA
[State 701, stop]
type=posfreeze
trigger1=time<=10
value=1

[State 701, blueflash]
type=palfx
trigger1=!time&&var(21)>=0
add=0,50,255
sinadd=0,-50,-255,60
time=15
[State 701, redflash]
type=palfx
trigger1=!time&&var(21)<0
add=255,0,0
sinadd=-255,0,0,60
time=15

[State 701, snd]
type=playsnd
trigger1=!time
value=3,(random<500)
channel=0
[State 701, snd]
type=playsnd
trigger1=!time
value=7,3

[State 18100, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,80
volume = 255
channel = -1

[State 18100, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,81
volume = 255
channel = -1

[State 700, spark]
type=explod
trigger1=animelem=2
anim=7200
ID=7200
sprpriority=5
postype=p1
pos=19,-98
pausemovetime=60
ownpal=1

[State 701, asserts]
type=assertspecial
trigger1=1
flag=nowalk
flag2=nostandguard
flag3=nocrouchguard
[State 701, ctrl]
type=ctrlset
trigger1=time>10
value=1
[State 701, end]
type=changestate
trigger1=!animtime
value=11
ctrl=1
;----------------------------------------------------------------------------
; ブロッキング
[Statedef 18000]
type = S　
movetype= I
physics = S
juggle = 0
ctrl = 0

[State 20, 3]
type = ChangeAnim
Triggerall = var(28) = 0
trigger1 = Time = 0
value = 18000

[State 20, 3]
type = ChangeAnim
Triggerall = var(28) = 1
trigger1 = Time = 0
value = 20020

[State 1700, 1]
type = VelSet
Triggerall = var(28) = 0
trigger1 = AnimElem = 1
x = 2.6

[state 9500,1]
type = ReversalDef
trigger1 = Time = 0
attr = S,NT
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 0,15
sparkno = -1
sprpriority = 2
p1stateno = 18100


[State 1030, 4]
type = ChangeState
trigger1 = animTime = 0
value = 20
ctrl = 1

[Statedef 20022]
type = S　
movetype= I
physics = S
juggle = 0
ctrl = 0

[State 20, 3]
type = ChangeAnim
Triggerall = var(28) = 1
trigger1 = Time = 0
value = 20023

[State 1030, 4]
type = ChangeState
trigger1 = animTime = 0
value = 20
ctrl = 1
;----------------------------------------------------------------------------
;ブロッキング2
[Statedef 18100]
type = S
movetype= I
physics = N
anim = 18100
velset = -0.05,0

[State 1031, 1]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 1031, 2]
type = PowerAdd
trigger1 = Time = 0
value = 150

[State 9550, 50]
type = PalFX
trigger1 = Time = 0
time = 6
add = 80,80,255

[State 18100, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,80
volume = 255
channel = -1

[State 18100, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,81
volume = 255
channel = -1


[State 1031, 2]
type = Playsnd
trigger1 = Time = 0
value = 4,46
volume = 255

[State 1031, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------------------------------------------
 ; 下段ブロッキング
[Statedef 18200]
type = C
movetype= I
physics = S
juggle = 0
ctrl = 0
velset = 0,0

[State 11, 1]
type = ChangeAnim
Triggerall = var(28) = 0
trigger1 = Time = 0
value = 18200

[State 11, 1]
type = ChangeAnim
Triggerall = var(28) = 1
trigger1 = Time = 0
value = 20010

[state 9500,1]
type = ReversalDef
trigger1 = Time = 0
attr = C,NT
reversal.attr = SCA, NA, SA, HA, SP, HP, NP
pausetime = 0,15
sparkno = -1
sprpriority = 2
p1stateno = 18300

[State 1030, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;----------------------------------------------------------------------------
;下段ブロッキング２
[Statedef 18300]
type = C
movetype= I
physics = N
anim = 18300
velset = 0,0

[State 18300, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,80
volume = 255
channel = -1

[State 18300, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,81
volume = 255
channel = -1

[State 1031, 1]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 9550, 50]
type = PalFX
trigger1 = Time = 0
time = 6
add = 80,80,255

[State 1031, 2]
type = PowerAdd
trigger1 = Time = 0
value = 150

[State 1031, 2]
type = Playsnd
trigger1 = Time = 0
value = 4,46
volume = 255

[State 180, 2]
type = Explod
trigger1 = time = 0
id = 10000
anim = 10000
pos = 27,-22
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 180, 2]
type = Explod
trigger1 = time = 0
id = 10001
anim = 10001
pos = 28,-20
ontop = 1
ownpal = 1
removeongethit = 1

[State 1031, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------
;空中ブロッキング
[Statedef 18400]
type    = A
physics = N
movetype = I
sprpriority = 0
anim = 18500


[State 586,init]
type = VarSet
trigger1 = 1
v = 26
value = 0

[State 586,Go]
type = ChangeState
trigger1 = 1
value = 18500

[Statedef 18500]
type    = A
movetype= I
physics = A
juggle  = 0
velset = -2.5,-2.9
anim = 18500
ctrl = 0
sprpriority = 2

[state 587, ctrlset]
type = ctrlset
trigger1 = time = 1
value = 1

[State 587, init]
type = VarSet
trigger1 = time = 0
v = 7
value = 0

[State 587, 1]
type = Pause
trigger1 = time = 0
time = 7

[State 587, 1]
type = PosFreeze
trigger1 = Time <= 7
time = 2

[State 1031, 2]
type = PowerAdd
trigger1 = Time = 0
value = 150

[State 1031, 2]
type = Playsnd
trigger1 = Time = 0
value = 4,46
volume = 255

[State 180, 2]
type = Explod
trigger1 = time = 0
id = 10000
anim = 10000
pos = 27,-22
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 180, 2]
type = Explod
trigger1 = time = 0
id = 10001
anim = 10001
pos = 28,-20
ontop = 1
ownpal = 1
removeongethit = 1

[State 587, 1]
type = NotHitBy
trigger1 = Time <= 7
value = SCA
time = 2

[State 9550, 50]
type = PalFX
trigger1 = Time = 0
time = 6
add = 80,80,255

[State 587, 5]
type = PlayerPush
trigger1 = time >= 0
value = 0


[State 587, 2]
type = ChangeState
trigger1 = Animtime = 0
value = 50
ctrl = 1
;----------------------------------------------------------------------------
;===============parry section========================================
;☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆☆
;PARRY HIGH

[Statedef 4000]
type = S
movetype = I
physics = S
anim = 4000
velset = 0,0
sprpriority = 3
facep2 = 1
ctrl = 0

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S100,80
volume = 255
channel = -1

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S100,81
volume = 255
channel = -1



[State -2, ブロッキング]
type = VarSet
trigger1 = time = 0
var(29) = var(29)+1

[State 4000, posadd]
type = posadd
trigger1 = time = 0
trigger1 = enemynear,hitdefattr = SA, HA
x = -10*const(size.xscale)

[State 4000, playsnd]
type = playsnd
trigger1 = Time = 0
value = 0,2
channel = 0

[State 4000, playsnd]
type = playsnd
trigger1 = Time = 0
value = 4000,0

[State 4000, EnvShake]
type = EnvShake
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
time = 10
ampl = 2
freq = 180
phase = 40


[State 4000, nothitby]
type = NotHitBy
trigger1 = (Time < Floor(Var(17)*1.5)+3)
value = SCA
time = 2

[State 4000, PalFX]
type = PalFX
trigger1 = !var(32) || var(29)!=1
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 50,50,250

[State 4000, PalFX]
type = PalFX
trigger1 = var(29)=1 && var(32)
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 250,0,0

[State 4000, explod]
type = explod
trigger1 = Time = 1
anim = 7000
pos = 42,-82
postype = p1
facing = 1
sprpriority = 3
bindtime = -1
pausemovetime = 60
ignorehitpause = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 4000, Pause]
type = Pause
trigger1 = (AnimElem = 2);trigger1 = time = 0
time = 20-ifelse((GetHitVar(animtype)=[3,5]),4,GetHitVar(animtype))-ifelse(GetHitVar(hitshaketime)>16,16,GetHitVar(hitshaketime))
movetime = 20-ifelse((GetHitVar(animtype)=[3,5]),4,GetHitVar(animtype))-ifelse(GetHitVar(hitshaketime)>16,16,GetHitVar(hitshaketime))

[State 4000, asserts]
type = assertspecial
trigger1 = animelemtime(4) < 0
flag = nowalk
flag2 = nostandguard
flag3 = nocrouchguard

[State -2, ChangeState]
type = ChangeState
triggerall = var(50) = 0 ;&& command = "holdback"
triggerall = inguarddist
trigger1 = animelemtime(4) = 0
value = 120

[State 4000, CtrlSet]
type = CtrlSet
trigger1 = animelemtime(4) = 0
value = 1

[State 4000, sprpriority]
type = sprpriority
trigger1 = animelemtime(4) >= 0
value = 0

[State 4000, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;PARRY AIR

[Statedef 4200]
type = A
movetype = I
physics = N
anim = 4200
;velset = 0,0
sprpriority = 0
;facep2 = 1
ctrl = 0

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S100,80
volume = 255
channel = -1

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S100,81
volume = 255
channel = -1

[State -2, ブロッキング]
type = VarSet
trigger1 = time = 0
var(29) = var(29)+1

[State 4200, velset]
type = velset
trigger1 = time = 0
x = (vel X)*ifelse(p2dist X < 0,-1,1)
y = ifelse(vel Y<-1.0,vel Y,-1.0)

[State 4200, turn]
type = turn
trigger1 = time = 0
trigger1 = p2dist X < 0

[State 4200, turn]
type = posfreeze
trigger1 = 1

[State 4200, playsnd]
type = playsnd
trigger1 = Time = 0
value = 0,2
channel = 0

[State 4200, playsnd]
type = playsnd
trigger1 = Time = 0
value = 4000,0

[State 4200, EnvShake]
type = EnvShake
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
time = 12
ampl = 2
freq = 180
phase = 40

[State 4200, nothitby]
type = nothitby
trigger1 = var(0) = 0
trigger1 = Time = 0
value = SCA
time = 16

[State 4000, PalFX]
type = PalFX
trigger1 = !var(32) || var(29)!=1
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 50,50,250

[State 4000, PalFX]
type = PalFX
trigger1 = var(29)=1 && var(32)
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 250,0,0

[State 4200, explod]
type = explod
trigger1 = Time = 1
anim = 7000
pos = 14,-75
postype = p1
facing = 1
sprpriority = 3
bindtime = -1
pausemovetime = 60
ignorehitpause = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 7005, Pause]
type = Pause
trigger1 = (AnimElem = 2)
time = Floor(Var(17)*1.5)+5
movetime = Floor(Var(17)*1.5)+2

[State 4200, asserts]
type = assertspecial
trigger1 = 1
flag = noairguard

[State 4200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 4250
;--------------------------------------------------------------------------------
;空中ブロ(続き)
[Statedef 4250]
type = A
movetype = I
physics = N
anim = 4250
;velset = fvar(37)*var(6),ifelse(fvar(31)<-1.0,fvar(31),-1.0)
sprpriority = 0
ctrl = 1

[State 4250, VelAdd]
type = VelAdd
trigger1 = 1
y = .50

[State 4200, CtrlSet]
type = CtrlSet
trigger1 = animelem = 4||animelem = 5
value = 1

[State 4250, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
trigger1 = Anim != 52
value = 52
;△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△△
;空中ブロ
[Statedef 4205]
type = A
movetype = I
physics = N
anim = 4200
;velset = 0,0
sprpriority = 0
;facep2 = 1
ctrl = 0

[State -2, ブロッキング]
type = VarSet
trigger1 = time = 0
var(29) = var(29)+1

[State 4200, velset]
type = velset
trigger1 = time = 0
x = (vel X)*ifelse(p2dist X < 0,-1,1)
y = ifelse(vel Y<-1.0,vel Y,-1.0)

[State 4200, turn]
type = turn
trigger1 = time = 0
trigger1 = p2dist X < 0

[State 4200, turn]
type = posfreeze
trigger1 = 1

[State 4200, playsnd]
type = playsnd
trigger1 = Time = 0
value = 0,1
channel = 0

[State 4200, playsnd]
type = playsnd
trigger1 = Time = 0
value = 4000,0

[State 4200, EnvShake]
type = EnvShake
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
time = 12
ampl = 2
freq = 180
phase = 40

[State 4200, nothitby]
type = nothitby
trigger1 = var(0) = 0
trigger1 = Time = 0
value = SCA
time = 16

[State 4000, PalFX]
type = PalFX
trigger1 = !var(32) || var(29)!=1
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 50,50,250

[State 4000, PalFX]
type = PalFX
trigger1 = var(29)=1 && var(32)
trigger1 = time <= 12
trigger1 = time%2 = 0
time = 1
color = 0
add = 250,0,0

[State 4200, explod]
type = explod
trigger1 = Time = 1
anim = 7000
pos = 14,-75
postype = p1
facing = 1
sprpriority = 3
bindtime = -1
pausemovetime = 60
ignorehitpause = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 4200, Pause]
type = Pause
trigger1 = var(0) = 0
trigger1 = time = 0
time = 20-ifelse((GetHitVar(animtype)=[3,5]),4,GetHitVar(animtype))-ifelse(GetHitVar(hitshaketime)>16,16,GetHitVar(hitshaketime))
movetime = 20-ifelse((GetHitVar(animtype)=[3,5]),4,GetHitVar(animtype))-ifelse(GetHitVar(hitshaketime)>16,16,GetHitVar(hitshaketime))

[State 4200, asserts]
type = assertspecial
trigger1 = 1
flag = noairguard

[State 4200, CtrlSet]
type = CtrlSet
trigger1 = animelem = 1||animelem = 2||animelem = 3||animelem = 4
value = 1

[State 4200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[StateDef 30048]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 30048
poweradd = 20
sprpriority = 2



[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 1320, Fire Explod 1]
type = Explod
trigger1 = (MoveHit = 1) && (P2MoveType = H) && (NumExplod(8115) < 3) && (EnemyNear, Time = 0)
anim = 8114
ID = 8114
postype = P2
pos = 0,-50
random = 50,30
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -1
removetime = 30

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 13
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 17
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0


[State 0, Explod]
type = Explod
trigger1 = animelem = 21
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0


[State 30048, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,101
volume = 255
channel = -1

[State 30048, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,101
volume = 255
channel = -1

[State 30048, PlaySnd]
type = PlaySnd
trigger1 =  animelem=5||animelem=7||animelem=9||animelem=11||animelem=13||animelem=15||animelem=17||animelem=19||animelem=21
value = S25,2
volume = 255
channel = -1

[State 30048, 1]
type = HitDef
trigger1 = animelem=3||animelem=7||animelem=11||animelem=15||animelem=19||animelem=23||animelem=27||animelem=31||animelem=35||animelem=39||animelem=43
attr = S, SA
damage = 20,10
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 10, 10
sparkno = S8008
guard.sparkno=s910
sparkxy = -10, -76
hitsound = S20,1
guardsound = S100, 29
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-5
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = 0
palfx.time= 15
palfx.add = 45,30,45
palfx.mul = 256,256,256
palfx.sinadd = -20,-20,-20,5

[State 30048, VelSet 1]
type = VelSet
trigger1 = animelem=1||animelem=2
x = 4
y = -5

[State 30048, VelSet 2]
type = VelSet
trigger1 = animelem=3||animelem=4||animelem=5||animelem=6||animelem=7||animelem=8||animelem=9||animelem=10||animelem=11||animelem=12||animelem=13
trigger2 = animelem=14||animelem=15||animelem=16||animelem=17||animelem=18||animelem=19||animelem=20||animelem=21||animelem=22||animelem=23
trigger3 = animelem=24||animelem=25||animelem=26||animelem=27||animelem=28||animelem=29||animelem=30||animelem=31||animelem=32||animelem=33||animelem=35||animelem=41
x = 5
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem=5||animelem=7||animelem=9||animelem=11||animelem=13
trigger2 = animelem=15||animelem=17||animelem=19||animelem=21||animelem=23
trigger3 = animelem=25||animelem=27||animelem=29||animelem=31||animelem=33||animelem=35||animelem=41
value = S12,10
volume = 255
channel = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 30
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N

[State 30048, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1

;-----------------------------------------------------------------------------
; Falling

[Statedef 690]
type    = A
movetype= I
physics = A
anim = ifelse(Var(5) = 1,690,691)
ctrl = ifelse(Var(15) = 1,1,0)
sprpriority = 1

[State 690, Turn]
type = Turn
trigger1 = (Var(15) = 1) && (P2Dist X < -5)
trigger2 = (PrevStateNo = 3350) && (P2Dist X < -5)

[State 690, Super Jump VelAdd] ;falls slower during super jump
type = VelAdd
trigger1 = (Var(15) = 1) && (Vel Y > 0)
y = -0.14

[State 690, Super Jump HoldFwd]
type = VelAdd
triggerall = (Var(15) = 1) && (Vel X <= 4) && (Time >= 10)
trigger1 = Command = "holdfwd"
x = 0.25

[State 690, Super Jump HoldBack]
type = VelAdd
triggerall = (Var(15) = 1) && (Vel X >= -4) && (Time >= 10)
trigger1 = Command = "holdback"
x = -0.035

[State 690, ScreenBound]
type = ScreenBound
trigger1 = Var(16) = 1
value = 0
movecamera = 0,0

[State 690, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 690, AfterImageTime]
type = AfterImageTime
trigger1 = (Time = 0) && (PrevStateNo = 3350)
time = 1

[State 690, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 52
;-------------------------------------------------------------------------------
;---------------------------------------------------------------------------

;-----------------------------------------------------------------------------
;Hadouken
[StateDef 1005]
type = A
movetype= A
physics = A
juggle  = 0
;velset = 0,0
ctrl = 0
anim = 1005
poweradd = 20
sprpriority = 2


[State 1100]
type = VarSet
trigger1 = time = 0 && var(59)>=1
v = 10
value = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1000,0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1000,0
channel = -1

[State 1100, VelSet]
type = Veladd
trigger1 = animelem = 2
x = -1
y = -1


[State 0, 1]
type = Projectile
trigger1 = AnimElem = 4
projanim = 1101
projhitanim = 8008
projpriority = 1
projheightbound = -240, 0
projedgebound = 100
projscreenbound = 100
projshadow = -1
offset = 47,-41
velocity = 7,8
attr = S, SP
damage   = 35,10
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 10,10
hitsound   = S20,1
sparkxy = 500,500
guardsound = S100,29
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.animtype = Back
air.velocity = -4,-6
air.juggle = 3
air.fall = 1
fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0

[State 0, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[State 1100, Helper];moves the camera
type = Helper
trigger1 = (ProjHit1100 = 1) && (Var(16) = 1) && (NumHelper(640) = 0)
name = "Camera Move"
id = 640
postype = p2
pos = 0,0
stateno = 640

[State 1100]
type = VarSet
trigger1 = time = 0 && var(59)>=1
v = 10
value = 2

[State 1100, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 13
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N

[State 1100, CtrlSet]
type = CtrlSet
trigger1 = animelem = 13
value = 1




[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1
;---------------------------------------------------------------------------
;-----------------------------------------------------------------------------
;Hadouken
[StateDef 1006]
type = A
movetype= A
physics = A
juggle  = 0
;velset = 0,0
ctrl = 0
anim = 1005
poweradd = 20
sprpriority = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
v = 12     ;fv =
value = -100
;ignorehitpause =
;persistent =

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal ;player
name = "poison"
ID = 980
stateno = 980
pos = 0,-80
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 0.7
size.yscale = 0.7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1000,0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1000,0
channel = -1

[State 1100, VelSet]
type = Veladd
trigger1 = animelem = 2
x = -1
y = -1


[State 0, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[State 1100, Helper];moves the camera
type = Helper
trigger1 = (ProjHit1100 = 1) && (Var(16) = 1) && (NumHelper(640) = 0)
name = "Camera Move"
id = 640
postype = p2
pos = 0,0
stateno = 640

[State 1100]
type = VarSet
trigger1 = time = 0 && var(59)>=1
v = 10
value = 2

[State 1100, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 13
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N

[State 1100, CtrlSet]
type = CtrlSet
trigger1 = animelem = 13
value = 1




[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1
;------------------------------------
[Statedef 980]
type = S
movetype = A
physics = N
juggle  = 1
ctrl = 0
anim = 1101

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 10
y = 10
;ignorehitpause =
;persistent =

[State 3001, blah]
type = AngleSet
trigger1 = 1
value = (atan(Vel Y/Vel X) + (3*pi/2)) *(-180/Pi)
ignorehitpause = 1

[State 3001, blah]
type = AngleDraw
trigger1 = 1
ignorehitpause = 1




[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = A, NP			;Attribute: Standing, Normal Attack
damage = 50, 1			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 4, 8			;Time attacker pauses, time opponent shakes
sparkno = S8008				;Spark anim no (Def: set above)
guard.sparkno = s910
sparkxy = 0, -4		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s20,1	;Sound to play on hit
guardsound = s100,29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 14		;Time opponent is in hit state
guard.hittime  = 17
guard.ctrltime = 17
ground.velocity = -9		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 12
p1stateno = 1956

[State 0, ChangeState]
type = ChangeState
trigger1 = vel y >= 0
trigger1 = pos y >= 0
trigger2 = moveguarded
trigger3 = movetype = H
value = 981
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

;--------------------------------------------------------------------------

[Statedef 981]
type    = S
movetype= A
physics = S
ctrl = 0
sprpriority = 2
anim = 50199

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 521, AngleSet]
type = AngleSet
trigger1 = Time = 0
value = -500

[State 521, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 521, AngleMul]
type = AngleAdd
trigger1 = Time > 0
value = -20

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .8

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = 19
y = -20
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 4
x = 6
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 0, DestroySelf]
type = DestroySelf
trigger1 = vel y >= 100
;ignorehitpause =
;persistent =

;--------------------------------------------------------------------------

[Statedef 982]
type    = S
movetype= A
physics = S
ctrl = 0
sprpriority = 2
anim = 50199

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 521, AngleSet]
type = AngleSet
trigger1 = Time = 0
value = -500

[State 521, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 521, AngleMul]
type = AngleAdd
trigger1 = Time > 0
value = -20

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .8

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = 2
y = -2
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = Time >= 4
x = 6
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = Parent,var(25) = 0
trigger1 = Time = 0
v = 25    ;fv =
value = 500
ignorehitpause = 1
;persistent =

[State 0, Explod]
type = Explod
triggerall = p2statetype != L
triggerall = numexplod(8008) < 1
triggerall = p2movetype = H
triggerall = p2stateno != [120,155]
trigger1 = Time = 0
anim = 8008
ID = 8008
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 18
pausemovetime = 0
scale = 0.7,0.7
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
;ignorehitpause =
;trans =
;persistent =
;supermove = 0
;pausemove = 0


[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time >= 90
;ignorehitpause =
;persistent =


;==============================================================================================
[Statedef 1956]
type = S
movetype = A
velset = 0, 0
ctrl = 1
anim = 997

[State facedif]
type = turn
trigger1 = numenemy
trigger1 = facing = (enemy, facing)

[State 2]
type = PosAdd
trigger1 = P2dist x >= 0
x = 5

[State 3]
type = PosAdd
trigger1 = P2dist x <= 0
x = -5

[State 4]
type = PosAdd
trigger1 = P2dist y <= 50
y = -5

[State 5]
type = PosAdd
trigger1 = P2dist y >= 50
y = 5

[State 2]
type = PosSet
trigger1 = NumTarget
x = ceil(target, pos x)
y = ceil(target, pos y) + ceil(target, const(size.mid.pos.y))

[State 2]
type = PosSet
trigger1 = NumTarget
trigger1 = Target, Statetype = L
x = ceil(target, pos x)
y = ceil(target, pos y) - 16

[State HitBy]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1

[State HitOverride]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 1012
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State FireB]
type = Explod
trigger1 = numenemy
trigger1 = movehit = 1
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2500
id = 2500
scale = 0.8, 0.8
postype = p2
pos = -10, -50
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State FireA]
type = Explod
trigger1 = numenemy
trigger1 = movehit = 1
trigger1 = numexplod(2500) < 1
ignorehitpause = 1
anim = 2500
id = 2500
scale = 0.7, 0.7
postype = p2
pos = 20, -80
random = 50, 30
bindtime = -1
sprpriority = 2
ownpal = 1

[State Do Not Guard]
type = attackdist
trigger1 = 1
value = 0

[State 3]
type = HitDef
trigger1 = numenemy
trigger1 = (enemynear, hitshakeover)
trigger1 = (enemynear, stateno != [5100, 5109])
trigger1 = (enemynear, stateno != [9000, 9120]) && (enemynear, stateno != 1955)
trigger1 = !(time % 30) && random < 500
attr = S, HA
damage = 20, 0
animtype = Light
getpower = 0, 0
givepower = 0
priority = 5, Hit
hitflag = MAFD
pausetime = 0, 16
sparkxy = -10, -945
sparkno = 0
hitsound = S5, 8
ground.type = low
ground.slidetime = 1
ground.hittime = 1
ground.velocity = 0, 0
air.velocity = (enemyNear, vel x), (enemyNear, vel Y)
fall.animtype = Hard
fall.recover = 0
fall.recovertime = 120
palfx.time = 20
palfx.add = 10, 10, 100
palfx.sinadd = -20, -20, -89, 8
palfx.color = 20
ID = 1956
kill = 0
forcestand = 1

[State Electrocute]
type = targetstate
trigger1 = movehit = 1
trigger1 = numtarget(1956)
trigger1 = target(1956), selfanimexist(7696)
trigger1 = target, stateno = 5000 || target, stateno = 5010 || target, stateno = 5020
value = 9005
ignorehitpause = 1

[State 6]
type = destroyself
trigger1 = time >= 600
trigger2 = root, movetype = H
;---------------------------------------------------------------------------
[Statedef 1101]
type = S
movetype = A
physics = N
anim = 1101
velset = 0,0
ctrl = 0

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, HT			;Attribute: Standing, Normal Attack
damage = 30, 1			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
hitflag = MAFD			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 0			;Time attacker pauses, time opponent shakes
sparkno = -1			;Spark anim no (Def: set above)
sparkxy = -40, -334		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 0		;Time that the opponent slides back
ground.hittime  = 15		;Time opponent is in hit state
ground.velocity = 0		;Velocity at which opponent is pushed
airguard.velocity = 0,0	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,0		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 15


[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 4
y = 6







;-----------------------------------------------------------------------------
[StateDef 30060]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 30060
poweradd = 20
sprpriority = 3

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = animelem = 8
anim = 8066
ID = 8066
pos = 50,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
ontop = 1
supermove
pausemove
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 30060, 1]
type = Projectile
trigger1 = AnimElem = 8
guard.sparkno=s910
projanim = 30069
projhitanim = 666
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
projhits=3
pausetime=9,17
offset = 39, -72
velocity = 9,0
attr = S, SP
damage   = 35
animtype = heavy
guardflag = MA
hitflag = MAFDP
hitsound   = S20,2
sparkxy = 500,500
guardsound = S100, 29
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.type = High
air.velocity = -15,-7
air.hittime = 12
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10
envshake = 40
envshake.time = 13
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = 0



[State 30060, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S100,32
volume = 255
channel = -1

[State 30060, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S100,32
volume = 255
channel = -1

[State 30060, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,85
volume = 255
channel = -1

[State 30060, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,85
volume = 255
channel = -1

[State 30060, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 30071]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
poweradd = 0
anim = 30071
ctrl = 0
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = animelem = 26
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = animelem = 26
anim = 8066
ID = 8066
pos = 50,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
ontop = 1
supermove
pausemove
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 30071, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 30071

[State 30071, Super Charge Explod]
type = Explod
trigger1 = AnimElemTime(4) = 0
anim = 8200
postype = Front
facing = ifelse(Facing = 1,1,-1)
pos = ifelse(Facing = 1,-126,126),222
ownpal = 1
sprpriority = 5
supermovetime = 58


[State 30071, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(25) = 0
attr = a,HA
time = 30
length = 12
framegap = 5
palcolor = 0
palcontrast = 200,255,255
palpostbright = 100,100,200
palmul = 0.7,0.7,1
trans = add1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,14
volume = 255
channel = -1

[State 30071, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(2) = 0
time = 58
pos = 16,-46
anim = S8201
sound = S10,4
poweradd = -1000
movetime = 58

[State 30071, Super Portrait Explod]
type = Explod
trigger1 = AnimElemTime(4) = 0
anim = 9001
postype = Back
pos = -150,4
ownpal = 1
sprpriority = -2
supermovetime = 58
removeongethit = 1
bindtime = -1

[State 30071, AssertSpecial]
type = AssertSpecial
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(26) < 0)
flag = NoBarDisplay

[State 30071, Super Background Top]
type = Explod
trigger1 = (RoundState = 3) && (NumExplod(8210) < 1) && (P2Life <= 0) && (Alive = 1) && (MoveHit = 1)
ID = 8210
anim = 8210
postype = Back
pos = 160,120
sprpriority = -5
ownpal = 1
ignorehitpause = 1
bindtime = -1
removetime = -1

[State 30071, Super Background Bottom]
type = Explod
trigger1 = (RoundState = 3) && (NumExplod(8211) < 1) && (P2Life <= 0) && (Alive = 1) && (MoveHit = 1)
ID = 8211
anim = 8210
postype = Back
pos = 160,119
vfacing = -1
sprpriority = -5
ownpal = 1
ignorehitpause = 1
bindtime = -1
removetime = -1

[State 30060, 1]
type = Projectile
trigger1 = AnimElem = 26
guard.sparkno=s910
projanim = 30069
projhitanim = 666
projhits =  8
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
pausetime=9,17
offset = 0, -60
velocity = 9
attr = S, SP
damage   = 30,10
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 60,60
hitsound   = S20,2
sparkxy = 500,500
guardsound = S100, 29
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.animtype = Back
air.type = High
air.velocity = -15,-7
air.hittime = 12
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10
envshake = 40
envshake.time = 13
fall = 1





[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6000,43
volume = 255
channel = -1

[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S6000,43
volume = 255
channel = -1

[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem = 25
value = S6000,34
volume = 255
channel = -1

[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem = 25
value = S100,65
volume = 255
channel = -1

[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem=26
value = S100,32
volume = 255
channel = -1

[State Kill Hyper BG]
type = RemoveExplod
trigger1 = Time = 0
ID = 998

[State 30055, HyperBg]
type = Explod
trigger1 = time = 1
anim = 20014
pos = 0,0
sprpriority = -4
postype = front
bindtime = -1
removetime = 135
removeongethit = 1
facing = ifelse(Facing = -1, -1, 1)
supermovetime = 99999999
pausemovetime = 99999999
id = 998
shadow = 68,68,68
ownpal = 1

[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem=26
value = S100,32
volume = 255
channel = -1

[State 30071, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef 3100]
type    = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
poweradd = 0
anim = 3100
ctrl = 0
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 8066
ID = 8066
pos = 50,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
ontop = 1
supermove
pausemove
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 30071, ChangeAnim 1];Super Armor
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3100

[State 30071, Super Charge Explod]
type = Explod
trigger1 = AnimElemTime(4) = 0
anim = 8200
postype = Front
facing = ifelse(Facing = 1,1,-1)
pos = ifelse(Facing = 1,-126,126),222
ownpal = 1
sprpriority = 5
supermovetime = 58


[State 30071, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(5) = 0
attr = a,HA
time = 30
length = 12
framegap = 5
palcolor = 0
palcontrast = 200,255,255
palpostbright = 100,100,200
palmul = 0.7,0.7,1
trans = add1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,14
volume = 255
channel = -1

[State 0, EnvColor]
type = EnvColor
trigger1 = animelem = 5
value = 255,255,255
time = 5

[State 0, EnvColor]
type = EnvColor
trigger1 = animelem = 6
value = 255,255,255
time = 5


[State 0, EnvColor]
type = EnvColor
trigger1 = animelem = 7
value = 255,255,255
time = 5

[State 0, EnvColor]
type = EnvColor
trigger1 = animelem = 9
value = 255,255,255
time = 5

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 5
time = 5
freq = 100
ampl = -4
phase = 30

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 6
time = 5
freq = 100
ampl = -4
phase = 30

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 7
time = 200
freq = 100
ampl = -4
phase = 30


[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (2) = 0
value = S10,8
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (2) = 0
value = S10,8
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (2) = 0
value = S10,8
volume = 255
channel = -1




[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 0
value = S6000,31
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 0
value = S6000,29
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 10
value = S6000,26
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 20
value = S6000,26
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 30
value = S6000,26
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 40
value = S6000,26
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (5) = 50
value = S6000,26
volume = 255
channel = -1





[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (6) = 0
value = S6000,31
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (6) = 0
value = S6000,29
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (6) = 10
value = S6000,28
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6000,32
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S6000,27
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (7) = 0
value = S6000,31
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (7) = 0
value = S6000,29
volume = 255
channel = -1




[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (7) = 40
value = S10,7
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (7) = 190
value = S10,6
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (7) = 40
value = S10,7
volume = 255
channel = -1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = animelemtime (7) = 190
value = S10,6
volume = 255
channel = -1

[State 30071, SuperPause]
type = SuperPause
trigger1 = AnimElemTime(2) = 0
time = 355
pos = 16,-46
anim = S8201
sound = S10,4
poweradd = -2000
movetime = 355


[State 30071, Super Portrait Explod]
type = Explod
trigger1 = AnimElemTime(4) = 0
anim = 9001
postype = Back
pos = -150,4
ownpal = 1
sprpriority = -2
supermovetime = 58
removeongethit = 1
bindtime = -1

[State 30071, AssertSpecial]
type = AssertSpecial
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(26) < 0)
flag = NoBarDisplay

[State 30071, Super Background Top]
type = Explod
trigger1 = (RoundState = 3) && (NumExplod(8210) < 1) && (P2Life <= 0) && (Alive = 1) && (MoveHit = 1)
ID = 8210
anim = 8210
postype = Back
pos = 160,120
sprpriority = -5
ownpal = 1
ignorehitpause = 1
bindtime = -1
removetime = -1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 10000
ID = 10000
pos = 30,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 50
supermove = 9999999
scale = 0.7,0.7
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 10000
ID = 10000
pos = -20,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 50
supermove = 9999999
scale = 0.7,0.7
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 10000
ID = 10000
pos = 30,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 50
supermove = 9999999
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 10000
ID = 10000
pos = -20,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 50
supermove = 9999999
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 10005
ID = 10005
pos = 30,-45
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 50
supermove = 9999999
scale = 0.7,0.7
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 10005
ID = 10005
pos = -30,-45
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 50
supermove = 9999999
scale = 0.7,0.7
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 10005
ID = 10005
pos = -40,-45
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 200
supermove = 9999999
scale = 1,1
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 10006
ID = 10006
pos = -40,-45
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 200
supermove = 9999999
scale = 2,2
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0



[State 30071, Super Background Bottom]
type = Explod
trigger1 = (RoundState = 3) && (NumExplod(8211) < 1) && (P2Life <= 0) && (Alive = 1) && (MoveHit = 1)
ID = 8211
anim = 8210
postype = Back
pos = 160,119
vfacing = -1
sprpriority = -5
ownpal = 1
ignorehitpause = 1
bindtime = -1
removetime = -1

[State 30060, 1]
type = Projectile
trigger1 = AnimElem = 8
guard.sparkno=s910
projanim = 20000
projhitanim = 666
projhits = 20
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projshadow = -1
pausetime=7,17
offset = -20, -60
velocity = 9
attr = S, SP
damage   = 40,10
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 60,60
hitsound   = S100,44
sparkxy = 500,500
guardsound = S100, 29
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -6
air.animtype = Back
air.type = High
air.velocity = -15,-7
air.hittime = 12
palfx.time = 12
palfx.color = 0
palfx.add = -180,0,100
palfx.sinadd = 20,20,40,10
envshake = 40
envshake.time = 13
fall = 1


[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem = 25
value = S100,65
volume = 255
channel = -1

[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem = 25
value = S100,65
volume = 255
channel = -1

[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem=26
value = S100,32
volume = 255
channel = -1

[State Kill Hyper BG]
type = RemoveExplod
trigger1 = Time = 0
ID = 998

[State 30055, HyperBg]
type = Explod
trigger1 = time = 1
anim = 20014
pos = 0,0
sprpriority = -4
postype = front
bindtime = -1
removetime = 400
removeongethit = 1
facing = ifelse(Facing = -1, -1, 1)
supermovetime = 99999999
pausemovetime = 99999999
id = 998
shadow = 68,68,68
ownpal = 1

[State 30071, PlaySnd]
type = PlaySnd
trigger1 = animelem=26
value = S100,32
volume = 255
channel = -1

[State 30071, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[StateDef 30048]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 30048
poweradd = 20
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7023
ID = 7023
pos = 10,-0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 1320, Fire Explod 1]
type = Explod
trigger1 = (MoveHit = 1) && (P2MoveType = H) && (NumExplod(8115) < 3) && (EnemyNear, Time = 0)
anim = 8114
ID = 8114
postype = P2
pos = 0,-50
random = 50,30
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -1
removetime = 30

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 13
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 17
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0


[State 0, Explod]
type = Explod
trigger1 = animelem = 21
anim = 1290
ID = 1290
pos = 10,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0


[State 30048, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,101
volume = 255
channel = -1

[State 30048, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,101
volume = 255
channel = -1

[State 30048, PlaySnd]
type = PlaySnd
trigger1 =  animelem=5||animelem=7||animelem=9||animelem=11||animelem=13||animelem=15||animelem=17||animelem=19||animelem=21
value = S25,2
volume = 255
channel = -1

[State 30048, 1]
type = HitDef
trigger1 = animelem=3||animelem=7||animelem=11||animelem=15||animelem=19||animelem=23||animelem=27||animelem=31||animelem=35||animelem=39||animelem=43
attr = S, SA
damage = 14
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 10, 10
sparkno = S8008
guard.sparkno=s910
sparkxy = -10, -76
hitsound = S20,1
guardsound = S100, 29
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = 0
palfx.time= 15
palfx.add = 45,30,45
palfx.mul = 256,256,256
palfx.sinadd = -20,-20,-20,5

[State 30048, VelSet 1]
type = VelSet
trigger1 = animelem=1||animelem=2
x = 4
y = -2

[State 30048, VelSet 2]
type = VelSet
trigger1 = animelem=3||animelem=4||animelem=5||animelem=6||animelem=7||animelem=8||animelem=9||animelem=10||animelem=11||animelem=12||animelem=13
trigger2 = animelem=14||animelem=15||animelem=16||animelem=17||animelem=18||animelem=19||animelem=20||animelem=21||animelem=22||animelem=23
trigger3 = animelem=24||animelem=25||animelem=26||animelem=27||animelem=28||animelem=29||animelem=30||animelem=31||animelem=32||animelem=33||animelem=35||animelem=41
x = 5
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem=5||animelem=7||animelem=9||animelem=11||animelem=13
trigger2 = animelem=15||animelem=17||animelem=19||animelem=21||animelem=23
trigger3 = animelem=25||animelem=27||animelem=29||animelem=31||animelem=33||animelem=35||animelem=41
value = S12,10
volume = 255
channel = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 25
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N

[State 30048, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 690
ctrl = 1

;-----------------------------------------------------------------------------
; roll recovery
[Statedef 900]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = N				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 900				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 1			;Set layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,34
volume = 0
channel = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x =7.5
y = 0
;ignorehitpause =
;persistent =

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5700, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = 0

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = FrontEdgeBodyDist <= 10
value = 11
ctrl = 1
;---------------------------------------------------------------------------
; roll recovery
[Statedef 901]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = N				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 901				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 1		;Set layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,34
volume = 0
channel = -1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x =-7.5
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5700, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = 0

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = backEdgeBodyDist <= 10
value = 11
ctrl = 1
;----------------------------------------------------------------------------
;---------------------------------------------------------------------------
; roll recovery
[Statedef 904]
type    = S
movetype= A
physics = S
juggle  = 0				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 904				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 1		;Set layering priority to 2 (in front)

[State 0, PosSet]
type = PosSet
trigger1 = animelem = 1
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S40,3
volume = 0
channel = -1



[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S100,34
volume = 0
channel = -1

[State 30048, 1]
type = HitDef
trigger1 = animelem = 1
attr = S, SA
damage = 20,10
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 10, 10
sparkno = S8008
guard.sparkno=s910
sparkxy = -10, -76
hitsound = S20,1
guardsound = S100, 29
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-5
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = 0
palfx.time= 15
palfx.add = 45,30,45
palfx.mul = 256,256,256
palfx.sinadd = -20,-20,-20,5

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x =-7.5
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5700, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = 0

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = backEdgeBodyDist <= 10
value = 690
ctrl = 1
;----------------------------------------------------------------------------
;===========< Target Escaped >==========
[Statedef 890]
type = S
physics = N
movetype = I
anim = 5945
ctrl = 0
velset = 0, 0
sprpriority = 1


[State Alpha Counter Left]
trigger1 = TeamSide = 1
trigger1 = Time = 1
type = Explod
ownpal = 1
anim = 9913
scale = 0.6,0.7
postype = left
pos = 10, 83
ontop = 1
bindtime = -1

[State Alpha Counter Right]
trigger1 = TeamSide = 2
trigger1 = Time = 1
type = Explod
ownpal = 1
anim = 9913
ontop = 1
scale = 0.6,0.7
postype = right
pos = -130, 83
bindtime = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 890, Bind]
type = targetbind
trigger1 = !time && numtarget
pos = 0, 0
[State 890, p2state]
type = targetstate
trigger1 = !time && numtarget
value = 895
[State 890, Throw]
type = targetfacing
trigger1 = !time && numtarget
value = -1

[State 890, Pos]
type = posadd
trigger1 = !time
x = 24

[State 890, NHB]
type = nothitby
trigger1 = 1
value = SCA
time = 1
[State 890, Push]
type = playerpush
trigger1 = 1
value = 0

[State 890, Pos]
type = posset
trigger1 = !time
y = 0
[State 890, Vel]
type = velset
trigger1 = 1
x = -1.425
y = 0

[State 890, Snd]
type = playsnd
trigger1 = time = 2
value = S100,82
channel = 0

[State 0, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 2



[State 890, FX]
type = playsnd
trigger1 = !time
value = S100,81

[State 890, FX]
type = explod
trigger1 = !time
anim = 8009
ID = 8009
sprpriority = 5
postype = p1
pos = 0, -55
ownpal = 1
pausemovetime = -1
supermovetime = -1

[State 890, End]
type = changestate
trigger1 = time >= 27
value = 0
ctrl = 1

;--- TARGET ---
[Statedef 895]
type = S
physics = N
movetype = I
ctrl = 0
velset = 0, 0
sprpriority = 1

[State 895, Anim]
type = changeanim
trigger1 = !time
value = ifelse(selfanimexist(5945), 5945, 130)
[State 895, Anim]
type = changeanim
trigger1 = !time && !selfanimexist(5945) && selfanimexist(5910)
value = 5910
[State 895, Anim]
type = changeanim
trigger1 = time >= 20 && anim = 130
value = 130

[State 895, NHB]
type = nothitby
trigger1 = 1
value = SCA
time = 1
[State 895, Push]
type = playerpush
trigger1 = 1
value = 0

[State 895, Pos]
type = posset
trigger1 = !time
y = 0
[State 895, Vel]
type = velset
trigger1 = 1
x = -1.425
y = 0

[State 895, End]
type = selfstate
trigger1 = time >= 27
value = 0
ctrl = 1
;----------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt states have a HitDef of a
;     special format. The key parameters in a throw are p1stateno
;     and p2stateno. If the HitDef successfully connects, then
;     the attacker will change to the state number specified by
;     p1stateno, and the opponent will be change to the state
;     number assigned to p2stateno. The special thing about p2stateno
;     is that the opponent will be temporarily brought into the
;     attacker's state file. In this case, no matter who the
;     opponent is, he will be taken to state 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's state file).
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800

[State 800, Tech Hit]
type = varset
trigger1 = 1
var(19) = 0
[State 800, Tech Hit]
type = varset
trigger1 = numenemy
trigger1 = enemynear, statetype != A
trigger1 = (enemynear, stateno = [0, 999]) && (enemynear, stateno != [100, 119]) && (enemynear, stateno != [200, 799])
var(19) = 7


[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
sprpriority = 1       ;Draw in front of p2
p1facing = ifelse (command = "holdfwd", -1, 1) ;Turn if holding forwards
p2facing = 1          ;Force p2 to face player
p1stateno = 801       ;On success, player changes to state 810
p2stateno = 805       ;If hit, p2 changes to state 820 in player's cns
fall = 1              ;Force p2 into falling down

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;trow p1----------------------------------------------------------------------------
[Statedef 801]
type = S
movetype = A
physics = S
anim = 801
ctrl = 0
sprpriority = 6

[State TargetB, 1]
type = TargetBind
trigger1 = animelem = 1
pos = 60,0


[State Width, 1]
type = Width
trigger1 = 1
edge = 60,0



[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 50, 0

;falla
[State 0, ChangeState]
type = ChangeState
triggerall = time <= 10
trigger1 = enemy,command = "y"
trigger2 = enemy,command = "c"
value = 4014
ctrl = 0
ignorehitpause = 1

;acierta
[State 0, ChangeState]
type = ChangeState
trigger1 = time = 26
value = 810
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Fang Hammer - Throwing the opponent
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 100
;sprpriority = 7



[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 23,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 100,105

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 120, 10			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 10			;Time attacker pauses, time opponent shakes
sparkno = s8008			;Spark anim no (Def: set above)
sparkxy = -10, -76		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = S20,9			;Sound to play on hit
guardsound = S100, 29			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 12		;Time opponent is in hit state
ground.velocity = -5, -9		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -5,-9		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 12
air.fall = 1			;Time before opponent regains control in air
fall = 1
air.recover = 0
p2stateno = 4034

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1300,60


[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 45, 0

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------
; 回転
[Statedef 4034]
type    = A
movetype= H ;Get hit
physics = N

[State 4031, Hit]
type = hitfallset
trigger1 = time = 0
value = 1

[State 4031, 0]
type = ChangeAnim2
trigger1 = time = 0
value = 4034

[State 4031, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 4031, 2]
type = VelAdd
Trigger1 = Time >= 0
y = .30

[State 4031, 4]
type = AngleSet
Trigger1 = Time = 0
value = 0

[State 4031, 5]
type = AngleAdd
Trigger1 = Time >= 0
value = 30

[State 4031, 6]
type = AngleDraw
aTrigger1 = Time >= 0
trigger1 = Pos Y <= 10

[State 4031, 7]
type = EnvShake
Trigger1 = Vel Y > 0
trigger1 = Pos Y > 10
time = 15
ampl = -3
freq = 90
phase = 90

[State 4031, 8]
type = SelfState
Trigger1 = Vel Y > 0
trigger1 = Pos Y > 10
value = 5100


;trow p2 --------------------------------------------------------------------------
[Statedef 805]
type = S
movetype = H
physics = S
anim = 130
ctrl = 0
sprpriority = 2

;falla
[State 0, ChangeState]
type = ChangeState
trigger1 = time = 26
value = 820
ctrl = 0
ignorehitpause = 1

;Defiende
[State 0, ChangeState]
type = ChangeState
triggerall = time <= 10
trigger1 =command = "y"
trigger2 = command = "c"
value = 4013
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Fang Hammer - Opponent Thrown
[Statedef 820]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
;anim = 1415



[State 820, 1]
type = Changeanim2
Trigger1 = time = 0
value = 820


;---------------------------------------------------------------------------
; Opponent thrown into the air
[Statedef 821]
type    = A
movetype= H
physics = N
velset = 9.5,3
poweradd = 40
anim = 5050

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4




[State 500, EnvShake]
type = EnvShake
trigger1 = Pos Y >= 0
time = 20
freq = 75
ampl = -10
phase = 90
;ignorehitpause =
;persistent =


[State 0, ChangeState]
type = ChangeState
trigger1 = pos Y >= 0
value = 822
ctrl = 0
;anim =
;ignorehitpause =
;persistent =















;Gasaishou defiende p2
[Statedef 4013]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 2

[State 890, FX]
type = playsnd
trigger1 = !time
value = S100,81

[State 890, FX]
type = explod
trigger1 = !time
anim = 8009
ID = 8009
sprpriority = 5
postype = p1
pos = 0, -55
ownpal = 1
pausemovetime = -1
supermovetime = -1



[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 2



[State 890, FX]
type = playsnd
trigger1 = !time
value = S100,81

[State 890, FX]
type = explod
trigger1 = !time
anim = 8009
ID = 8009
sprpriority = 5
postype = p1
pos = 0, -55
ownpal = 1
pausemovetime = -1
supermovetime = -1

[State Alpha Counter Left]
trigger1 = TeamSide = 1
trigger1 = Time = 0
type = Explod
ownpal = 1
anim = 9913
scale = 0.6,0.7
postype = left
pos = 10, 83
ontop = 1
bindtime = -1

[State Alpha Counter Right]
trigger1 = TeamSide = 2
trigger1 = Time = 0
type = Explod
ownpal = 1
anim = 9913
ontop = 1
scale = 0.6,0.7
postype = right
pos = -130, 83
bindtime = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,6
volume = 255
channel = -1
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
trigger1 = SelfAnimExist(8209) != 0
value = 8209
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
trigger1 = SelfAnimExist(8209)= 0
value = 200
persistent = 0

[State VarR, 1]
type = VarRandom
trigger1 = animelem = 1
v = 1
range = 0,1

[State PlayS, 1]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(1) = 0
value = 801,1
channel = 0

[State PlayS, 1]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(1) = 1
value = 801,0
channel = 0

[State ChangeS, 1]
type = selfstate
trigger1 = animtime = 0
value = 0
ctrl = 1

;Gasaishou falla p1
[Statedef 4014]
type = S
movetype = H
physics = S
anim = 5253
ctrl = 0
sprpriority = 2

[State PlayS, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 800,0




[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -25

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 10
value = 0
ctrl = 1
ignorehitpause = 1


;---------------------------------------------------------------------------
; Fang Hammer - Opponent Bounce
[Statedef 822]
type    = A
movetype= H
physics = N
velset = 0,0

[State 822, 1]
type = Changeanim
Trigger1 = time = 0
value = 5100


[State 822, 5]
type = ChangeState
trigger1 = time = 10
value = 823
ctrl = 0

;---------------------------------------------------------------------------
; Opponent thrown into the air
[Statedef 823]
type    = A
movetype= H
physics = N
velset = 3,-13
poweradd = 40
anim = 5050

[State 823, 1]
type = VelAdd
Trigger1 = 1
y = .5

[State 823, 3]
type = SelfState
triggerall = alive = 1
triggerall = CanRecover
trigger1 = time >= 15
trigger1 = command = "recovery"
value = 5210

[State 823, 4]
type = SelfState
Triggerall = Alive = 0
Trigger1 = time = 0
value = 5050

[State 823, 5]
type = SelfState
triggerall = alive = 1
trigger1 = time >= 15 && pos y >= 0
value = 5100


;---------------------------------------------------------------------------
;-----------------------------------------------------------------------
[Statedef 7100]
type = S
physics = S
anim = 9999
sprpriority = 0

[State -3,Slow]
type = Pause
trigger1 = (GameTime%1) = 0
time = 2
movetime = 0
ignorehitpause = 1



[State -2, Finish SFX]
type = AllPalFX
trigger1 = time = 0
add = 255,255,255
persistent = 0
time =2
ignorehitpause = 1

[State -2,1]
type = PlaySnd
trigger1 = time = 0
value = 9,3
volume =255
ignorehitpause = 1
channel = -1

[State -2,1]
type = PlaySnd
trigger1 = time = 0
value = 9,3
volume =255
ignorehitpause = 1
channel = -1

[State -2,1]
type = PlaySnd
trigger1 = time = 0
value = 9,3
volume =255
ignorehitpause = 1
channel = -1

[State -2, 1]
type = EnvShake
trigger1 = time = 0
time = 10
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 20
value = 7101
;-------------------------------------------------------------------------
[Statedef 7101]
type = S
physics = S
anim = 9999
sprpriority = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokoslow




[State 901, 4]
type = DestroySelf
trigger1 = time = -1

;----------------------------------------------------------------------------
; 画面外演出
[Statedef 8170]
type    = S
movetype = A
physics = S
anim = 9999
sprpriority = 1
velset = 0,0
ctrl = 0

[State 810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 810, PosSet]
type = PosSet
trigger1 = 1
x = -180 * facing
y = 0

[State 810, VarSet]
type = VarSet
trigger1 = time = 0
var(6) = 0

[State 810, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100;----------------------dash in
;======================<WALL IMPACT DUST>===========================
[StateDef 8111]
type = A
anim = 9999
velSet = 0,0
sprPriority = 5

[State 0, Explod]
type = Explod
trigger1= time = 0
anim = 7024
pos = 0,0
postype = p2  ;p2,front,back,left,right
facing = -1
vfacing = 1
removetime = -2
pos= -5,-70
scale = .7,.7
ownPal = 1
ignorehitpause=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S7000,2
volume = 255
channel = -1


[State 8111, End]
type = DestroySelf
trigger1 = !NumExplod

;---------------------------------------------------------------------------



;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
[statedef -2]

[State -2, Wall Impact Dust]
type = Helper
triggerall=!numhelper(8111) && numenemy
trigger1=P2movetype=H && p2stateno=552 && enemy,time=1
helperType = Normal
stateNo = 8111
ID = 8111
name = "Wall Impact Dust"
posType = P2
facing = -1
pos= floor(-5*const(size.xscale)),ceil(-70*const(size.yscale))
ownPal = 1
ignorehitpause=1


[State -2,1]
type = PlaySnd
trigger1 = Life <= 0  && (Var(51) !=1) && !NumHelper(7100)
value = 9,3
volume =255
ignorehitpause = 1
channel = -1

[State -2,1]
type = PlaySnd
trigger1 = Life <= 0  && (Var(51) !=1) && !NumHelper(7100)
value = 9,3
volume =255
ignorehitpause = 1
channel = -1

[State -2,1]
type = PlaySnd
trigger1 = Life <= 0  && (Var(51) !=1) && !NumHelper(7100)
value = 9,3
volume =255
ignorehitpause = 1
channel = -1



[State -2, Super Var 2]
type = VarSet
trigger1 = Life <= 0 && (Var(51) !=1)
v = 51
value = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokoslow

[State -2, Create Helper]
type = Helper
triggerall = !NumHelper(7100)
trigger1 = Life = 0
ID = 7100
name = "Vida"
StateNo = 7100
postype = p1
pos = 0, 0
ownpal = 1
supermove = 30
pausemove = 30


;<[Parry]=================================================================]]
;This block of code is from Mr. Fong so give him credit for his work
[State -2, Standing Parry]
type = hitoverride
triggerall = ifelse((p2bodydist x < 0), (command = "back"), (command = "fwd"))
triggerall = statetype = S
trigger1 = ctrl
trigger2 = stateno = [120,130]
trigger3 = stateno = [140,151]
attr = SA, AA, AP
stateno = 4000
time = 6

;---------------------------------------------------------------------------
[State -2, Crouching Parry]
type = hitoverride
trigger1 = ctrl
trigger1 = ifelse((p2bodydist x < 0), (command = "back"), (command = "fwd"))
trigger1 = statetype = C
trigger2 = ctrl
trigger2 = command = "down"
trigger2 = statetype = S
trigger3 = command = "fwd"
trigger3 = stateno = 120
trigger4 = command = "fwd"
trigger4 = stateno = 131
trigger5 = command = "fwd"
trigger5 = stateno = 140
trigger6 = command = "fwd"
trigger6 = stateno = [152,153]
attr = C, AA, AP
stateno = 701
time = 5

;---------------------------------------------------------------------------
[State -2, Aerial Parry]
type = hitoverride
triggerall = ifelse((p2bodydist x < 0), (command = "back"), (command = "fwd"))
triggerall = statetype = A
triggerall = stateno != 52
trigger1 = ctrl
trigger2 = stateno = 120
trigger3 = stateno = 132
trigger4 = stateno = 140
trigger5 = stateno = [154,155]
attr = SCA, AA, AP
stateno = 4200
forceair = 1
time = 7

[State -2, StopAI]
type = VarSet
triggerall = (var(59) > 0)
trigger1 = (RoundState != 2)
trigger2 = !Alive
var(59) = -2
IgnoreHitPause = 1

;-!!!-> Add these at the top, under [statedef -2]
[State -2, Deactivate Tag]
type = VarSet
triggerall = var(30)	; Partner TAG mode activated
trigger1 = roundstate > 2
trigger1 = Win || Lose
var(30) = 0

; NEW !! Tag active definer
[State -2, def]
type = VarSet
trigger1 = teammode = simul
trigger1 = roundstate < 1
trigger1 = time = [0,1]
var(30) = 1

; NEW !! Tag active ctrl
[State -2, ctrl]
type = ChangeState
triggerall = var(30)        ; Partner TAG mode activated
triggerall = NumPartner
triggerall = ID > Partner,ID
trigger1 = partner, var(30) != [2, 5]
trigger1 = RoundState <= 2
trigger1 = Life && Partner, Life		; Team is alive
trigger1 = (stateno != [1000,4000]) && (stateno != [4500,4999])
trigger1 = (partner, stateno != [1000,4000]) && (partner, stateno != [4500,4999])
trigger1 = (stateno != 5500) && (stateno != 5500)
trigger1 = (partner, stateno != 5500) && (partner, stateno != 5500)
trigger1 = var(30) != [2, 5]
value = 4512



[State 0, PalFX]
type = PalFX
triggerall = random%3 = 0
trigger1 = Var(28) > 0
time = 1
add = 150,150,0
mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = Var(28) > 0
v = 28     ;fv =
value = -1
;ignorehitpause =
;persistent =

[State hadouken hit helper]
type = Helper
triggerall = numenemy
triggerall = (enemyNear, StateNo = [9000, 9999]) || (enemyNear, StateNo = [5000, 5999])
triggerall = p2movetype = H
trigger1 = numhelper(3)
trigger1 = helper(3), movehit
helpertype = normal
persistent = 0
name = "burner"
id = 1711
pos = 0, -80
postype = p2
stateno = 1956
ownpal = 1
size.xscale = 1
size.yscale = 0.8


[State -2, Finish SFX]
type = AllPalFX
trigger1 =  Life <= 0  && (Var(51) !=1)
add = 255,255,255
persistent = 0
time =2
ignorehitpause = 1

[State -2,1]
type = PlaySnd
trigger1 = Life <= 0  && (Var(51) !=1) && !NumHelper(994)
value = 9,3
volume =255
ignorehitpause = 1
channel = -1

[State -2,1]
type = PlaySnd
trigger1 = Life <= 0  && (Var(51) !=1) && !NumHelper(994)
value = 9,3
volume =255
ignorehitpause = 1
channel = -1

[State -2,1]
type = PlaySnd
trigger1 = Life <= 0  && (Var(51) !=1) && !NumHelper(994)
value = 9,3
volume =255
ignorehitpause = 1
channel = -1

[State -2, 1]
type = EnvShake
trigger1 = Life <= 0 && (Var(51) !=1)
time = 10
ignorehitpause = 1
persistent = 0

[State -2, Super Var 2]
type = VarSet
trigger1 = Life <= 0 && (Var(51) !=1)
v = 51
value = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokoslow

[State -2, Create Helper]
type = Helper
triggerall = var(7) = 0
triggerall = !NumHelper(7100)
trigger1 = Life = 0
ID = 7100
name = "Vida"
StateNo = 7100
postype = p1
pos = 0, 0
ownpal = 1
supermove = 30
pausemove = 30


[State -2, PushEnd]
type = VarSet
trigger1 = var(3) != 0 && stateno != [150,160];[130,160]
var(3) = 0
ignorehitpause = 1

[State 0, 1]
type = Null;Explod
trigger1 = (WinKO) && (Var(51) !=1) && NumExplod(9900) = 0
anim = 9900
ID = 9900
pos = 0,0
postype = left
pausemovetime = 9999999
ontop = 1
ignorehitpause = 1
;persistent = 1
bindtime = -1
removetime = 20

[State -2, Finish SFX]
type = AllPalFX
trigger1 = (WinKO) && (Var(51) !=1)
add = 255,255,255
persistent = 0
time =2
ignorehitpause = 1

[State -2,1]
type = PlaySnd
trigger1 = (WinKO) && (Var(51) !=1) && !NumHelper(994)
persistent = 0
value = 9,3
volume =255
ignorehitpause = 1

[State -2, 1]
type = EnvShake
trigger1 = (WinKO) && (Var(51) !=1)
time = 10
ignorehitpause = 1
persistent = 0

[State -2, Super Var 2]
type = VarSet
trigger1 = (WinKO) && (Var(51) !=1)
v = 51
value = 1
ignorehitpause = 1






;==================================================================================
;======| RELACIONADO ﾀ AI - AI RELATED |===========================================
;==================================================================================

; Within StateDef -2, none of your own AI-related code should be placed
; above these next two controllers.
;==================================================================================
;======| RELACIONADO ﾀ AI - AI RELATED |===========================================
;==================================================================================

; (Credit to ANMC, Bagaliao, and FlowaGirl for the basic helper method concept.)
;
;------------------
; AI Activation Helper State - Primary Version
; (Credit to YongMing for the basic HitPause bugfix concept.)
;
; var(1) - First tick button activation prevention.
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Persistent direction command detection enabler (due to 2002.04.14).
; var(9) - AutoTurn bug fixer.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(59) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.


; This controller is optional.  It allows you treat the AI flag as a boolean
; value rather than an integer value, letting you trigger your AI directives
; with "var(0)" instead of "var(59)>0", and letting you make moves usable only
; by humans by using "!var(0)" instead of "var(59)<1", thus slightly improving
; the size and efficiency of your code.
; Another benefit is that it makes it much easier for users to disable your AI,
; if they so choose.
[State -2, Simplifier]
type = VarSet
trigger1 = (var(59) = 1)
trigger2 = (var(0):=0)
var(0) = 1	; Another option is to replace 1 with something like MatchNo, if
		; you want to design your AI to have varying levels of difficulty.
IgnoreHitPause = 1

[State -2, varKOsnd]
type=varset
trigger1=alive&&var(18)>0
trigger2=!alive&&var(18)<2
var(18)=ifelse(alive,0,var(8)+1)
ignorehitpause=1

[State -2, KOsnd]
type=playsnd
trigger1=!alive&&var(18)=1
trigger1=var(18):=2
value=7050,10;ifelse((var(1)=2),2,1)+2*(stateno=5130)
ignorehitpause=1
persistent=0

[State -2, Damage based on hits]
type=varset
trigger1= numenemy
fvar(12)= ifelse(enemynear,gethitvar(hitcount)<3, 24, ifelse(enemynear,gethitvar(hitcount)>=24, 2, 26-enemynear,gethitvar(hitcount))) / 24.0
ignorehitpause=1

[State -2, Reset var when the opponent recovers]
type=varset
trigger1= numenemy
trigger1= (enemynear,movetype!=H)
trigger2= !numenemy
fvar(12)=1

[State -2, Dampener itself]
type=attackmulset
trigger1= 1
value=fvar(12)
ignorehitpause=1

;------------------------------------------------------

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

; Enter and help partner (Assist)
[State -3, enter the screen]
type = ChangeState
triggerall = var(30)      		                 ; Partner TAG mode activated
triggerall = NumPartner
triggerall = stateno = 4512		                 ; Player waiting outside the screen
triggerall = Life	                             ; And you're alive
trigger1 = partner, stateno = 4710             ; Partner doing his taunt
;special case for Beximus Chars with tag enabled
trigger2 = partner, AuthorName = "Beximus"
trigger2 = partner, stateno = 4900
;-----------------------------------------------
trigger3 = (partner, MoveType = A) && (partner, statetype= A)
trigger3 = (command = "y") && (command = "b")  ; Assist command performed
trigger3 = partner, stateno = [600, 699]       ; During standing attacks
value = 4701
ignorehitpause = 1

[State 810, Explod WallBounce]
type = Explod
triggerall = NumTarget != 0
triggerall = NumExplod(7024) <= 1
;triggerall = StateNo != [2000,2999]
trigger1 = target,stateno = 227
trigger1 = target,time = 1
anim = 7024
id = 7024
postype = p2
facing = target,facing*facing
pos = -24, -56
;pausemovetime = 666
;supermovetime = 666
scale = 0.5,0.5
ownpal = 1
sprpriority = 5

[State 0, Snd FloorBounce]
type = PlaySnd
triggerall = NumTarget != 0
triggerall = NumExplod(7024) <= 1
;triggerall = StateNo != [2000,2999]
trigger1 = target,stateno = 227
trigger1 = target,time = 1
value = S7000,2

[State -3, Activate AI]
type = VarSet
triggerall = var(20) != 1
trigger1 = command = "CPU1"
trigger2 = command = "CPU2"
trigger3 = command = "CPU3"
;trigger4 = var(20) != 1;   <<<  teste
v = 20
value = 1

;====================================================================================
;Tag Stuff

[State -1, Partner Change]
type = ChangeState
value = 4510
triggerall = var(30) = 1
triggerall = partner, life > 0
triggerall = StateType != A
triggerall = partner, stateno = 4512
triggerall = var(20) = 1
triggerall = ctrl
triggerall = stateno != 191
trigger1 = Life < 250

[State -1, Partner Assist]
type = ChangeState
value = 4700
triggerall = var(30) = 1
triggerall = partner, life > 0
triggerall = StateType != A
triggerall = partner, stateno = 4512
triggerall = partner, life > 500
triggerall = var(20) = 1
triggerall = ctrl
triggerall = stateno != 191
trigger1 = random = [28,415]

[State -1, Dual Hyper!]
type = ChangeState
value = 4600
triggerall = var(30) = 1
triggerall = partner, life > 0
triggerall = StateType != A
triggerall = partner, stateno = 4512
triggerall = var(20) = 1
triggerall = power >= 2000
triggerall = ctrl
triggerall = stateno != 191
trigger1 = random = [650,780]

; ============================ (TAG SYSTEM) =============================
; Run into the screen (tagged in)
[State -3, enter the screen]
type = ChangeState
triggerall = var(30)      		; Partner TAG mode activated
triggerall = NumPartner
triggerall = stateno = 4512		; Player waiting outside the screen
trigger1 = partner, stateno = 4510      ; Partner leaving the screen
trigger1 = Life		                ; And you're alive
value = 4500

; Enter and do a Hyper (Tag attack)
[State -3, enter the screen]
type = ChangeState
triggerall = var(30)      		; Partner TAG mode activated
triggerall = NumPartner
triggerall = stateno = 4512		; Player waiting outside the screen
trigger1 = partner, stateno = 4600      ; Partner doing his Hyper Attack
trigger1 = Life		                ; And you're alive
trigger2 = partner, Name = "MvC2 Akuma/Gouki"
trigger2 = partner, stateno = 4612
trigger3 = partner, Name = "Felicia MvC2 Style by MGBenz"
trigger3 = partner, stateno = 4612
trigger4 = partner, AuthorName = "Beximus"
trigger4 = partner, stateno = 4600
value = 4601

; Enter and help partner (Assist)
[State -3, enter the screen]
type = ChangeState
triggerall = var(30)      		                 ; Partner TAG mode activated
triggerall = NumPartner
triggerall = stateno = 4512		                 ; Player waiting outside the screen
triggerall = Life	                             ; And you're alive
trigger1 = partner, stateno = 4700             ; Partner doing his taunt
;special case for Beximus Chars with tag enabled
trigger2 = partner, AuthorName = "Beximus"
trigger2 = partner, stateno = 4900
;-----------------------------------------------
trigger3 = (partner, MoveType = A) && (partner, statetype != A)
trigger3 = (command = "y") && (command = "b")  ; Assist command performed
trigger3 = partner, stateno = [200, 399]       ; During standing attacks
trigger4 = (partner, MoveType = A) && (partner, statetype != A)
trigger4 = (command = "y") && (command = "b")  ; Assist command performed
trigger4 = partner, stateno = [400, 599]       ; During crouching attacks
value = 4701
ignorehitpause = 1

; Enter and help partner (Partner Counter)
[State -3, enter the screen]
type = ChangeState
triggerall = var(30)      		; Partner TAG mode activated
triggerall = NumPartner
triggerall = stateno = 4512		; Player waiting outside the screen
trigger1 = partner, stateno = 4800      ; Partner going out
trigger1 = partner, time >= 3
trigger1 = Life		                ; And you're alive
value = 4801

; Jump into the screen (partner was KOed)
[State -3, enter the screen]
type = ChangeState
triggerall = var(30)      		; Partner TAG mode activated
triggerall = NumPartner
triggerall = StateNo = 4512             ; Player waiting outside the screen
trigger1 = !(Partner, Life)             ; Partner dead
trigger1 = (partner, stateno = 5150)
trigger1 = Life                         ; And you're alive
trigger2 = roundstate >= 3              ; the match is over
trigger2 = Win || LoseTime || WinTime || DrawGame
value = 4520

[State -3, wait out of the stage]
type = ChangeState
triggerall = NumPartner  && stateno != 191
trigger1 = (var(30) = 2) || (var(30) >= 3) ; just performed team attack or assist attack
trigger1 = RoundState = 2                  ; currently fighting
trigger1 = Life && Partner, Life	         ; And you're alive
trigger1 = (stateno != [1000,4000]) && (stateno != [4500,4999])
trigger1 = stateno != [5000, 5899]
value = 4511


; ======================================
; Combo Counting Code
; ======================================
[State -3: Inc Non-Proj Hits]
type = VarAdd
trigger1 = HitCount > var(12)
v = 13
value = 1

[State -3: Combo Counter]
type = VarSet
trigger1 = HitCount > var(12)
trigger2 = HitCount = 0
var(12) = HitCount

[State -3: Projectile Hits Count Too]
type = VarAdd
trigger1 = ProjHit = 1
v = 11
value = 1

[State -3: Combo Counter]
type = VarSet
trigger1 = var(12) > 0
trigger2 = var(11) > 0
trigger3 = var(14) > 0
var(15) = var(13) + var(11) + var(14)

[State -3: Damage Dampener]
type = VarSet
trigger1 = var(15) > 3
var(17) = floor((var(15) - 1)/3)*7

[State -3: FCombo Counter]
type = Null;VarSet
trigger1 = var(15) > 0
fvar(15) = var(15)

[State -3: Set AttackMul]
type = Null;AttackMulSet
trigger1 = var(15) > 0
value = 1.0 - (var(15) / 50)

[State -3: Reset AttackMul]
type = Null;AttackMulSet
trigger1 = var(15) = 0
value = 1.0


;==========================================================

[State -3: Reset Stuff]
type = VarSet
trigger1 = enemyNear, MoveType != H
var(15) = (var(11) := (var(12) := (var(13) := (var(14) := (var(16) := (var(17) := 0))))))


;This controller plays a sound everytime the player lands from a jump, or
;from a back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 40, 0

[State -3, GetHit Snd]
type=playsnd
triggerall=alive&&time=1
triggerall=stateno=5000||stateno=5010
trigger1=gethitvar(animtype)>=2&&random<500
trigger2=gethitvar(animtype)=1&&random<375
trigger3=gethitvar(animtype)=0&&random<250
value=s5000,(0+(random%4));*10,ceil(random/200)
channel=0
ignorehitpause=1

[State -3, GetHit Snd]
type=playsnd
triggerall=alive&&time=1
trigger1=(stateno=5000||stateno=5010)&&numenemy
trigger1=gethitvar(fall)||(enemynear,hitdefattr=SCA,SA,HA)
trigger2=(stateno=5020||stateno=5070||stateno=5080)
trigger3=(stateno=5050||stateno=5100)&&(prevstateno!=[5000,5199])
value=s5000,(0+(random%4));*10,ceil(random/200)
channel=0
ignorehitpause=1

;wall hit
[state 5100,2]
type = explod
triggerall = stateno!=0
triggerall = stateno!=3005
triggerall = stateno!=3000
triggerall = stateno!=1000
triggerall = stateno!=1005
triggerall = stateno!=1010
triggerall = stateno!=50
;triggerall = stateno!=[5000,5999]
;triggerall = movetype ! =H
triggerall = var(42)
triggerall = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 7024
pos = (enemy,const(size.mid.pos.x))-20,(target,const(size.mid.pos.y))
postype = p2
scale = 0.6,0.52
sprpriority = 3
bindtime = 1
facing = -1
removetime = -2
id = 7024
shadow = 0,0,0
ownpal = 1
;removeongethit = 1
;ignorehitpause = 1
;vel = -2,0
;accel = -0.1,0

[state 5100,2]
type = explod
triggerall = stateno!=0
triggerall = stateno!=3005
triggerall = stateno!=3000
triggerall = stateno!=1000
triggerall = stateno!=1005
triggerall = stateno!=1010
triggerall = stateno!=50
;triggerall = stateno!=[5000,5999]
;triggerall = movetype ! =H
triggerall = var(42)
triggerall = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 7024
pos = (enemy,const(size.mid.pos.x))-20,(target,const(size.mid.pos.y))
postype = p2
sprpriority = -3
bindtime = 1
facing = -1
scale = 0.6,0.52
removetime = -2
id = 7024
shadow = -1
ownpal = 1
;removeongethit = 1
;ignorehitpause = 1
;vel = -2,0
;accel = -0.1,0

[state 5100,2]
type = playsnd
triggerall = stateno!=0
triggerall = stateno!=3005
triggerall = stateno!=3000
triggerall = stateno!=1000
triggerall = stateno!=1005
triggerall = stateno!=1010
triggerall = stateno!=50
;triggerall = stateno!=[5000,5999]
;triggerall = movetype ! =H
triggerall = var(42)
triggerall = numenemy
triggerall = enemynear,stateno != [120,159]
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 7000,2
channel = 4
volume = 255

[state 200, 3]
type = varset
;triggerall = stateno!=[5000,5999]
;triggerall = movetype ! =H
triggerall = var(42)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 42
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 24
value = var(22)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 22
value = var(25)+hitcount

[state -3, 2];combo hosei
type = varset
trigger1 = enemynear,movetype != H
v = 25
value = 0

;***************
[state -3, 2];combo
type = varset
trigger1 = var(22)>var(24)
v = 42
value = 1

[State -3, VarSet]
type = VarSet
trigger1 = stateno != [3000,3999]
;trigger1 = animtime = 0
v = 45   ;fv = 10
value = 0

[State -3, Explod]
type = Explod
triggerall = numexplod(3792)=0
trigger1 = p2stateno = 3497
trigger2 = p2stateno = 34970
trigger3 = p2stateno = 34971
trigger4 = p2stateno = 3498
trigger5 = p2stateno = 34980
trigger6 = p2stateno = 34981
anim = 3792
ID = 3792
pos = 0,-50
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove = 999
pausemove = 999
scale = 1,1.5
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
;ignorehitpause =
persistent =  1

[State -3, RemoveExplod]
type = RemoveExplod
trigger1 = p2movetype != H
id =  3792
;ignorehitpause =
;persistent =

[State -3, RemoveExplod]
type = RemoveExplod
trigger1 = anim !=1100
id = 1190
;ignorehitpause =
;persistent =

[State -3, RemoveExplod]
type = RemoveExplod
trigger1 = anim !=3102
id = 3195
;ignorehitpause =
;persistent =

;Win Screen
[Statedef 9991]
type = S
movetype = I
anim = 19997

[State -2, Reset]
type = AssertSpecial
trigger1 = time = [0,800]
flag = RoundNotOver

[State -2, Reset]
type = AssertSpecial
trigger1 = time = [200,1200]
flag = NoBarDisplay
flag2 =NoMusic
flag3 =NoFG

[State 9990, Good]
type = PlaySnd
trigger1 = time = 200 && parent, Var(56) !=2
value = 65,1
abspan = 0
volume = 255
freqmul = 0.5

[State 9990, Good]
type = PlaySnd
trigger1 = time = 220 && parent, Var(56) !=2
value = 1,6
abspan = 0
volume = 0

[State 9990, Good]
trigger1 = time = 200 && parent, Var(56) !=2
type = Explod
ownpal = 1
anim = 20015
postype = left
pos = 0,0
bindtime = -1
removetime =700
ID = 20014
sprpriority =5
ontop = 1




[State 9990, Good]
trigger1 = time = 205 && parent, Var(56) !=2
type = Explod
ownpal = 1
anim = 9993
postype = left
pos = 0,0
bindtime = -1
removetime =700
ID = 9990
ontop =1

[State 9990, Good]
trigger1 = time = 202 && parent, Var(56) =2
type = Explod
ownpal = 1
anim = 9993
postype = left
pos = 319,0
bindtime = -1
removetime =700
ID = 9990
ontop =1
facing = -1

[State 9990, Good]
trigger1 = time = 220 && parent, Var(56) !=2
type = Explod
ownpal = 1
anim = 9992
postype = left
pos = 0,240
bindtime = -1
removetime =700
ID = 9990
ontop =1

[State 9990, Good]
trigger1 = time = 235 && parent, Var(56) !=2
type = Explod
ownpal = 1
anim = 9980+(random%5)
postype = left
pos = 0,240
bindtime = -1
removetime =700
ID = 9990
ontop =1







; Super Finish Effect
[Statedef 9994]
type = S
ctrl = 0
anim = 19997
velset = 0,0
sprpriority = 4

[State 0,1]
type = RemoveExplod
trigger1 = !time
ID = 998

[State 0, 1]
type = AssertSpecial
trigger1 = 1
ignorehitpause = 1
flag = NoFG
flag2 = NoBG
flag3= NoMusic


[State 0,1]
type = StopSnd
trigger1 = !time
channel = 9
;ignorehitpause = 0
;persistent = 1

[State -2,1]
type = PlaySnd
trigger1 = time = 0
persistent = 0
value = 9,0
volume =455
ignorehitpause = 1

[State -2,1]
type = PlaySnd
trigger1 = time = 0
persistent = 0
value = 9,1
volume =455
ignorehitpause = 1


[State 3510, 4]
type = explod
trigger1 = time = 0
anim = 20015
pos = 0,0
postype = left
sprpriority = -10
supermove = 1
bindtime = 75
removetime = 75
ID = 20014
ignorehitpause = 1


[State 7001, 2]
type = DestroySelf
trigger1 = time =75


[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


[State 1110, Darken]
type = PalFX
trigger1 = time = 50
add = 0,0,0
sinadd = 255,255,255,100
time = 25


; MvC2 Super flash
[Statedef 9999]
type = S
ctrl = 0
anim = 19997
velset = 0,0
sprpriority = 4

[State 192, 2]
type = PlaySnd
trigger1 = time = 0
value = 20, (Parent, var(30) - 1)

[State 192, 2]
type = PlaySnd
trigger1 = time = 0
value = 0, 22



[State 7001, 2]
type = DestroySelf
trigger1 = time =50



[State 9999, 1]
type = AssertSpecial
trigger1 = 1
ignorehitpause = 1
flag = NoFG
flag2 = NoBG

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;The Shadows
[Statedef 10000]
type    = S
movetype= I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Time = 0
value = parent, Anim
elem = parent, animelemno(0)

[State 0, 1]
type = ChangeAnim
trigger1 = Time >= 1
value = Anim
elem = animelemno(0)

[State 0, 2]
type = SprPriority
trigger1 = Time = 3
value = -2

[State 0, 2]
type = SprPriority
trigger1 = Time = 6
value = -3

[State 0, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, 1]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 0, 1]
type = AssertSpecial
trigger1 = time%2=0
flag = invisible

[State 0, 1]
type = DestroySelf
trigger1 = (Time = 8)

;-------------------
;MEE Template Files
;   provided by
;  Kitsune Sniper
;       ***
; Thanks, Kitsune!
;-------------------

;-------------------
;MEE Template Files
;   provided by
;  Kitsune Sniper
;       ***
; Thanks, Kitsune!
;-------------------
;----------------------------------------------------------------------------------------;
;                                        Dizzy code                                      ;
;----------------------------------------------------------------------------------------;
[State -3, Varadd]
type = VarAdd
triggerall = (Time = 0) && (Var(36) < 15) && (Var(37) = 0)
trigger1 = (StateNo = 5000) || (StateNo = 5010) || (StateNo = 5020) || (StateNo = 5070) || (StateNo = 5080)
v = 35
value = ((GetHitVar(animtype)=0)*50)+((GetHitVar(animtype)=1)*100)+((GetHitVar(animtype)=2)*150)+((GetHitVar(animtype)>=3)*200)

[State -3, VarSubtract]
type = VarAdd
trigger1 = Var(35) > 0
v = 35
value = ifelse(MoveType = A,-3,-2)

[State -3, VarSet]
type = VarSet
trigger1 = Var(35) < 0
v = 35
value = 0
ignorehitpause = 1

[State -3, Redizzy VarSet]
type = VarSet
trigger1 = (MoveType != H) && (StateNo != [970,972])
v = 37
value = 0

[State -3, ChangeState]
type = ChangeState
triggerall = Time = 1
trigger1 = (StateNo = 5000) || (StateNo = 5010) || (StateNo = 5020) || (StateNo = 5070) || (StateNo = 5080)
trigger1 = (Var(35) >=10000) && (LoseKO = 0)
value = 970
ignorehitpause = 1


;-------------- Generated by Fighter Factory -------------

;--------------------- Variable List ----------------------


;--------------------- Float Variable List ----------------------

